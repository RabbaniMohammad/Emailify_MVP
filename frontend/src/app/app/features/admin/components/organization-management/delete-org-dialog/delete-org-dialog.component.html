<div class="delete-org-dialog">
  <!-- Dialog Header -->
  <div class="dialog-header">
    <div class="icon-wrapper">
      <mat-icon class="warning-icon">warning</mat-icon>
    </div>
    <h2 class="dialog-title">{{ confirmationStep === 1 ? 'Delete Organization' : 'Final Confirmation' }}</h2>
  </div>

  <mat-dialog-content class="dialog-content">
    <!-- Step 1: Initial Delete Options -->
    <div *ngIf="confirmationStep === 1" class="step-content">
      <div class="organization-info">
        <p class="org-details">
          You are about to delete <span class="org-name-highlight">{{ data.organization.name }}</span>
        </p>
        <div class="org-meta">
          <div class="meta-item">
            <mat-icon>tag</mat-icon>
            <span>Slug: <code>{{ data.organization.slug }}</code></span>
          </div>
          <div class="meta-item">
            <mat-icon>people</mat-icon>
            <span>{{ data.organization.usersCount || 0 }} user(s)</span>
          </div>
        </div>
      </div>

      <div class="divider"></div>

      <div class="delete-option">
        <div class="toggle-wrapper">
          <mat-slide-toggle [(ngModel)]="deleteData" color="warn" class="custom-toggle">
            Delete all organization data
          </mat-slide-toggle>
        </div>
        
        <div class="option-description" [class.warning]="deleteData">
          <mat-icon class="info-icon">{{ deleteData ? 'delete_forever' : 'info' }}</mat-icon>
          <div class="description-text">
            <p *ngIf="!deleteData">
              <strong>Organization only:</strong> Users will be removed from this organization but their accounts remain. 
              All templates and conversations associated with this organization will be permanently deleted.
            </p>
            <div *ngIf="deleteData">
              <p class="danger-text">
                <strong>⚠️ Complete deletion:</strong> This will permanently delete:
              </p>
              <ul class="deletion-list">
                <li>
                  <mat-icon>business</mat-icon>
                  <span>The organization record</span>
                </li>
                <li>
                  <mat-icon>people</mat-icon>
                  <span>All user accounts in this organization</span>
                </li>
                <li>
                  <mat-icon>description</mat-icon>
                  <span>All templates</span>
                </li>
                <li>
                  <mat-icon>chat</mat-icon>
                  <span>All conversations and generated content</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="warning-message">
        <mat-icon>error_outline</mat-icon>
        <p>This action cannot be undone!</p>
      </div>
    </div>

    <!-- Step 2: Final Confirmation -->
    <div *ngIf="confirmationStep === 2" class="step-content final-confirmation">
      <div class="confirmation-header">
        <div class="danger-icon-wrapper">
          <mat-icon class="danger-icon">report_problem</mat-icon>
        </div>
        <h3>Are you absolutely sure?</h3>
      </div>

      <div class="deletion-summary">
        <p class="summary-title">You are about to permanently delete:</p>
        <div class="summary-box">
          <div class="summary-item">
            <mat-icon>business</mat-icon>
            <div>
              <strong>Organization:</strong>
              <span>{{ data.organization.name }} ({{ data.organization.slug }})</span>
            </div>
          </div>
          <div class="summary-item">
            <mat-icon>people</mat-icon>
            <div>
              <strong>Users:</strong>
              <span>{{ data.organization.usersCount || 0 }} account(s) {{ deleteData ? 'will be deleted' : 'will be removed from org' }}</span>
            </div>
          </div>
          <div class="summary-item">
            <mat-icon>{{ deleteData ? 'delete_forever' : 'folder_delete' }}</mat-icon>
            <div>
              <strong>Data:</strong>
              <span>{{ deleteData ? 'All templates, conversations, and generated content' : 'Organization templates and conversations only' }}</span>
            </div>
          </div>
        </div>
      </div>

      <div class="final-warning">
        <mat-icon>warning</mat-icon>
        <p>This action is irreversible and will take effect immediately.</p>
      </div>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions class="dialog-actions">
    <button mat-button (click)="onCancel()" class="cancel-btn">
      <mat-icon>close</mat-icon>
      <span>Cancel</span>
    </button>
    <button 
      *ngIf="confirmationStep === 1"
      mat-raised-button 
      color="warn" 
      (click)="goToFinalConfirmation()"
      class="continue-btn">
      <span>Continue to Confirm</span>
      <mat-icon>arrow_forward</mat-icon>
    </button>
    <button 
      *ngIf="confirmationStep === 2"
      mat-raised-button 
      color="warn" 
      (click)="onConfirm()"
      class="delete-btn">
      <mat-icon>delete_forever</mat-icon>
      <span>Yes, Delete {{ deleteData ? 'Everything' : 'Organization' }}</span>
    </button>
  </mat-dialog-actions>
</div>
