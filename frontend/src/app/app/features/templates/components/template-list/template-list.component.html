<div class="modern-list-wrapper">
  <!-- Template Count Badge -->
  <div class="count-badge">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
    </svg>
    <span class="count-number">{{ items.length }}</span>
    <span class="count-label">templates</span>
  </div>

  <!-- Template List with Scroll Container -->
  <mat-nav-list class="tpl-list" #scrollContainer>
    <mat-list-item
      *ngFor="let item of items; trackBy: trackById"
      (click)="onClick(item)"
      [class.selected]="item.id === selectedId"
      class="template-item"
    >
      <div class="item-wrapper">
        <div class="item-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="9" cy="9" r="2"/>
            <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
          </svg>
        </div>

        <div class="item-content">
          <span class="name">{{ item.name || 'Untitled template' }}</span>

          <button
            *ngIf="item.id === showActionForId"
            mat-raised-button
            color="primary"
            class="run-btn"
            (click)="onAction(item, $event)"
            aria-label="Run tests"
          >
            <mat-icon>play_arrow</mat-icon>
            <span>Run tests</span>
          </button>
        </div>

        <div class="selection-indicator" *ngIf="item.id === selectedId"></div>
      </div>
    </mat-list-item>
  </mat-nav-list>
</div>