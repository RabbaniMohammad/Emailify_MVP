import{a as E}from"./chunk-M524VR4G.js";import{Aa as h,Ba as u,Ca as C,Cb as A,Ga as x,Ia as s,J as a,Ja as o,O as I,P as l,Qa as S,R as f,S as p,T as _,Za as H,ba as g,fa as v,ga as d,gb as T,qa as M,qb as F,ra as c,sa as y,vb as k,vc as w}from"./chunk-RSLNC5OR.js";function P(e,b){e&1&&C(0,"div",4)}function N(e,b){if(e&1){let i=x();h(0,"iframe",5),s("load",function(){p(i);let n=o();return _(n.loading=!1)}),u()}if(e&2){let i=o();c("srcdoc",i.safeSrcdoc,g)}}function L(e,b){if(e&1){let i=x();h(0,"iframe",6),s("load",function(){p(i);let n=o();return _(n.loading=!1)}),u()}if(e&2){let i=o();c("srcdoc",i.safeSrcdoc,g)}}var Z=(()=>{class e{constructor(i){this.s=i,this.html="",this.loading=!1,this.allowScripts=!1,this.safeSrcdoc=null}ngOnChanges(){this.loading=!!this.html;let i=this.ensureDoc(this.html||""),t=this.stripDangerousBits(i);this.safeSrcdoc=this.s.bypassSecurityTrustHtml(t)}ensureDoc(i){let t=String(i||"");return/<body[\s>]/i.test(t)||/<\/html>/i.test(t)?t:'<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body>'+t+"</body></html>"}stripDangerousBits(i){try{let t=new DOMParser().parseFromString(i,"text/html");return t.querySelectorAll("script, iframe, base").forEach(n=>n.remove()),t.querySelectorAll("*").forEach(n=>{for(let r=n.attributes.length-1;r>=0;r--){let m=n.attributes.item(r);m&&/^on/i.test(m.name)&&n.removeAttribute(m.name)}}),`<!doctype html>
`+t.documentElement.outerHTML}catch{return i.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<base[\s\S]*?>/gi,"").replace(/<iframe[\s\S]*?<\/iframe>/gi,"")}}static{this.\u0275fac=function(t){return new(t||e)(d(A))}}static{this.\u0275cmp=I({type:e,selectors:[["app-html-preview"]],inputs:{html:"html",loading:"loading",allowScripts:"allowScripts"},standalone:!0,features:[f,H],decls:5,vars:3,consts:[["safeIframe",""],[1,"preview-wrap"],["class","skeleton-cover","aria-hidden","true",4,"ngIf"],["class","preview-frame","sandbox","allow-same-origin allow-scripts","referrerpolicy","no-referrer",3,"load",4,"ngIf","ngIfElse"],["aria-hidden","true",1,"skeleton-cover"],["sandbox","allow-same-origin allow-scripts","referrerpolicy","no-referrer",1,"preview-frame",3,"load"],["sandbox","allow-same-origin","referrerpolicy","no-referrer",1,"preview-frame",3,"load"]],template:function(t,n){if(t&1&&(h(0,"div",1),M(1,P,1,0,"div",2)(2,N,1,1,"iframe",3)(3,L,1,1,"ng-template",null,0,T),u()),t&2){let r=S(4);v(),y("ngIf",n.loading),v(),y("ngIf",n.allowScripts)("ngIfElse",r)}},dependencies:[k,F],styles:[".preview-wrap[_ngcontent-%COMP%]{position:relative;border-radius:.5rem;overflow:hidden}.preview-frame[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 180px);min-height:480px;border:1px solid rgba(0,0,0,.1);border-radius:.5rem;background:#fff;display:block}.skeleton-cover[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:10;pointer-events:none;background:linear-gradient(90deg,#eeeeeef2 25%,#fafafaf2,#eeeeeef2 75%);background-size:400% 100%;animation:_ngcontent-%COMP%_shimmer 1.2s infinite linear}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}"],changeDetection:0})}}return e})();var D=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=l({type:e})}static{this.\u0275inj=a({})}}return e})();var oe=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=l({type:e})}static{this.\u0275inj=a({imports:[w,E,E,D,w]})}}return e})();export{Z as a,oe as b};
