import{a as De,b as $e}from"./chunk-HMC4AX2S.js";import{$b as je,Aa as t,Ba as a,Ca as d,Da as X,E as I,Ea as Q,Eb as R,F as re,Ga as A,Gb as Se,Hc as ze,I as N,Ia as O,Ja as h,Jc as U,L as se,Lc as q,M as w,Mc as Ae,Nc as Le,O as G,R as ce,Ra as r,S as T,Sa as M,T as z,Ta as S,U as p,Ua as de,V as f,Va as pe,Vb as Pe,Wa as ge,Wb as we,Xa as ue,Xb as ee,Yb as ye,Za as H,Zb as te,_ as me,_b as Ee,ac as ke,bc as Ie,c as $,cc as Te,cd as Fe,d as v,db as C,eb as x,fa as s,fb as he,fd as Y,ga as V,i as k,ib as be,k as y,l as ae,m as J,nb as fe,pb as _e,qa as g,qb as Ce,sa as m,sb as xe,tb as Me,u as P,ua as D,ub as ve,v as Z,va as le,vb as B,wb as Oe,z as oe}from"./chunk-RSLNC5OR.js";import{a as K,b as ie,f as j}from"./chunk-CWTPBX7D.js";var Ne=(()=>{class i{constructor(){this.STORAGE_KEY_PREFIX="campaign_form_"}getStorageKey(e,o,n){return`${this.STORAGE_KEY_PREFIX}${e}_${o}_${n}`}saveCampaignData(e,o,n,c){try{let u=this.getStorageKey(e,o,n),b=this.getCampaignData(e,o,n),_=ie(K(K({},b),c),{templateId:e,runId:o,variantNo:n,savedAt:new Date().toISOString()});localStorage.setItem(u,JSON.stringify(_))}catch(u){console.error("\u274C Error saving campaign data to localStorage:",u)}}getCampaignData(e,o,n){try{let c=this.getStorageKey(e,o,n),u=localStorage.getItem(c);if(u)return JSON.parse(u)}catch(c){console.error("Error loading campaign data from localStorage:",c)}return this.getEmptyFormData(e,o,n)}hasCampaignData(e,o,n){try{let c=this.getStorageKey(e,o,n);return localStorage.getItem(c)!==null}catch{return!1}}clearCampaignData(e,o,n){try{let c=this.getStorageKey(e,o,n);localStorage.removeItem(c)}catch(c){console.error("Error clearing campaign data from localStorage:",c)}}clearAllCampaignData(){try{let e=[];for(let o=0;o<localStorage.length;o++){let n=localStorage.key(o);n&&n.startsWith(this.STORAGE_KEY_PREFIX)&&e.push(n)}e.forEach(o=>localStorage.removeItem(o))}catch(e){console.error("Error clearing all campaign data:",e)}}getEmptyFormData(e,o,n){return{selectedAudience:null,masterData:[],uploadedFileName:"",reconciliation:null,addNewMembersToAudience:!1,scheduleGroups:[],timezoneAnalysis:null,subject:"",bodyAddition:"",generatedSubjects:[],testEmails:[],testEmailSent:!1,testEmailSentAt:null,templateId:e,runId:o,variantNo:n,savedAt:new Date().toISOString()}}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Ge=(()=>{class i{constructor(e){this.http=e,this.audiencesSubject=new v([]),this.audiences$=this.audiencesSubject.asObservable(),this.selectedAudienceSubject=new v(null),this.selectedAudience$=this.selectedAudienceSubject.asObservable(),this.masterDataSubject=new v([]),this.masterData$=this.masterDataSubject.asObservable(),this.reconciliationSubject=new v(null),this.reconciliation$=this.reconciliationSubject.asObservable(),this.timezoneAnalysisSubject=new v(null),this.timezoneAnalysis$=this.timezoneAnalysisSubject.asObservable()}fetchMailchimpAudiences(){return this.http.get("/api/mailchimp/audiences").pipe(J(e=>{let o=(e.lists||[]).map(n=>({id:n.id,name:n.name,memberCount:n.stats?.member_count||0,stats:n.stats||{member_count:0,unsubscribe_count:0,cleaned_count:0}}));return this.audiencesSubject.next(o),o}),P(e=>(console.error("Failed to fetch Mailchimp audiences:",e),k(()=>new Error("Failed to load Mailchimp audiences")))))}selectAudience(e){this.selectedAudienceSubject.next(e)}uploadMasterDocument(e){let o=new FormData;return o.append("file",e),this.http.post("/api/campaign/upload-master",o).pipe(J(n=>{let c=n.data||[];this.masterDataSubject.next(c);let u=this.analyzeTimezones(c);return this.timezoneAnalysisSubject.next(u),c}),P(n=>(console.error("Failed to parse master document:",n),k(()=>new Error("Failed to parse master document")))))}analyzeTimezones(e){let o=e.some(_=>"timezone"in _);if(!o)return{hasTimezoneColumn:!1,uniqueTimezones:[],timezoneMode:"none",emptyTimezoneCount:e.length,totalRows:e.length};let n=e.map(_=>_.timezone?.trim()).filter(_=>_&&_.length>0),c=Array.from(new Set(n)),u=e.length-n.length,b;return n.length===0?b="none":c.length===1&&u===0?b="single":c.length>1&&u===0?b="multiple":b="mixed",{hasTimezoneColumn:o,uniqueTimezones:c,timezoneMode:b,emptyTimezoneCount:u,totalRows:e.length}}reconcileAudiences(e,o){return this.http.post("/api/campaign/reconcile",{audienceId:e,emails:o}).pipe(re(n=>{this.reconciliationSubject.next(n)}),P(n=>(console.error("Failed to reconcile audiences:",n),k(()=>new Error("Failed to reconcile audiences")))))}sendTestEmails(e,o,n){return this.http.post("/api/campaign/send-test",{testEmails:e,subject:o,html:n}).pipe(P(c=>(console.error("Failed to send test emails:",c),k(()=>new Error("Failed to send test emails")))))}groupByScheduleTime(e){let o=new Map,n=[],c=Intl.DateTimeFormat().resolvedOptions().timeZone;e.forEach(b=>{let _=b.audiences_list?.trim().toLowerCase(),L=b.scheduled_time?.trim(),F=b.timezone?.trim();if(_){if(!L){n.push(_);return}try{let E;if(F?E=this.parseTimeInTimezone(L,F):E=new Date(L),isNaN(E.getTime()))throw new Error("Invalid date");let W=`${E.toISOString()}_${F||"LOCAL"}`;o.has(W)||o.set(W,{emails:[],timezone:F||c}),o.get(W).emails.push(_)}catch{n.push(_)}}});let u=[];return n.length>0&&u.push({scheduledTime:new Date,emails:Array.from(new Set(n)),count:n.length,isImmediate:!0,timezoneSource:"none"}),o.forEach((b,_)=>{let[L,F]=_.split("_"),E=F==="LOCAL";u.push({scheduledTime:new Date(L),emails:Array.from(new Set(b.emails)),count:b.emails.length,isImmediate:!1,timezone:b.timezone,timezoneSource:E?"local":"customer"})}),u.sort((b,_)=>b.isImmediate&&!_.isImmediate?-1:!b.isImmediate&&_.isImmediate?1:b.scheduledTime.getTime()-_.scheduledTime.getTime()),u}parseTimeInTimezone(e,o){if(e.includes("+")||e.match(/-\d{2}:\d{2}$/))return new Date(e);try{let n=new Date(e),c={timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1};return new Date(n.toLocaleString("en-US",c))}catch{try{return new Date(e+" "+o)}catch{return new Date(e)}}}submitCampaign(e){return this.http.post("/api/campaign/submit",e).pipe(P(o=>(console.error("Failed to submit campaign:",o),k(()=>new Error("Campaign submission failed")))))}extractTestEmails(e){let o=new Set;return e.forEach(n=>{let c=n.test_emails?.trim();c&&c.split(",").forEach(u=>{let b=u.trim().toLowerCase();this.isValidEmail(b)&&o.add(b)})}),Array.from(o)}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}clearState(){this.audiencesSubject.next([]),this.selectedAudienceSubject.next(null),this.masterDataSubject.next([]),this.reconciliationSubject.next(null),this.timezoneAnalysisSubject.next(null)}getCurrentTimezoneAnalysis(){return this.timezoneAnalysisSubject.value}getBrowserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}hasImmediateSends(e){return e.some(o=>o.isImmediate)}getImmediateSendCount(e){return e.find(n=>n.isImmediate)?.count||0}isValidTimezone(e){try{return Intl.DateTimeFormat(void 0,{timeZone:e}),!0}catch{return!1}}cleanupTempMembers(e,o){return this.http.post("/api/campaign/cleanup-temp",{audienceId:e,emails:o})}addNewMembersToAudience(e,o){return this.http.post("/api/campaign/add-members",{audienceId:e,emails:o}).pipe(P(n=>(console.error("Failed to add members:",n),k(()=>new Error("Failed to add members to audience")))))}static{this.\u0275fac=function(o){return new(o||i)(se(Oe))}}static{this.\u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Be(i,l){i&1&&(t(0,"div",33),d(1,"mat-progress-spinner",34),t(2,"p"),r(3,"Loading Mailchimp audiences..."),a()())}function Re(i,l){if(i&1){let e=A();t(0,"div",35),p(),t(1,"svg",4),d(2,"circle",36)(3,"line",37)(4,"line",38),a(),f(),t(5,"p"),r(6,"Failed to load audiences"),a(),t(7,"button",39),O("click",function(){T(e);let n=h();return z(n.loadMailchimpAudiences())}),r(8,"Retry"),a()()}}function Ue(i,l){i&1&&(t(0,"div",47),p(),t(1,"svg",4),d(2,"path",48),a()())}function qe(i,l){if(i&1){let e=A();t(0,"div",42),O("click",function(){let n=T(e).$implicit,c=h(2);return z(c.selectAudience(n))}),t(1,"div",43)(2,"div",44),r(3),a(),t(4,"div",45),r(5),C(6,"number"),a()(),g(7,Ue,3,0,"div",46),a()}if(i&2){let e=l.$implicit,o=h(2);D("selected",(o.selectedAudience==null?null:o.selectedAudience.id)===e.id),s(3),M(e.name),s(2),S("",x(6,5,e.memberCount)," members"),s(2),m("ngIf",(o.selectedAudience==null?null:o.selectedAudience.id)===e.id)}}function Ye(i,l){if(i&1&&(t(0,"div",40),g(1,qe,8,7,"div",41),a()),i&2){let e=h();s(),m("ngForOf",e.audiences)}}function We(i,l){i&1&&(t(0,"div",49),p(),t(1,"svg",4),d(2,"circle",36)(3,"line",37)(4,"line",38),a(),f(),t(5,"p"),r(6,"No audiences found"),a(),t(7,"small"),r(8,"Create an audience in Mailchimp first"),a()())}function Ke(i,l){i&1&&d(0,"mat-progress-spinner",50)}function Je(i,l){if(i&1&&(t(0,"div",51)(1,"div",52),p(),t(2,"svg",4),d(3,"path",48),a(),f(),t(4,"div",53)(5,"strong"),r(6),C(7,"number"),a(),t(8,"small"),r(9),a()()()()),i&2){let e=h();s(6),S("",x(7,3,e.masterData.length)," rows uploaded"),s(3),de("",e.testEmails.length," test email(s) \u2022 ",e.scheduleGroups.length," time slot(s)")}}function Ze(i,l){i&1&&(t(0,"div",54),p(),t(1,"svg",4),d(2,"circle",36)(3,"line",55)(4,"line",56),a(),f(),t(5,"p"),r(6,"Upload failed. Check file format."),a()())}function Xe(i,l){i&1&&(t(0,"div",33),d(1,"mat-progress-spinner",34),t(2,"p"),r(3,"Reconciling audiences..."),a()())}function Qe(i,l){if(i&1&&(t(0,"div",58)(1,"div",59)(2,"div",60)(3,"div",61),p(),t(4,"svg",4),d(5,"path",48),a()(),f(),t(6,"div",62)(7,"div",63),r(8),C(9,"number"),a(),t(10,"div",64),r(11,"Existing"),a()()(),t(12,"div",65)(13,"div",61),p(),t(14,"svg",4),d(15,"path",66),a()(),f(),t(16,"div",62)(17,"div",63),r(18),C(19,"number"),a(),t(20,"div",64),r(21,"New"),a()()(),t(22,"div",67)(23,"div",61),p(),t(24,"svg",4),d(25,"path",68),a()(),f(),t(26,"div",62)(27,"div",63),r(28),C(29,"number"),a(),t(30,"div",64),r(31,"Ignored"),a()()()()()),i&2){let e=h(2);s(8),M(x(9,3,e.reconciliation.summary.existingCount)),s(10),M(x(19,5,e.reconciliation.summary.newCount)),s(10),M(x(29,7,e.reconciliation.summary.ignoredCount))}}function et(i,l){if(i&1&&(t(0,"div",1)(1,"div",2)(2,"div",3),p(),t(3,"svg",4),d(4,"path",48),a()(),f(),t(5,"div",8)(6,"h3"),r(7,"Audience Reconciliation"),a(),t(8,"p"),r(9,"Comparison with Mailchimp data"),a()(),t(10,"div",9),r(11,"Step 3"),a()(),g(12,Xe,4,0,"div",10),C(13,"async"),g(14,Qe,32,9,"div",57),C(15,"async"),a()),i&2){let e=h();s(12),m("ngIf",x(13,2,e.reconcileLoading$)==="loading"),s(2),m("ngIf",x(15,4,e.reconcileLoading$)==="success")}}function tt(i,l){if(i&1){let e=A();t(0,"div",69)(1,"div",70)(2,"input",71),ue("ngModelChange",function(n){T(e);let c=h();return ge(c.addNewMembersToAudience,n)||(c.addNewMembersToAudience=n),z(n)}),a(),t(3,"label",72),p(),t(4,"svg",4),d(5,"path",73)(6,"circle",74)(7,"line",75)(8,"line",76),a(),f(),t(9,"small",77),r(10," Checked: New members saved permanently"),d(11,"br"),r(12," Unchecked: New members archived after campaign sent "),a()()()()}if(i&2){let e=h();s(2),pe("ngModel",e.addNewMembersToAudience)}}function nt(i,l){i&1&&d(0,"mat-progress-spinner",98)}function it(i,l){i&1&&(p(),t(0,"svg",4),d(1,"path",99),a())}function at(i,l){if(i&1){let e=A();t(0,"div",103),O("click",function(){let n=T(e).$implicit,c=h(3);return z(c.onSelectSubject(n))}),t(1,"div",104)(2,"span",105),r(3),a()(),t(4,"div",106),p(),t(5,"svg",4),d(6,"path",107),a()()()}if(i&2){let e=l.$implicit,o=h(3);D("selected",o.isSubjectSelected(e)),s(3),M(e)}}function ot(i,l){i&1&&(t(0,"div",108),p(),t(1,"svg",4),d(2,"path",84),a(),f(),t(3,"p"),r(4,'Click "Generate" to create subject line suggestions'),a()())}function rt(i,l){if(i&1&&(t(0,"div",100),g(1,at,7,3,"div",101)(2,ot,5,0,"div",102),a()),i&2){let e=l.ngIf,o=h(2);s(),m("ngForOf",e)("ngForTrackBy",o.trackByIndex),s(),m("ngIf",e.length===0)}}function st(i,l){i&1&&(t(0,"div",109),d(1,"mat-progress-spinner",34),t(2,"p"),r(3,"Generating subject lines..."),a()())}function ct(i,l){i&1&&(t(0,"div",110),r(1," Subject line is required "),a())}function mt(i,l){if(i&1&&(t(0,"div",122)(1,"div",123)(2,"strong"),r(3,"\u23F0 Timezone Notice"),a(),t(4,"p"),r(5),a()()()),i&2){let e=h(4);s(5),M(e.getTimezoneWarningMessage())}}function lt(i,l){if(i&1&&(t(0,"div",124),p(),t(1,"svg",4),d(2,"circle",36)(3,"path",125),a(),f(),t(4,"div",126)(5,"strong"),r(6,"\u{1F30D} Timezone Configuration"),a(),t(7,"p"),r(8),a()()()),i&2){let e=h(4);s(8),M(e.getTimezoneWarningMessage())}}function dt(i,l){if(i&1&&(t(0,"div",119),g(1,mt,6,1,"div",120)(2,lt,9,1,"div",121),a()),i&2){let e=h(3);s(),m("ngIf",e.shouldShowTimezoneWarning()),s(),m("ngIf",e.shouldShowTimezoneInfo())}}function pt(i,l){if(i&1&&(t(0,"div",127),p(),t(1,"svg",4),d(2,"path",128),a(),f(),t(3,"div",129)(4,"strong"),r(5,"\u26A1 Immediate Send"),a(),t(6,"p"),r(7),t(8,"strong"),r(9,"no schedule time"),a(),r(10," and will be sent "),t(11,"strong"),r(12,"immediately"),a(),r(13,' when you click "Submit Campaign"'),a()()()),i&2){let e=h(3);s(7),S("",e.getImmediateSendCount()," recipient(s) have ")}}function gt(i,l){i&1&&(X(0),p(),t(1,"svg",4),d(2,"path",128),a(),f(),t(3,"strong"),r(4,"Send Immediately"),a(),Q())}function ut(i,l){if(i&1&&(t(0,"span",138),p(),t(1,"svg",4),d(2,"circle",36)(3,"polyline",113),a(),r(4),a()),i&2){let e=h(2).$implicit;s(4),S(" ",e.timezone," ")}}function ht(i,l){i&1&&(t(0,"span",139),p(),t(1,"svg",4),d(2,"path",140),a(),r(3," Local Time "),a())}function bt(i,l){if(i&1&&(X(0),t(1,"div",134)(2,"span",135),r(3),C(4,"date"),a(),g(5,ut,5,1,"span",136)(6,ht,4,0,"span",137),a(),Q()),i&2){let e=h().$implicit;s(3),M(he(4,3,e.scheduledTime,"short")),s(2),m("ngIf",e.timezone),s(),m("ngIf",e.timezoneSource==="local")}}function ft(i,l){if(i&1&&(t(0,"div",130)(1,"div",131),g(2,gt,5,0,"ng-container",132)(3,bt,7,6,"ng-container",132),a(),t(4,"div",133),r(5),a()()),i&2){let e=l.$implicit;D("immediate",e.isImmediate)("local-timezone",e.timezoneSource==="local"),s(2),m("ngIf",e.isImmediate),s(),m("ngIf",!e.isImmediate),s(2),S(" ",e.count," recipient(s) ")}}function _t(i,l){if(i&1&&(t(0,"div",111)(1,"div",112),p(),t(2,"svg",4),d(3,"circle",36)(4,"polyline",113),a(),f(),t(5,"span"),r(6),a()(),g(7,dt,3,2,"div",114)(8,pt,14,1,"div",115),t(9,"div",116)(10,"div",117),g(11,ft,6,7,"div",118),a()()()),i&2){let e=h(2);s(6),S("",e.scheduleGroups.length," time slot(s)"),s(),m("ngIf",e.timezoneAnalysis),s(),m("ngIf",e.hasImmediateSends()),s(3),m("ngForOf",e.scheduleGroups)}}function Ct(i,l){if(i&1){let e=A();t(0,"div",1)(1,"div",2)(2,"div",3),p(),t(3,"svg",4),d(4,"path",78)(5,"path",79),a()(),f(),t(6,"div",8)(7,"h3"),r(8,"Campaign Details"),a(),t(9,"p"),r(10,"Subject line and additional content"),a()(),t(11,"div",9),r(12,"Step 4"),a()(),t(13,"div",80)(14,"div",81)(15,"div",82)(16,"div",83),p(),t(17,"svg",4),d(18,"path",84),a()(),f(),t(19,"div",8)(20,"h4"),r(21,"AI Subject Line Generator"),a(),t(22,"p"),r(23,"Generate engaging subject lines for your campaign"),a()()(),t(24,"button",85),O("click",function(){T(e);let n=h();return z(n.onGenerateSubjects())}),g(25,nt,1,0,"mat-progress-spinner",86)(26,it,2,0,"svg",87),t(27,"span"),r(28),a()()(),g(29,rt,3,3,"div",88),C(30,"async"),g(31,st,4,0,"div",89),t(32,"div",90)(33,"label",91),r(34," Subject Line "),t(35,"span",92),r(36,"*"),a()(),t(37,"div",93),d(38,"input",94),t(39,"span",95),r(40),a()(),g(41,ct,2,0,"div",96),a(),g(42,_t,12,4,"div",97),a()()}if(i&2){let e=h();s(24),m("disabled",e.subjectsLoading),s(),m("ngIf",e.subjectsLoading),s(),m("ngIf",!e.subjectsLoading),s(2),M(e.subjectsLoading?"Generating...":"Generate"),s(),m("ngIf",!e.subjectsLoading&&x(30,10,e.subjects$)),s(2),m("ngIf",e.subjectsLoading),s(7),m("formControl",e.subjectControl),s(2),M(e.getSubjectCharCount()),s(),m("ngIf",e.subjectControl.touched&&e.subjectControl.invalid),s(),m("ngIf",e.scheduleGroups.length)}}function xt(i,l){i&1&&(t(0,"div",144),p(),t(1,"svg",4),d(2,"path",140),a(),f(),t(3,"div",123)(4,"strong"),r(5,"\u26A0\uFE0F No Test Emails Found"),a(),t(6,"p"),r(7,"Your uploaded file has no test emails in the "),t(8,"code"),r(9,"test_emails"),a(),r(10," column. You can still submit, but testing is highly recommended."),a()()())}function Mt(i,l){if(i&1&&(t(0,"span",153),r(1),a()),i&2){let e=l.$implicit;s(),S(" ",e," ")}}function vt(i,l){if(i&1&&(t(0,"span",154),r(1),a()),i&2){let e=h(3);s(),S(" +",e.testEmails.length-5," more ")}}function Ot(i,l){i&1&&d(0,"mat-progress-spinner",98)}function St(i,l){if(i&1&&(t(0,"div",155),p(),t(1,"svg",4),d(2,"path",48),a(),f(),t(3,"span"),r(4),a()()),i&2){let e=h(3);s(4),S("Test email sent ",e.getTestEmailsSentTime(),"")}}function Pt(i,l){if(i&1){let e=A();t(0,"div",145)(1,"div",146)(2,"div",147),r(3,"Test Recipients:"),a(),t(4,"div",148),g(5,Mt,2,1,"span",149)(6,vt,2,1,"span",150),a()(),t(7,"div",28)(8,"button",151),C(9,"async"),O("click",function(){T(e);let n=h(2);return z(n.sendTestEmail())}),t(10,"div",30),g(11,Ot,1,0,"mat-progress-spinner",86),C(12,"async"),t(13,"span"),r(14),C(15,"async"),a()()()(),g(16,St,5,1,"div",152),a()}if(i&2){let e=h(2);s(5),m("ngForOf",e.testEmails.slice(0,5)),s(),m("ngIf",e.testEmails.length>5),s(),m("matTooltip",e.getTestEmailTooltip())("matTooltipDisabled",e.canSendTest),s(),m("disabled",!e.canSendTest||x(9,8,e.testEmailLoading$)==="loading"),s(3),m("ngIf",x(12,10,e.testEmailLoading$)==="loading"),s(3),M(x(15,12,e.testEmailLoading$)==="loading"?"Sending...":"Send Test Email"),s(2),m("ngIf",e.testEmailSent)}}function wt(i,l){i&1&&(t(0,"div",145)(1,"button",156)(2,"div",30),p(),t(3,"svg",4),d(4,"path",68),a(),f(),t(5,"span"),r(6,"Test Email Unavailable"),a()()()())}function yt(i,l){if(i&1&&(t(0,"div",1)(1,"div",2)(2,"div",3),p(),t(3,"svg",4),d(4,"path",141),a()(),f(),t(5,"div",8)(6,"h3"),r(7,"Test Email"),a(),t(8,"p"),r(9),a()(),t(10,"div",9),r(11,"Step 5"),a()(),g(12,xt,11,0,"div",142)(13,Pt,17,14,"div",143)(14,wt,7,0,"div",143),a()),i&2){let e=h();s(9),S("",e.testEmails.length," test recipient(s)"),s(3),m("ngIf",e.testEmails.length===0),s(),m("ngIf",e.testEmails.length>0),s(),m("ngIf",e.testEmails.length===0)}}function Et(i,l){if(i&1&&(t(0,"li")(1,"span",162),r(2),a(),t(3,"span",163),r(4),a()()),i&2){let e=l.$implicit;le("summary-item-"+e.type),s(2),M(e.icon),s(2),M(e.text)}}function jt(i,l){if(i&1&&(t(0,"div",157)(1,"div",158),p(),t(2,"svg",4),d(3,"path",140),a(),f(),t(4,"h4"),r(5,"SUBMISSION SUMMARY:"),a()(),t(6,"ul",159),g(7,Et,5,4,"li",160),a(),t(8,"p",161)(9,"strong"),r(10,"Proceed with submission?"),a()()()),i&2){let e=h();s(7),m("ngForOf",e.getSubmissionSummary())}}function kt(i,l){i&1&&d(0,"mat-progress-spinner",164)}function It(i,l){i&1&&(t(0,"div",165)(1,"span"),r(2,"\u26A0\uFE0F No test emails available - Campaign will be submitted untested"),a()())}function Tt(i,l){i&1&&(t(0,"div",165)(1,"span"),r(2,"\u26A0\uFE0F Test email not sent - Extra confirmation will be required"),a()())}var Ve=(()=>{class i{get isAnyLoading(){return this.audiencesLoadingSubject.value==="loading"||this.uploadLoadingSubject.value==="loading"||this.reconcileLoadingSubject.value==="loading"||this.testEmailLoadingSubject.value==="loading"||this.submitLoadingSubject.value==="loading"}get canSendTest(){return this.testEmails.length>0&&this.subjectControl.valid&&this.testEmailLoadingSubject.value!=="loading"}get canSubmit(){return this.subjectControl.valid&&this.reconciliation!==null&&this.scheduleGroups.length>0&&this.submitLoadingSubject.value!=="loading"}ngOnChanges(e){e.templateId&&(this._templateId=this.templateId),e.runId&&(this._runId=this.runId),e.variantNo&&(this._variantNo=this.variantNo),e.templateHtml&&e.templateHtml.currentValue&&this._templateId&&this._runId&&this._variantNo&&this.saveCurrentState()}constructor(e,o,n){this.campaignService=e,this.cdr=o,this.snackBar=n,this.templateHtml="",this.templateId="",this.runId="",this.variantNo="",this.closeRequested=new me,this.destroy$=new $,this.qa=w(Y),this.ar=w(R),this.storageService=w(Ne),this.currentSelectedSubject=null,this.isInitialized=!1,this._templateId="",this._runId="",this._variantNo="",this.subjectControl=new te("",{nonNullable:!0,validators:[ee.required,ee.maxLength(150)]}),this.bodyAdditionControl=new te("",{nonNullable:!0}),this.audiencesLoadingSubject=new v("idle"),this.audiencesLoading$=this.audiencesLoadingSubject.asObservable(),this.uploadLoadingSubject=new v("idle"),this.uploadLoading$=this.uploadLoadingSubject.asObservable(),this.reconcileLoadingSubject=new v("idle"),this.reconcileLoading$=this.reconcileLoadingSubject.asObservable(),this.testEmailLoadingSubject=new v("idle"),this.testEmailLoading$=this.testEmailLoadingSubject.asObservable(),this.submitLoadingSubject=new v("idle"),this.submitLoading$=this.submitLoadingSubject.asObservable(),this.subjectsSubject=new v(null),this.subjects$=this.subjectsSubject.asObservable(),this.subjectsLoading=!1,this.subjectsAborted=!1,this.SUBJECTS_TIMEOUT=6e4,this.addNewMembersToAudience=!1,this.audiences=[],this.selectedAudience=null,this.masterData=[],this.reconciliation=null,this.scheduleGroups=[],this.testEmails=[],this.timezoneAnalysis=null,this.testEmailSent=!1,this.testEmailSentAt=null,this.uploadedFileName="",this.trackByIndex=c=>c}ngOnInit(){this._templateId=this.templateId||this.ar.snapshot.paramMap.get("id")||"",this._runId=this.runId||this.ar.snapshot.paramMap.get("runId")||"",this._variantNo=this.variantNo||this.ar.snapshot.paramMap.get("no")||"",this.loadSavedData(),this.loadMailchimpAudiences(),this.campaignService.audiences$.pipe(I(this.destroy$)).subscribe(e=>{this.audiences=e,this.cdr.markForCheck()}),this.campaignService.selectedAudience$.pipe(I(this.destroy$)).subscribe(e=>{e&&(this.selectedAudience=e,this.saveCurrentState()),this.cdr.markForCheck()}),this.campaignService.reconciliation$.pipe(I(this.destroy$)).subscribe(e=>{e&&(this.reconciliation=e,this.saveCurrentState()),this.cdr.markForCheck()}),this.campaignService.timezoneAnalysis$.pipe(I(this.destroy$)).subscribe(e=>{e&&(this.timezoneAnalysis=e,this.saveCurrentState()),this.cdr.markForCheck()}),this.subjectControl.valueChanges.pipe(Z(500),I(this.destroy$)).subscribe(e=>{if(!e.trim()&&this.currentSelectedSubject){let n=this.subjectsSubject.value||[];this.subjectsSubject.next([...n,this.currentSelectedSubject]),this.currentSelectedSubject=null,this.cdr.markForCheck()}this.saveCurrentState()}),this.bodyAdditionControl.valueChanges.pipe(Z(500),I(this.destroy$)).subscribe(()=>{this.saveCurrentState()}),setTimeout(()=>{this.isInitialized=!0,this.cdr.markForCheck()},100)}ngOnDestroy(){this.saveCurrentState(),this.destroy$.next(),this.destroy$.complete(),this.subjectsSub&&this.subjectsSub.unsubscribe(),this.subjectsTimeoutId&&clearTimeout(this.subjectsTimeoutId)}loadSavedData(){if(!this._templateId||!this._runId||!this._variantNo)return;let e=this.storageService.getCampaignData(this._templateId,this._runId,this._variantNo);!e||!e.savedAt||(e.subject&&this.subjectControl.setValue(e.subject,{emitEvent:!1}),e.bodyAddition&&this.bodyAdditionControl.setValue(e.bodyAddition,{emitEvent:!1}),e.selectedAudience&&(this.selectedAudience=e.selectedAudience,this.campaignService.selectAudience(e.selectedAudience)),e.masterData&&e.masterData.length>0&&(this.masterData=e.masterData,this.uploadedFileName=e.uploadedFileName||"",this.uploadLoadingSubject.next("success"),(!e.testEmails||e.testEmails.length===0)&&(this.testEmails=this.campaignService.extractTestEmails(e.masterData)),(!e.scheduleGroups||e.scheduleGroups.length===0)&&(this.scheduleGroups=this.campaignService.groupByScheduleTime(e.masterData))),e.reconciliation&&(this.reconciliation=e.reconciliation,this.reconcileLoadingSubject.next("success")),e.scheduleGroups&&e.scheduleGroups.length>0&&(this.scheduleGroups=e.scheduleGroups),e.timezoneAnalysis&&(this.timezoneAnalysis=e.timezoneAnalysis),e.testEmails&&e.testEmails.length>0&&(this.testEmails=e.testEmails),e.generatedSubjects&&e.generatedSubjects.length>0&&this.subjectsSubject.next(e.generatedSubjects),e.testEmailSent&&(this.testEmailSent=e.testEmailSent,this.testEmailSentAt=e.testEmailSentAt?new Date(e.testEmailSentAt):null),e.templateHtml&&!this.templateHtml&&(this.templateHtml=e.templateHtml),this.addNewMembersToAudience=e.addNewMembersToAudience||!1,this.cdr.markForCheck(),setTimeout(()=>{this.cdr.markForCheck()},0))}saveCurrentState(){if(!this.isInitialized||!this._templateId||!this._runId||!this._variantNo)return;let e={selectedAudience:this.selectedAudience,masterData:this.masterData,uploadedFileName:this.uploadedFileName,reconciliation:this.reconciliation,addNewMembersToAudience:this.addNewMembersToAudience,scheduleGroups:this.scheduleGroups,timezoneAnalysis:this.timezoneAnalysis,subject:this.subjectControl.value,bodyAddition:this.bodyAdditionControl.value,generatedSubjects:this.subjectsSubject.value||[],testEmails:this.testEmails,testEmailSent:this.testEmailSent,testEmailSentAt:this.testEmailSentAt?.toISOString()||null,templateHtml:this.templateHtml,templateId:this._templateId,runId:this._runId,variantNo:this._variantNo,savedAt:new Date().toISOString()};this.storageService.saveCampaignData(this._templateId,this._runId,this._variantNo,e)}clearSavedData(){!this._templateId||!this._runId||!this._variantNo||this.storageService.clearCampaignData(this._templateId,this._runId,this._variantNo)}onGenerateSubjects(){return j(this,null,function*(){let e=this.ar.snapshot.paramMap.get("id");if(!e){this.showError("Template ID not found");return}if(this.subjectsLoading)return;this.subjectsSubject.next(null),this.subjectsLoading=!0,this.subjectsAborted=!1,this.cdr.markForCheck(),this.subjectsTimeoutId=window.setTimeout(()=>{this.handleSubjectsTimeout()},this.SUBJECTS_TIMEOUT);let o=this.templateHtml||"";this.subjectsSub=this.qa.generateSubjects(e,o,!0).pipe(ae(this.SUBJECTS_TIMEOUT),oe({count:2,delay:2e3,resetOnSuccess:!0}),P(n=>{throw n.name==="TimeoutError"?new Error("Subject generation timed out. Please try again."):n})).subscribe({next:n=>{this.subjectsAborted||(this.subjectsTimeoutId&&(clearTimeout(this.subjectsTimeoutId),this.subjectsTimeoutId=void 0),this.subjectsLoading=!1,this.subjectsSubject.next(n),this.saveCurrentState(),this.showSuccess(`Generated ${n.length} subject line suggestion${n.length>1?"s":""}!`),this.cdr.markForCheck())},error:n=>{if(this.subjectsAborted)return;this.subjectsTimeoutId&&(clearTimeout(this.subjectsTimeoutId),this.subjectsTimeoutId=void 0),this.subjectsLoading=!1,this.subjectsAborted=!0,this.subjectsSubject.next(null);let c=this.getErrorMessage(n,"subject generation");this.showError(c),this.cdr.markForCheck()},complete:()=>{this.subjectsAborted||this.cdr.markForCheck()}})})}handleSubjectsTimeout(){this.subjectsLoading=!1,this.subjectsAborted=!0,this.showError("Subject generation is taking longer than expected. Please try again."),this.cdr.markForCheck()}cancelSubjects(){this.subjectsLoading&&(this.subjectsAborted=!0,this.subjectsLoading=!1,this.subjectsSub&&(this.subjectsSub.unsubscribe(),this.subjectsSub=void 0),this.subjectsTimeoutId&&(clearTimeout(this.subjectsTimeoutId),this.subjectsTimeoutId=void 0),this.showError("Subject generation cancelled."),this.cdr.markForCheck())}onSelectSubject(e){let o=this.subjectsSubject.value||[],n=this.subjectControl.value.trim();if(n===e)return;let c=o.indexOf(e);if(c===-1){console.error("\u274C Subject not found in list");return}let u=[...o];n?u[c]=n:u.splice(c,1),this.currentSelectedSubject=e,this.subjectControl.setValue(e),this.subjectsSubject.next(u),this.saveCurrentState(),this.cdr.markForCheck(),this.showSuccess("Subject line selected!")}isSubjectSelected(e){return this.subjectControl.value.trim()===e}getErrorMessage(e,o){return e?.message?.includes("timeout")||e?.name==="TimeoutError"?`${o} timed out. The server might be busy. Please try again.`:e?.status===0||e?.message?.includes("Http failure")?"Cannot connect to server. Please check if the backend is running.":e?.status===500?`Server error during ${o}. Please try again.`:e?.status===404?"Resource not found. Please refresh the page.":e?.message||`An error occurred during ${o}. Please try again.`}loadMailchimpAudiences(){return j(this,null,function*(){this.audiencesLoadingSubject.next("loading");try{yield y(this.campaignService.fetchMailchimpAudiences()),this.audiencesLoadingSubject.next("success")}catch(e){console.error("\u274C Failed to load audiences:",e),this.audiencesLoadingSubject.next("error"),this.showError("Failed to load Mailchimp audiences")}})}selectAudience(e){this.campaignService.selectAudience(e)}onFileUpload(e){return j(this,null,function*(){let o=e.target,n=o?.files?.[0];if(n){this.uploadedFileName=n.name,this.uploadLoadingSubject.next("loading");try{let c=yield y(this.campaignService.uploadMasterDocument(n));this.masterData=c,this.uploadLoadingSubject.next("success"),this.testEmails=this.campaignService.extractTestEmails(c),this.scheduleGroups=this.campaignService.groupByScheduleTime(c),this.showSuccess(`Uploaded ${c.length} rows successfully`),this.saveCurrentState(),this.selectedAudience&&(yield this.reconcileAudiences())}catch(c){console.error("\u274C Upload failed:",c),this.uploadLoadingSubject.next("error"),this.showError("Failed to upload file. Check format.")}finally{o.value=""}}})}reconcileAudiences(){return j(this,null,function*(){if(!this.selectedAudience||!this.masterData.length){this.showError("Select audience and upload file first");return}this.reconcileLoadingSubject.next("loading");try{let e=this.masterData.map(n=>n.audiences_list?.trim()).filter(Boolean),o=yield y(this.campaignService.reconcileAudiences(this.selectedAudience.id,e));this.reconciliation=o,this.reconcileLoadingSubject.next("success"),this.cdr.markForCheck(),this.saveCurrentState()}catch(e){console.error("\u274C Reconciliation failed:",e),this.reconcileLoadingSubject.next("error"),this.showError("Failed to reconcile audiences")}})}sendTestEmail(){return j(this,null,function*(){if(!this.canSendTest){this.showError("Add subject and ensure test emails exist");return}if(confirm(`Send test email to ${this.testEmails.length} recipient(s)?

${this.testEmails.slice(0,5).join(`
`)}${this.testEmails.length>5?`
...`:""}`)){this.testEmailLoadingSubject.next("loading");try{let o=this.subjectControl.value,n=this.templateHtml;this.bodyAdditionControl.value.trim()&&(n+=`

<!-- Additional Content -->
${this.bodyAdditionControl.value}`);let c=yield y(this.campaignService.sendTestEmails(this.testEmails,o,n));this.testEmailLoadingSubject.next("success"),this.testEmailSent=!0,this.testEmailSentAt=new Date,this.saveCurrentState(),c.failed.length>0?this.showError(`Sent ${c.sent}, failed ${c.failed.length}`):this.showSuccess(`Test email sent to ${c.sent} recipient(s)`)}catch(o){console.error("\u274C Test email failed:",o),this.testEmailLoadingSubject.next("error"),this.showError("Failed to send test emails")}}})}getSubmissionSummary(){if(!this.reconciliation||!this.subjectControl.valid||this.scheduleGroups.length===0)return[];let e=[],o=this.hasImmediateSends(),n=this.getImmediateSendCount(),c=this.shouldShowTimezoneWarning(),u=this.reconciliation&&this.reconciliation.summary.newCount>0;return o&&e.push({icon:"\u26A1",text:`${n} email(s) will be sent IMMEDIATELY`,type:"immediate"}),c&&e.push({icon:"\u{1F30D}",text:this.getTimezoneWarningMessage(),type:"timezone"}),u&&(this.addNewMembersToAudience?e.push({icon:"\u{1F4CB}",text:`${this.reconciliation.summary.newCount} new member(s) will be archived after sending`,type:"member"}):e.push({icon:"\u{1F4CB}",text:`${this.reconciliation.summary.newCount} new member(s) will be archived after sending`,type:"member"})),e}onSubmit(){return j(this,null,function*(){if(!this.canSubmit){this.showError("Complete all steps before submitting");return}let e=this.testEmails.length===0,o=this.reconciliation&&this.reconciliation.summary.newCount>0;if(e&&!confirm(`\u{1F6A8} CRITICAL WARNING \u{1F6A8}

\u274C NO TEST EMAILS FOUND
\u{1F534} Click OK ONLY if you accept full responsibility.`))return;let n=this.reconciliation?.summary.existingCount||0;if(confirm(`\u{1F680} Proceed with submission?

This will send to ${n} recipient(s) and cannot be undone.`)){this.submitLoadingSubject.next("loading");try{if(o&&this.selectedAudience){let L=yield y(this.campaignService.addNewMembersToAudience(this.selectedAudience.id,this.reconciliation.new))}let c=this.subjectControl.value,u=this.templateHtml;this.bodyAdditionControl.value.trim()&&(u+=`

<!-- Additional Content -->
${this.bodyAdditionControl.value}`);let b=yield y(this.campaignService.submitCampaign({subject:c,bodyAddition:this.bodyAdditionControl.value||void 0,templateHtml:u,scheduleGroups:this.scheduleGroups,testEmails:this.testEmails,timezoneAnalysis:this.timezoneAnalysis}));o&&!this.addNewMembersToAudience&&this.selectedAudience&&(yield y(this.campaignService.cleanupTempMembers(this.selectedAudience.id,this.reconciliation.new))),this.submitLoadingSubject.next("success"),this.clearSavedData();let _="";b.message&&b.message.includes("sent immediately")?_="\u26A0\uFE0F Campaign sent immediately! (Scheduling not available on your Mailchimp plan)":_=this.addNewMembersToAudience?`\u2705 Campaign submitted! ${b.campaignIds.length} campaign(s) scheduled.`:`\u2705 Campaign submitted! ${b.campaignIds.length} campaign(s) scheduled. New members will be archived.`,this.showSuccess(_)}catch(c){console.error("\u274C Submission failed:",c),this.submitLoadingSubject.next("error"),this.showError("Campaign submission failed. Please try again.")}}})}getTestEmailTooltip(){return this.testEmails.length===0?"No test emails found in uploaded file":!this.subjectControl.valid||!this.subjectControl.value.trim()?"Add subject line first":this.testEmailLoadingSubject.value==="loading"?"Sending test email...":"Send test email to recipient(s)"}hasImmediateSends(){return this.scheduleGroups.some(e=>e.isImmediate)}getImmediateSendCount(){return this.scheduleGroups.find(o=>o.isImmediate)?.count||0}getSubmitTooltip(){return!this.subjectControl.valid||!this.subjectControl.value.trim()?"Add subject line first":this.reconciliation?this.scheduleGroups.length===0?"No scheduled recipients found":this.submitLoadingSubject.value==="loading"?"Submitting campaign...":"Submit campaign to Mailchimp":"Upload and reconcile audience data first"}getTimezoneWarningMessage(){if(!this.timezoneAnalysis)return"";let e=this.timezoneAnalysis;return!e.hasTimezoneColumn||e.timezoneMode==="none"?`No timezone specified. All emails will be scheduled in your local timezone (${this.getBrowserTimezone()})`:e.timezoneMode==="single"?`All emails will be sent in timezone: ${e.uniqueTimezones[0]}`:e.timezoneMode==="multiple"?`Using per-customer timezones (${e.uniqueTimezones.length} different zones)`:e.timezoneMode==="mixed"?`${e.emptyTimezoneCount} email(s) missing timezone will use local time (${this.getBrowserTimezone()})`:""}getBrowserTimezone(){return Intl.DateTimeFormat().resolvedOptions().timeZone}shouldShowTimezoneWarning(){return this.timezoneAnalysis?!this.timezoneAnalysis.hasTimezoneColumn||this.timezoneAnalysis.timezoneMode==="none"||this.timezoneAnalysis.timezoneMode==="mixed":!1}shouldShowTimezoneInfo(){return this.timezoneAnalysis?this.timezoneAnalysis.timezoneMode==="single"||this.timezoneAnalysis.timezoneMode==="multiple":!1}showSuccess(e){this.snackBar.open(e,"Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}showError(e){this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}getSubjectCharCount(){return`${this.subjectControl.value.length}/150`}getTestEmailsSentTime(){if(!this.testEmailSentAt)return"";let o=Math.floor((new Date().getTime()-this.testEmailSentAt.getTime())/1e3/60);if(o<1)return"Just now";if(o===1)return"1 min ago";if(o<60)return`${o} mins ago`;let n=Math.floor(o/60);return n===1?"1 hour ago":`${n} hours ago`}static{this.\u0275fac=function(o){return new(o||i)(V(Ge),V(be),V(Fe))}}static{this.\u0275cmp=G({type:i,selectors:[["app-campaign-submit"]],inputs:{templateHtml:"templateHtml",templateId:"templateId",runId:"runId",variantNo:"variantNo"},outputs:{closeRequested:"closeRequested"},standalone:!0,features:[ce,H],decls:68,vars:43,consts:[[1,"campaign-submit-wrapper"],[1,"section-card"],[1,"card-header"],[1,"header-icon"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75"],[1,"header-text"],[1,"step-badge"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","audience-list",4,"ngIf"],["class","empty-state",4,"ngIf"],["d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],[1,"upload-box"],["type","file","accept",".csv,.xlsx,.xls","hidden","",3,"change","disabled"],["d","M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z"],["points","13 2 13 9 20 9"],[1,"upload-text"],[1,"primary"],["diameter","24","mode","indeterminate",4,"ngIf"],["class","upload-status",4,"ngIf"],["class","upload-error",4,"ngIf"],["class","section-card",4,"ngIf"],["class","add-members-section",4,"ngIf"],[1,"submit-section"],["class","submission-summary-banner",4,"ngIf"],["matTooltipPosition","above","matTooltipShowDelay","300",1,"button-wrapper",3,"matTooltip","matTooltipDisabled"],["mat-raised-button","",1,"submit-btn",3,"click","disabled"],[1,"button-content"],["diameter","20","mode","indeterminate",4,"ngIf"],["class","warning-banner",4,"ngIf"],[1,"loading-state"],["diameter","32","mode","indeterminate"],[1,"error-state"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["mat-button","",3,"click"],[1,"audience-list"],["class","audience-item",3,"selected","click",4,"ngFor","ngForOf"],[1,"audience-item",3,"click"],[1,"audience-info"],[1,"audience-name"],[1,"audience-count"],["class","check-icon",4,"ngIf"],[1,"check-icon"],["d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"empty-state"],["diameter","24","mode","indeterminate"],[1,"upload-status"],[1,"status-success"],[1,"status-text"],[1,"upload-error"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["class","reconcile-results",4,"ngIf"],[1,"reconcile-results"],[1,"result-grid"],[1,"result-item","existing"],[1,"result-icon"],[1,"result-content"],[1,"result-count"],[1,"result-label"],[1,"result-item","new"],["d","M12 4v16m8-8H4"],[1,"result-item","ignored"],["d","M18 6L6 18M6 6l12 12"],[1,"add-members-section"],[1,"toggle-container"],["type","checkbox","id","addNewMembers",1,"toggle-checkbox",3,"ngModelChange","ngModel"],["for","addNewMembers",1,"toggle-label"],["d","M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"],["cx","8.5","cy","7","r","4"],["x1","20","y1","8","x2","20","y2","14"],["x1","23","y1","11","x2","17","y2","11"],[1,"toggle-hint"],["d","M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"],["d","M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"subject-generator-section"],[1,"generator-header"],[1,"header-content"],[1,"icon-wrapper"],["d","M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"],[1,"generate-subjects-btn",3,"click","disabled"],["diameter","18","mode","indeterminate",4,"ngIf"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],["class","subjects-grid",4,"ngIf"],["class","subjects-loading",4,"ngIf"],[1,"input-group"],[1,"input-label"],[1,"required"],[1,"input-wrapper"],["type","text","placeholder","Enter email subject...","maxlength","150",1,"text-input",3,"formControl"],[1,"char-count"],["class","input-error",4,"ngIf"],["class","schedule-preview",4,"ngIf"],["diameter","18","mode","indeterminate"],["d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"subjects-grid"],["class","subject-chip",3,"selected","click",4,"ngFor","ngForOf","ngForTrackBy"],["class","empty-subjects",4,"ngIf"],[1,"subject-chip",3,"click"],[1,"chip-content"],[1,"chip-text"],[1,"chip-icon"],["d","M9 5l7 7-7 7"],[1,"empty-subjects"],[1,"subjects-loading"],[1,"input-error"],[1,"schedule-preview"],[1,"preview-header"],["points","12 6 12 12 16 14"],["class","timezone-info-banner",4,"ngIf"],["class","immediate-warning",4,"ngIf"],[1,"schedule-list-container"],[1,"schedule-list"],["class","schedule-item",3,"immediate","local-timezone",4,"ngFor","ngForOf"],[1,"timezone-info-banner"],["class","timezone-warning",4,"ngIf"],["class","timezone-info",4,"ngIf"],[1,"timezone-warning"],[1,"warning-content"],[1,"timezone-info"],["d","M12 16v-4m0-4h.01"],[1,"info-content"],[1,"immediate-warning"],["d","M13 2L3 14h9l-1 8 10-12h-9l1-8z"],[1,"warning-text"],[1,"schedule-item"],[1,"schedule-time"],[4,"ngIf"],[1,"schedule-count"],[1,"time-with-zone"],[1,"time"],["class","zone",4,"ngIf"],["class","zone local-indicator",4,"ngIf"],[1,"zone"],[1,"zone","local-indicator"],["d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["class","no-test-emails-warning",4,"ngIf"],["class","test-email-section",4,"ngIf"],[1,"no-test-emails-warning"],[1,"test-email-section"],[1,"test-emails-preview"],[1,"preview-label"],[1,"email-chips"],["class","email-chip",4,"ngFor","ngForOf"],["class","email-chip more",4,"ngIf"],["mat-raised-button","",1,"test-email-btn",3,"click","disabled"],["class","test-status",4,"ngIf"],[1,"email-chip"],[1,"email-chip","more"],[1,"test-status"],["mat-raised-button","","disabled","","matTooltip","No test emails found in uploaded file",1,"test-email-btn","disabled"],[1,"submission-summary-banner"],[1,"summary-header"],[1,"summary-list"],[3,"class",4,"ngFor","ngForOf"],[1,"summary-footer"],[1,"item-icon"],[1,"item-text"],["diameter","20","mode","indeterminate"],[1,"warning-banner"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p(),t(4,"svg",4),d(5,"path",5)(6,"circle",6)(7,"path",7),a()(),f(),t(8,"div",8)(9,"h3"),r(10,"Select Audience"),a(),t(11,"p"),r(12,"Choose your Mailchimp audience list"),a()(),t(13,"div",9),r(14,"Step 1"),a()(),g(15,Be,4,0,"div",10),C(16,"async"),g(17,Re,9,0,"div",11),C(18,"async"),g(19,Ye,2,1,"div",12),C(20,"async"),g(21,We,9,0,"div",13),C(22,"async"),a(),t(23,"div",1)(24,"div",2)(25,"div",3),p(),t(26,"svg",4),d(27,"path",14),a()(),f(),t(28,"div",8)(29,"h3"),r(30,"Upload Master Document"),a(),t(31,"p"),r(32,"CSV/Excel with: audiences_list, scheduled_time, test_emails, and timezones"),a()(),t(33,"div",9),r(34,"Step 2"),a()(),t(35,"label",15)(36,"input",16),O("change",function(u){return n.onFileUpload(u)}),a(),p(),t(37,"svg",4),d(38,"path",17)(39,"polyline",18),a(),f(),t(40,"div",19)(41,"span",20),r(42),a(),t(43,"small"),r(44,"Supports CSV, Excel (.xlsx, .xls)"),a()(),g(45,Ke,1,0,"mat-progress-spinner",21),C(46,"async"),a(),g(47,Je,10,5,"div",22),C(48,"async"),g(49,Ze,7,0,"div",23),C(50,"async"),a(),g(51,et,16,6,"div",24)(52,tt,13,1,"div",25)(53,Ct,43,12,"div",24)(54,yt,15,4,"div",24),t(55,"div",26),g(56,jt,11,1,"div",27),t(57,"div",28)(58,"button",29),C(59,"async"),O("click",function(){return n.onSubmit()}),t(60,"div",30),g(61,kt,1,0,"mat-progress-spinner",31),C(62,"async"),t(63,"span"),r(64),C(65,"async"),a()()()(),g(66,It,3,0,"div",32)(67,Tt,3,0,"div",32),a()()),o&2&&(s(15),m("ngIf",x(16,23,n.audiencesLoading$)==="loading"),s(2),m("ngIf",x(18,25,n.audiencesLoading$)==="error"),s(2),m("ngIf",x(20,27,n.audiencesLoading$)==="success"&&n.audiences.length),s(2),m("ngIf",x(22,29,n.audiencesLoading$)==="success"&&!n.audiences.length),s(14),D("disabled",!n.selectedAudience),s(),m("disabled",!n.selectedAudience),s(6),M(n.uploadedFileName||"Click to upload"),s(3),m("ngIf",x(46,31,n.uploadLoading$)==="loading"),s(2),m("ngIf",x(48,33,n.uploadLoading$)==="success"&&n.masterData.length),s(2),m("ngIf",x(50,35,n.uploadLoading$)==="error"),s(2),m("ngIf",n.reconciliation),s(),m("ngIf",n.reconciliation&&n.reconciliation.summary.newCount>0),s(),m("ngIf",n.masterData.length),s(),m("ngIf",n.masterData.length),s(2),m("ngIf",n.getSubmissionSummary().length>0),s(),m("matTooltip",n.getSubmitTooltip())("matTooltipDisabled",n.canSubmit),s(),m("disabled",!n.canSubmit||x(59,37,n.submitLoading$)==="loading"),s(3),m("ngIf",x(62,39,n.submitLoading$)==="loading"),s(3),M(x(65,41,n.submitLoading$)==="loading"?"Submitting...":"Submit Campaign"),s(2),m("ngIf",n.testEmails.length===0&&n.masterData.length>0),s(),m("ngIf",!n.testEmailSent&&n.testEmails.length>0))},dependencies:[B,_e,Ce,xe,ve,Me,Te,we,Pe,ye,ke,je,Ie,Ee,U,ze,q,Le,Ae,$e,De],styles:['.campaign-submit-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem;max-height:calc(85vh - 180px);overflow-y:auto;overflow-x:hidden}.campaign-submit-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.campaign-submit-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d}.campaign-submit-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.campaign-submit-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media (max-width: 768px){.campaign-submit-wrapper[_ngcontent-%COMP%]{padding:1.25rem;gap:1rem}}.section-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px #0000001a;transition:box-shadow .2s ease}.section-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #0000001f}@media (max-width: 768px){.section-card[_ngcontent-%COMP%]{padding:1.25rem}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.25rem;padding-bottom:1rem;border-bottom:1px solid #e5e7eb}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:40px;height:40px;background:#f3f4f6;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#6b7280}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{flex:1}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:#111827;line-height:1.3}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.875rem;color:#6b7280;line-height:1.4}.card-header[_ngcontent-%COMP%]   .step-badge[_ngcontent-%COMP%]{padding:.375rem .875rem;background:#f3f4f6;border-radius:6px;font-size:.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:.05em}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2.5rem 1.5rem;gap:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#6b7280}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem 1.5rem;gap:1rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px}.error-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#ef4444}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#991b1b;text-align:center}.audience-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;max-height:400px;overflow-y:auto;padding-right:.5rem}.audience-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.audience-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:3px}.audience-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6d28d94d;border-radius:3px}.audience-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6d28d980}.audience-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem;background:#f9fafb;border:2px solid transparent;border-radius:8px;cursor:pointer;transition:all .2s ease}.audience-item[_ngcontent-%COMP%]:hover{background:#f3f4f6;border-color:#d1d5db}.audience-item.selected[_ngcontent-%COMP%]{background:#ecfdf5;border-color:#10b981}.audience-item.selected[_ngcontent-%COMP%]   .audience-name[_ngcontent-%COMP%]{color:#059669;font-weight:600}.audience-item[_ngcontent-%COMP%]   .audience-info[_ngcontent-%COMP%]{flex:1}.audience-item[_ngcontent-%COMP%]   .audience-name[_ngcontent-%COMP%]{font-size:.9375rem;font-weight:500;color:#111827;margin-bottom:.25rem}.audience-item[_ngcontent-%COMP%]   .audience-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280}.audience-item[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{width:20px;height:20px}.audience-item[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;color:#10b981}.upload-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2.5rem 2rem;background:#f9fafb;border:2px dashed #d1d5db;border-radius:8px;cursor:pointer;transition:all .2s ease;gap:1rem}.upload-box[_ngcontent-%COMP%]:hover:not(.disabled){background:#f3f4f6;border-color:#9ca3af}.upload-box.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}.upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#9ca3af}.upload-box[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{text-align:center}.upload-box[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{display:block;font-size:.9375rem;font-weight:500;color:#111827;margin-bottom:.25rem}.upload-box[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280}.upload-status[_ngcontent-%COMP%]{margin-top:1rem}.status-success[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:#ecfdf5;border:1px solid #a7f3d0;border-radius:8px}.status-success[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#10b981;flex-shrink:0}.status-success[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]{flex:1}.status-success[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#065f46;margin-bottom:.25rem}.status-success[_ngcontent-%COMP%]   .status-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8125rem;color:#047857}.upload-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px}.upload-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#ef4444}.upload-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#991b1b}.reconcile-results[_ngcontent-%COMP%]{margin-top:1rem}.result-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.result-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.result-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.25rem;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px}.result-item.existing[_ngcontent-%COMP%]{background:#ecfdf5;border-color:#a7f3d0}.result-item.new[_ngcontent-%COMP%]{background:#eff6ff;border-color:#bfdbfe}.result-item.ignored[_ngcontent-%COMP%]{background:#fef3c7;border-color:#fde68a}.result-item[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.result-item[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.result-item.existing[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{background:#d1fae5}.result-item.existing[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#10b981}.result-item.new[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{background:#dbeafe}.result-item.new[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#3b82f6}.result-item.ignored[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]{background:#fef3c7}.result-item.ignored[_ngcontent-%COMP%]   .result-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#f59e0b}.result-item[_ngcontent-%COMP%]   .result-content[_ngcontent-%COMP%]{flex:1}.result-item[_ngcontent-%COMP%]   .result-count[_ngcontent-%COMP%]{font-size:1.375rem;font-weight:700;color:#111827;line-height:1}.result-item[_ngcontent-%COMP%]   .result-label[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;margin-top:.25rem}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.input-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#374151;display:block;margin-bottom:.25rem}.input-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.text-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 3rem .75rem 1rem;background:#fff;border:1px solid #d1d5db;border-radius:6px;font-size:.9375rem;color:#111827;outline:none;transition:all .2s ease}.text-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.text-input[_ngcontent-%COMP%]:focus{border-color:#8b5cf6;box-shadow:0 0 0 3px #8b5cf61a}.char-count[_ngcontent-%COMP%]{position:absolute;right:1rem;font-size:.75rem;color:#9ca3af;pointer-events:none}.input-hint[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280;margin-top:.25rem}.input-error[_ngcontent-%COMP%]{font-size:.8125rem;color:#ef4444;margin-top:.25rem}.schedule-preview[_ngcontent-%COMP%]{padding:1.25rem;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px}.preview-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem}.preview-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#6b7280}.preview-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:#374151}.schedule-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.625rem}.schedule-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.625rem 1rem;background:#fff;border:1px solid #e5e7eb;border-radius:6px}.schedule-item[_ngcontent-%COMP%]   .schedule-time[_ngcontent-%COMP%]{font-size:.8125rem;color:#111827;font-weight:500}.schedule-item[_ngcontent-%COMP%]   .schedule-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#6b7280}.schedule-more[_ngcontent-%COMP%]{padding:.5rem;text-align:center;font-size:.8125rem;color:#6b7280;font-style:italic}.test-email-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.test-emails-preview[_ngcontent-%COMP%]{padding:1rem;background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;max-height:300px;overflow-y:auto}.test-emails-preview[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.test-emails-preview[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0000000d;border-radius:3px}.test-emails-preview[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#6d28d94d;border-radius:3px}.test-emails-preview[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6d28d980}.test-emails-preview[_ngcontent-%COMP%]   .preview-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.75rem;position:sticky;top:0;background:#f9fafb;z-index:1;padding-bottom:.5rem}.email-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.email-chip[_ngcontent-%COMP%]{padding:.375rem .75rem;background:#fff;border:1px solid #e5e7eb;border-radius:6px;font-size:.8125rem;color:#374151;font-weight:500}.email-chip.more[_ngcontent-%COMP%]{font-style:italic;color:#6b7280}.test-email-btn[_ngcontent-%COMP%]{width:100%;background:#3b82f6!important;color:#fff!important;border:none!important;font-weight:600!important;padding:.875rem 1.5rem!important;border-radius:8px!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all .2s ease!important;box-shadow:0 2px 4px #3b82f633!important}.test-email-btn[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;gap:.625rem!important;width:100%}.test-email-btn[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;width:100%}.test-email-btn[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{flex-shrink:0}.test-email-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}.test-email-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}.test-email-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb!important;box-shadow:0 4px 8px #3b82f640!important;transform:translateY(-1px)}.test-email-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.test-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.625rem;padding:.75rem 1rem;background:#ecfdf5;border:1px solid #a7f3d0;border-radius:6px}.test-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#10b981}.test-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8125rem;color:#065f46;font-weight:500}.submit-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.submission-summary-banner[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fef3c7,#fde68a);border:2px solid #fbbf24;border-radius:12px;padding:1.5rem;box-shadow:0 4px 12px #fbbf2433}.submission-summary-banner[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid rgba(146,64,14,.2)}.submission-summary-banner[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#f59e0b;flex-shrink:0}.submission-summary-banner[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:700;color:#92400e;letter-spacing:.025em}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.75rem}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:.75rem;background:#fff9;border-radius:8px;transition:all .2s ease}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#ffffffe6;transform:translate(4px)}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:1.25rem;flex-shrink:0;line-height:1}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{flex:1;font-size:.9375rem;color:#78350f;line-height:1.5;font-weight:500}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li.summary-item-immediate[_ngcontent-%COMP%]{border-left:3px solid #ef4444}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li.summary-item-timezone[_ngcontent-%COMP%]{border-left:3px solid #3b82f6}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li.summary-item-member[_ngcontent-%COMP%]{border-left:3px solid #8b5cf6}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li.summary-item-warning[_ngcontent-%COMP%]{border-left:3px solid #f59e0b}.submission-summary-banner[_ngcontent-%COMP%]   .summary-footer[_ngcontent-%COMP%]{margin:1rem 0 0;padding-top:1rem;border-top:1px solid rgba(146,64,14,.2);text-align:center;font-size:1rem;color:#92400e}.submission-summary-banner[_ngcontent-%COMP%]   .summary-footer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}@media (max-width: 768px){.submission-summary-banner[_ngcontent-%COMP%]{padding:1.25rem}.submission-summary-banner[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.submission-summary-banner[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9375rem}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.625rem}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{font-size:1.125rem}.submission-summary-banner[_ngcontent-%COMP%]   .summary-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-text[_ngcontent-%COMP%]{font-size:.875rem}.submission-summary-banner[_ngcontent-%COMP%]   .summary-footer[_ngcontent-%COMP%]{font-size:.9375rem}}.submit-btn[_ngcontent-%COMP%]{width:100%;background:#8b5cf6!important;color:#fff!important;border:none!important;font-weight:700!important;font-size:1rem!important;padding:1rem 2rem!important;border-radius:8px!important;display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;gap:.75rem!important;box-shadow:0 4px 12px #8b5cf64d!important;transition:all .2s ease!important}.submit-btn[_ngcontent-%COMP%]   .button-content[_ngcontent-%COMP%]{display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;gap:.75rem!important;width:100%}.submit-btn[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;gap:.75rem!important;width:100%}.submit-btn[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{flex-shrink:0}.submit-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}.submit-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#7c3aed!important;box-shadow:0 6px 16px #8b5cf666!important;transform:translateY(-2px)}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 768px){.submit-btn[_ngcontent-%COMP%]{padding:.875rem 1.5rem!important;font-size:.9375rem!important}}.warning-banner[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:.75rem;padding:1rem;background:#fef3c7;border:1px solid #fde68a;border-radius:8px;text-align:center}.warning-banner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#f59e0b;flex-shrink:0;min-width:20px}.warning-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:#92400e;flex:1;line-height:1.4}@media (max-width: 768px){.warning-banner[_ngcontent-%COMP%]{padding:.625rem .875rem;gap:.625rem}.warning-banner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;min-width:18px}.warning-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8125rem}}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2.5rem 2rem;color:#9ca3af}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;font-weight:500;color:#6b7280}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.5rem;font-size:.8125rem;color:#9ca3af}.timezone-info-banner[_ngcontent-%COMP%]{margin-bottom:1rem}.timezone-warning[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.75rem;padding:.875rem 1rem;background:#fbbf241a;border:1px solid rgba(251,191,36,.3);border-radius:8px}.timezone-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#f59e0b;flex-shrink:0;min-width:20px;margin-top:2px}.timezone-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]{flex:1}.timezone-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.9rem;font-weight:700;margin-bottom:.25rem}.timezone-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;line-height:1.4}.timezone-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:.75rem;padding:.875rem 1rem;background:#3b82f61a;border:1px solid rgba(59,130,246,.3);border-radius:8px}.timezone-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#3b82f6;flex-shrink:0;min-width:20px;margin-top:2px}.timezone-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{flex:1}.timezone-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#393f52!important;font-size:.9rem;font-weight:700;margin-bottom:.25rem}.timezone-info[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#393f52!important;line-height:1.4}.immediate-warning[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:.875rem 1rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;margin-bottom:1rem}.immediate-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#dc2626;flex-shrink:0;margin-top:2px}.immediate-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{flex:1}.immediate-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#991b1b;font-size:.9rem;margin-bottom:.25rem;font-weight:600}.immediate-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#7f1d1d!important;line-height:1.4}.immediate-warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:inline;color:#fca5a5!important}.schedule-item.immediate[_ngcontent-%COMP%]{background:#ef44441a;border-left:3px solid #ef4444}.schedule-item.immediate[_ngcontent-%COMP%]   .schedule-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#f87171}.schedule-item.immediate[_ngcontent-%COMP%]   .schedule-time[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.schedule-item.local-timezone[_ngcontent-%COMP%]{border-left:3px solid #f59e0b}.time-with-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.time-with-zone[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem}.time-with-zone[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.35rem;font-size:.75rem;color:#fff9}.time-with-zone[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.time-with-zone[_ngcontent-%COMP%]   .zone.local-indicator[_ngcontent-%COMP%]{color:#fbbf24;font-weight:500}@media (max-width: 768px){.timezone-warning[_ngcontent-%COMP%], .timezone-info[_ngcontent-%COMP%], .immediate-warning[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.timezone-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .timezone-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .immediate-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:0}.time-with-zone[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{font-size:.7rem}}.schedule-list-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border-radius:8px;border:1px solid rgba(255,255,255,.1)}.schedule-list-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.schedule-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0003;border-radius:4px}.schedule-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#a855f780;border-radius:4px}.schedule-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a855f7b3}.schedule-list[_ngcontent-%COMP%]{padding:.5rem}.no-test-emails-warning[_ngcontent-%COMP%]{display:flex;gap:.75rem;padding:1rem;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;margin-bottom:1rem}.no-test-emails-warning[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#dc2626;flex-shrink:0;margin-top:2px}.no-test-emails-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]{flex:1}.no-test-emails-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:#991b1b;font-size:.95rem;margin-bottom:.5rem;font-weight:600}.no-test-emails-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#7f1d1d;line-height:1.5}.no-test-emails-warning[_ngcontent-%COMP%]   .warning-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#fee2e2;padding:.125rem .375rem;border-radius:4px;font-family:Courier New,monospace;font-size:.85em;color:#991b1b;color:#fbbf24}.test-email-btn.disabled[_ngcontent-%COMP%], .test-email-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background:#6464644d!important}.test-email-btn.disabled[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .test-email-btn[_ngcontent-%COMP%]:disabled   svg[_ngcontent-%COMP%]{opacity:.5}.add-members-section[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;background:#3b82f61a;border:1px solid rgba(59,130,246,.3);border-radius:8px}.toggle-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.toggle-checkbox[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;accent-color:#3b82f6}.toggle-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;font-size:.95rem;color:#ffffffe6;-webkit-user-select:none;user-select:none}.toggle-label[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#60a5fa}.toggle-label[_ngcontent-%COMP%]:hover{color:#fff}.toggle-hint[_ngcontent-%COMP%]{display:block;margin-top:.5rem;margin-left:2.25rem;font-size:.8rem;color:#fff9;font-style:italic}.warning-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;margin-top:.75rem;background:#fbbf241a;border:1px solid rgba(251,191,36,.3);border-radius:6px}.warning-banner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;color:#fbbf24;flex-shrink:0}.warning-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.875rem;color:#fbbf24;font-weight:500}.button-wrapper[_ngcontent-%COMP%]{display:inline-block;width:100%}.subject-generator-section[_ngcontent-%COMP%]{padding:1.5rem;background:linear-gradient(135deg,#8b5cf614,#ec489914);border:1px solid rgba(139,92,246,.2);border-radius:12px;position:relative;overflow:hidden}.subject-generator-section[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#8b5cf6,#ec4899);border-radius:3px 3px 0 0}@media (max-width: 768px){.subject-generator-section[_ngcontent-%COMP%]{padding:1.25rem;margin-bottom:1.25rem}}@media (max-width: 480px){.subject-generator-section[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}}.generator-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1.5rem;margin-bottom:1.25rem;flex-wrap:wrap}@media (max-width: 768px){.generator-header[_ngcontent-%COMP%]{gap:1rem;margin-bottom:1rem}}.generator-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}@media (max-width: 480px){.generator-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{gap:.75rem}}.generator-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:44px;height:44px;background:linear-gradient(135deg,#8b5cf6,#ec4899);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 4px 12px #8b5cf640}@media (max-width: 768px){.generator-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:36px;height:36px}}.generator-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;color:#fff}@media (max-width: 768px){.generator-header[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}}.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{flex:1;min-width:0}.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:700;color:#1f2937}@media (max-width: 768px){.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9375rem}}@media (max-width: 480px){.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.875rem}}.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8125rem;color:#6b7280}@media (max-width: 768px){.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.generator-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6875rem}}.generate-subjects-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#ec4899)!important;color:#fff!important;border:none!important;border-radius:8px!important;font-weight:600!important;font-size:.875rem!important;padding:.625rem 1.25rem!important;box-shadow:0 4px 12px #8b5cf640!important;display:inline-flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;gap:.5rem!important;transition:all .2s ease!important;min-height:40px!important;white-space:nowrap!important;flex-shrink:0;cursor:pointer}@media (max-width: 768px){.generate-subjects-btn[_ngcontent-%COMP%]{font-size:.8125rem!important;padding:.5rem 1rem!important;min-height:36px!important}}@media (max-width: 480px){.generate-subjects-btn[_ngcontent-%COMP%]{font-size:.75rem!important;padding:.5rem .875rem!important;width:100%;justify-content:center!important}}.generate-subjects-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}@media (max-width: 768px){.generate-subjects-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}.generate-subjects-btn[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]     circle{stroke:#fff!important}.generate-subjects-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #8b5cf659!important}.generate-subjects-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.generate-subjects-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none!important}.subjects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:.875rem}@media (max-width: 768px){.subjects-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.625rem}}.subject-chip[_ngcontent-%COMP%]{background:#fff;border:2px solid rgba(139,92,246,.15);border-radius:10px;padding:.875rem 1rem;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.875rem}@media (max-width: 768px){.subject-chip[_ngcontent-%COMP%]{padding:.75rem .875rem}}.subject-chip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:linear-gradient(135deg,#8b5cf6,#ec4899);opacity:0;transition:opacity .2s ease}.subject-chip[_ngcontent-%COMP%]:hover{border-color:#8b5cf666;box-shadow:0 4px 16px #8b5cf626;transform:translateY(-2px) scale(1.01)}.subject-chip[_ngcontent-%COMP%]:hover:before{opacity:1}.subject-chip[_ngcontent-%COMP%]:hover   .chip-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:translate(3px)}.subject-chip[_ngcontent-%COMP%]:active{transform:translateY(-1px) scale(1)}.subject-chip.selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf61a,#ec48991a);border-color:#8b5cf680}.subject-chip.selected[_ngcontent-%COMP%]:before{opacity:1}.subject-chip.selected[_ngcontent-%COMP%]   .chip-text[_ngcontent-%COMP%]{font-weight:600;color:#8b5cf6}.subject-chip.selected[_ngcontent-%COMP%]   .chip-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#8b5cf6}.chip-content[_ngcontent-%COMP%]{flex:1;min-width:0;display:flex;flex-direction:column;gap:.25rem}.chip-text[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#1f2937;line-height:1.4;word-break:break-word}@media (max-width: 768px){.chip-text[_ngcontent-%COMP%]{font-size:.8125rem}}.chip-length[_ngcontent-%COMP%]{font-size:.6875rem;color:#9ca3af;font-weight:600;font-family:SF Mono,Monaco,Cascadia Code,monospace}@media (max-width: 768px){.chip-length[_ngcontent-%COMP%]{font-size:.625rem}}.chip-icon[_ngcontent-%COMP%]{flex-shrink:0;width:28px;height:28px;background:#8b5cf614;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}@media (max-width: 768px){.chip-icon[_ngcontent-%COMP%]{width:24px;height:24px}}.chip-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:#9ca3af;transition:all .2s ease}@media (max-width: 768px){.chip-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}}.empty-subjects[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2.5rem 1rem;gap:.875rem}@media (max-width: 768px){.empty-subjects[_ngcontent-%COMP%]{padding:2rem 1rem}}.empty-subjects[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:56px;height:56px;color:#d1d5db}@media (max-width: 768px){.empty-subjects[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:44px;height:44px}}.empty-subjects[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#9ca3af;text-align:center}@media (max-width: 768px){.empty-subjects[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}}@media (max-width: 480px){.generator-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.generator-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%], .generator-header[_ngcontent-%COMP%]   .generate-subjects-btn[_ngcontent-%COMP%]{width:100%}.subjects-grid[_ngcontent-%COMP%]{gap:.5rem}}.subjects-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;gap:1rem}.subjects-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0}'],changeDetection:0})}}return i})();var Cn=(()=>{class i{constructor(){this.route=w(R),this.router=w(Se),this.location=w(fe),this.qa=w(Y),this.destroy$=new $,this.templateHtml="",this.templateId="",this.runId="",this.no=""}ngOnInit(){this.templateId=this.route.snapshot.paramMap.get("id")||"",this.runId=this.route.snapshot.paramMap.get("runId")||"",this.no=this.route.snapshot.paramMap.get("no")||"";let o=this.router.getCurrentNavigation()?.extras?.state||history.state;o?.templateHtml?this.templateHtml=o.templateHtml:this.loadTemplateHtml()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadTemplateHtml(){if(!this.runId||!this.no){console.error("\u274C Missing runId or variant number",{runId:this.runId,no:this.no});return}this.qa.getVariantsRunById(this.runId).then(e=>{if(e&&e.items&&e.items.length>0){let o=parseInt(this.no)-1;o>=0&&o<e.items.length?this.templateHtml=e.items[o].html:console.error("\u274C Variant index out of bounds",{variantIndex:o,maxIndex:e.items.length-1})}else console.error("\u274C No variant items found in run",{run:e})}).catch(e=>{console.error("\u274C Failed to load variant:",e)})}goBack(){this.location.back()}onCampaignClose(){this.router.navigate(["/qa",this.templateId,"use",this.runId,this.no])}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=G({type:i,selectors:[["app-campaign-setup-page"]],standalone:!0,features:[H],decls:14,vars:4,consts:[[1,"campaign-page"],[1,"campaign-header"],[1,"header-wrapper"],["aria-label","Go back",1,"back-btn",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5"],["d","M19 12H5M12 19l-7-7 7-7"],[1,"header-title"],[1,"campaign-main"],[1,"campaign-container"],[3,"closeRequested","templateHtml","templateId","runId","variantNo"]],template:function(o,n){o&1&&(t(0,"div",0)(1,"header",1)(2,"div",2)(3,"button",3),O("click",function(){return n.goBack()}),p(),t(4,"svg",4),d(5,"path",5),a()(),f(),t(6,"div",6)(7,"h1"),r(8,"Campaign Setup"),a(),t(9,"p"),r(10,"Configure and schedule your email campaign"),a()()()(),t(11,"main",7)(12,"div",8)(13,"app-campaign-submit",9),O("closeRequested",function(){return n.onCampaignClose()}),a()()()()),o&2&&(s(13),m("templateHtml",n.templateHtml)("templateId",n.templateId)("runId",n.runId)("variantNo",n.no))},dependencies:[B,U,q,Ve],styles:[".campaign-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);position:relative}.campaign-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000;background:#fffffffa;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 1px 3px #0000001a;border-bottom:1px solid rgba(102,126,234,.15)}.header-wrapper[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:1.25rem 2rem;display:flex;align-items:center;gap:1.25rem}@media (max-width: 768px){.header-wrapper[_ngcontent-%COMP%]{padding:1rem 1.5rem;gap:1rem}}@media (max-width: 480px){.header-wrapper[_ngcontent-%COMP%]{padding:.875rem 1rem;gap:.875rem}}.back-btn[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,#667eea,#764ba2);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;flex-shrink:0;box-shadow:0 2px 8px #667eea4d}.back-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#fff}.back-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #667eea66}.back-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}@media (max-width: 768px){.back-btn[_ngcontent-%COMP%]{width:38px;height:38px}}.header-title[_ngcontent-%COMP%]{flex:1}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1.2}@media (max-width: 768px){.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem}}.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.9375rem;color:#64748b;font-weight:400}@media (max-width: 768px){.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}@media (max-width: 480px){.header-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}}.campaign-main[_ngcontent-%COMP%]{padding:2.5rem 2rem}@media (max-width: 768px){.campaign-main[_ngcontent-%COMP%]{padding:2rem 1.5rem}}@media (max-width: 480px){.campaign-main[_ngcontent-%COMP%]{padding:1.5rem 1rem}}@media (max-height: 600px) and (orientation: landscape){.campaign-main[_ngcontent-%COMP%]{padding:1.5rem 1rem}}.campaign-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto}  app-campaign-submit{display:block}  app-campaign-submit .campaign-submit-wrapper{padding:0!important;max-height:none!important;overflow:visible!important;gap:2rem!important}@media (max-width: 768px){  app-campaign-submit .campaign-submit-wrapper{gap:1.5rem!important}}  app-campaign-submit .section-card{background:#fffffff7!important;-webkit-backdrop-filter:blur(20px)!important;backdrop-filter:blur(20px)!important;border-radius:20px!important;padding:2.5rem!important;margin-bottom:2rem!important;border:1px solid rgba(255,255,255,.3)!important;box-shadow:0 10px 40px #00000014,0 2px 8px #0000000a!important;transition:all .3s cubic-bezier(.4,0,.2,1)!important}  app-campaign-submit .section-card:hover{transform:translateY(-2px);box-shadow:0 20px 50px #0000001a,0 4px 12px #0000000f!important}  app-campaign-submit .section-card:last-child{margin-bottom:0!important}@media (max-width: 768px){  app-campaign-submit .section-card{padding:2rem!important;border-radius:16px!important;margin-bottom:1.5rem!important}}@media (max-width: 480px){  app-campaign-submit .section-card{padding:1.5rem!important;border-radius:14px!important}}  app-campaign-submit .card-header{border-bottom:1px solid rgba(102,126,234,.1)!important}  app-campaign-submit .card-header h3{color:#1a202c!important;font-weight:600!important}  app-campaign-submit .card-header .header-icon{background:linear-gradient(135deg,#667eea1a,#764ba21a)!important}  app-campaign-submit .card-header .header-icon svg{color:#667eea!important}  app-campaign-submit input,   app-campaign-submit textarea,   app-campaign-submit select{border-color:#667eea33!important;transition:all .2s ease!important}  app-campaign-submit input:focus,   app-campaign-submit textarea:focus,   app-campaign-submit select:focus{border-color:#667eea!important;box-shadow:0 0 0 3px #667eea1a!important;outline:none!important}  app-campaign-submit button{transition:all .2s ease!important}  app-campaign-submit button:hover:not(:disabled){transform:translateY(-1px)}  app-campaign-submit button:active:not(:disabled){transform:translateY(0)}  app-campaign-submit .spinner-container{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffffe6}@media (min-width: 769px) and (max-width: 1024px){.campaign-main[_ngcontent-%COMP%]{padding:2rem 1.5rem}}@media (max-height: 600px) and (orientation: landscape){.campaign-header[_ngcontent-%COMP%]{position:relative}.header-wrapper[_ngcontent-%COMP%]{padding:.75rem 1rem}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.125rem}.campaign-main[_ngcontent-%COMP%]{padding:1rem}  app-campaign-submit .section-card{padding:1.25rem!important;margin-bottom:1rem!important}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation:none!important;transition:none!important}}@media (prefers-contrast: high){.campaign-header[_ngcontent-%COMP%]{border-bottom:2px solid #667eea}  app-campaign-submit .section-card{border:2px solid rgba(102,126,234,.5)!important}}@media print{.campaign-header[_ngcontent-%COMP%]{position:static;box-shadow:none}.back-btn[_ngcontent-%COMP%]{display:none}  app-campaign-submit .section-card{box-shadow:none!important;page-break-inside:avoid}}"]})}}return i})();export{Cn as CampaignSetupPageComponent};
