import{$ as b,Ab as E,Ca as a,Da as s,Ea as y,Hb as k,Ia as h,Ka as g,La as o,P as _,S as v,Sa as S,T as c,U as m,ab as I,ca as d,ga as f,ha as x,jb as P,ra as C,sa as p,ta as u,ub as D}from"./chunk-D537H2LC.js";function H(r,w){r&1&&y(0,"div",4)}function M(r,w){if(r&1){let e=h();a(0,"iframe",5),g("load",function(){c(e);let i=o();return m(i.onIframeLoad())}),s()}if(r&2){let e=o();p("srcdoc",e.safeSrcdoc,d)}}function O(r,w){if(r&1){let e=h();a(0,"iframe",6),g("load",function(){c(e);let i=o();return m(i.onIframeLoad())}),s()}if(r&2){let e=o();p("srcdoc",e.safeSrcdoc,d)}}var j=(()=>{class r{constructor(e){this.s=e,this.html="",this.loading=!1,this.allowScripts=!1,this.iframeLoaded=new b,this.safeSrcdoc=null}ngOnChanges(){this.loading=!!this.html;let e=this.ensureDoc(this.html||""),t=this.stripDangerousBits(e);this.safeSrcdoc=this.s.bypassSecurityTrustHtml(t)}onIframeLoad(){this.loading=!1,this.iframeLoaded.emit()}ensureDoc(e){let t=String(e||"");return/<body[\s>]/i.test(t)||/<\/html>/i.test(t)?t:'<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"></head><body>'+t+"</body></html>"}stripDangerousBits(e){try{let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll("script, iframe, base").forEach(i=>i.remove()),t.querySelectorAll("*").forEach(i=>{for(let n=i.attributes.length-1;n>=0;n--){let l=i.attributes.item(n);l&&/^on/i.test(l.name)&&i.removeAttribute(l.name)}}),`<!doctype html>
`+t.documentElement.outerHTML}catch{return e.replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<base[\s\S]*?>/gi,"").replace(/<iframe[\s\S]*?<\/iframe>/gi,"")}}static{this.\u0275fac=function(t){return new(t||r)(x(k))}}static{this.\u0275cmp=_({type:r,selectors:[["app-html-preview"]],inputs:{html:"html",loading:"loading",allowScripts:"allowScripts"},outputs:{iframeLoaded:"iframeLoaded"},standalone:!0,features:[v,I],decls:5,vars:3,consts:[["safeIframe",""],[1,"preview-wrap"],["class","skeleton-cover","aria-hidden","true",4,"ngIf"],["class","preview-frame","sandbox","allow-same-origin allow-scripts","referrerpolicy","no-referrer",3,"load",4,"ngIf","ngIfElse"],["aria-hidden","true",1,"skeleton-cover"],["sandbox","allow-same-origin allow-scripts","referrerpolicy","no-referrer",1,"preview-frame",3,"load"],["sandbox","allow-same-origin","referrerpolicy","no-referrer",1,"preview-frame",3,"load"]],template:function(t,i){if(t&1&&(a(0,"div",1),C(1,H,1,0,"div",2)(2,M,1,1,"iframe",3)(3,O,1,1,"ng-template",null,0,P),s()),t&2){let n=S(4);f(),u("ngIf",i.loading),f(),u("ngIf",i.allowScripts)("ngIfElse",n)}},dependencies:[E,D],styles:[".preview-wrap[_ngcontent-%COMP%]{position:relative;border-radius:.5rem;overflow:hidden}.preview-frame[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 180px);min-height:480px;border:1px solid rgba(0,0,0,.1);border-radius:.5rem;background:#fff;display:block}.skeleton-cover[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:10;pointer-events:none;background:linear-gradient(90deg,#eeeeeef2 25%,#fafafaf2,#eeeeeef2 75%);background-size:400% 100%;animation:_ngcontent-%COMP%_shimmer 1.2s infinite linear}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}"],changeDetection:0})}}return r})();export{j as a};
