import{a as se,b as le}from"./chunk-GAP5NISV.js";import{a as ce}from"./chunk-M524VR4G.js";import{a as xt,b as bt}from"./chunk-HMC4AX2S.js";import{$b as ne,A as et,Aa as r,Ba as s,Ca as b,Da as T,Ea as I,Eb as Wt,Ga as L,Gb as Qt,Hc as pt,Ia as O,Ic as mt,Ja as C,Jc as gt,Kc as ht,Lc as ft,M as H,Mb as Jt,Mc as ut,Na as it,Nb as Tt,Nc as _t,O as nt,Oa as at,Pa as ot,Pb as dt,Qa as K,R as $t,Ra as p,Rb as It,S as y,Sa as R,T as w,Ta as B,U as k,Ua as Ht,V,Va as Dt,Wa as qt,Wb as Xt,Xa as Kt,Yb as Zt,Za as rt,Zb as te,_ as St,_a as Nt,_b as ee,bc as ie,ca as Y,cc as ae,cd as Ct,d as A,da as Bt,db as h,dd as oe,ea as At,eb as f,fa as l,fd as re,gb as Et,ib as st,k as N,m as G,n as kt,pb as Gt,qa as x,qb as ct,sa as m,sb as Yt,ta as Ft,ua as $,vb as lt}from"./chunk-RSLNC5OR.js";import{a as tt,b as wt,f as F}from"./chunk-CWTPBX7D.js";function de(e,o){(o==null||o>e.length)&&(o=e.length);for(var t=0,n=Array(o);t<o;t++)n[t]=e[t];return n}function ke(e){if(Array.isArray(e))return e}function Se(e,o,t){return(o=je(o))in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function Ee(e,o){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,i,a,c,d=[],g=!0,u=!1;try{if(a=(t=t.call(e)).next,o!==0)for(;!(g=(n=a.call(t)).done)&&(d.push(n.value),d.length!==o);g=!0);}catch(v){u=!0,i=v}finally{try{if(!g&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(u)throw i}}return d}}function Te(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function zt(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?pe(Object(t),!0).forEach(function(n){Se(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function me(e,o){if(e==null)return{};var t,n,i=Ie(e,o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],o.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function Ie(e,o){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(o.indexOf(n)!==-1)continue;t[n]=e[n]}return t}function ge(e,o){return ke(e)||Ee(e,o)||Ve(e,o)||Te()}function ze(e,o){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,o);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(e)}function je(e){var o=ze(e,"string");return typeof o=="symbol"?o:o+""}function Ve(e,o){if(e){if(typeof e=="string")return de(e,o);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?de(e,o):void 0}}function Le(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function he(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,n)}return t}function fe(e){for(var o=1;o<arguments.length;o++){var t=arguments[o]!=null?arguments[o]:{};o%2?he(Object(t),!0).forEach(function(n){Le(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ue(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return function(n){return o.reduceRight(function(i,a){return a(i)},n)}}function W(e){return function o(){for(var t=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.length>=e.length?e.apply(this,i):function(){for(var c=arguments.length,d=new Array(c),g=0;g<c;g++)d[g]=arguments[g];return o.apply(t,[].concat(i,d))}}}function Mt(e){return{}.toString.call(e).includes("Object")}function Re(e){return!Object.keys(e).length}function Q(e){return typeof e=="function"}function $e(e,o){return Object.prototype.hasOwnProperty.call(e,o)}function Be(e,o){return Mt(o)||D("changeType"),Object.keys(o).some(function(t){return!$e(e,t)})&&D("changeField"),o}function Ae(e){Q(e)||D("selectorType")}function Fe(e){Q(e)||Mt(e)||D("handlerType"),Mt(e)&&Object.values(e).some(function(o){return!Q(o)})&&D("handlersType")}function He(e){e||D("initialIsRequired"),Mt(e)||D("initialType"),Re(e)&&D("initialContent")}function De(e,o){throw new Error(e[o]||e.default)}var qe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},D=W(De)(qe),vt={changes:Be,selector:Ae,handler:Fe,initial:He};function Ke(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vt.initial(e),vt.handler(o);var t={current:e},n=W(Ye)(t,o),i=W(Ge)(t),a=W(vt.changes)(e),c=W(Ne)(t);function d(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(v){return v};return vt.selector(u),u(t.current)}function g(u){Ue(n,i,a,c)(u)}return[d,g]}function Ne(e,o){return Q(o)?o(e.current):o}function Ge(e,o){return e.current=fe(fe({},e.current),o),o}function Ye(e,o,t){return Q(o)?o(e.current):Object.keys(t).forEach(function(n){var i;return(i=o[n])===null||i===void 0?void 0:i.call(o,e.current[n])}),t}var We={create:Ke},ue=We;var _e={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.54.0/min/vs"}};function Ce(e){return function o(){for(var t=this,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.length>=e.length?e.apply(this,i):function(){for(var c=arguments.length,d=new Array(c),g=0;g<c;g++)d[g]=arguments[g];return o.apply(t,[].concat(i,d))}}}function xe(e){return{}.toString.call(e).includes("Object")}function Qe(e){return e||be("configIsRequired"),xe(e)||be("configType"),e.urls?(Je(),{paths:{vs:e.urls.monacoBase}}):e}function Je(){console.warn(ve.deprecation)}function Xe(e,o){throw new Error(e[o]||e.default)}var ve={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},be=Ce(Xe)(ve),Me={config:Qe};var Pe=function(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return function(i){return t.reduceRight(function(a,c){return c(a)},i)}};function jt(e,o){return Object.keys(o).forEach(function(t){o[t]instanceof Object&&e[t]&&Object.assign(o[t],jt(e[t],o[t]))}),zt(zt({},e),o)}var Ze={type:"cancelation",msg:"operation is manually canceled"};function Pt(e){var o=!1,t=new Promise(function(n,i){e.then(function(a){return o?i(Ze):n(a)}),e.catch(i)});return t.cancel=function(){return o=!0},t}var tn=["monaco"],en=ue.create({config:_e,isInitialized:!1,resolve:null,reject:null,monaco:null}),Oe=ge(en,2),J=Oe[0],Ot=Oe[1];function nn(e){var o=Me.config(e),t=o.monaco,n=me(o,tn);Ot(function(i){return{config:jt(i.config,n),monaco:t}})}function an(){var e=J(function(o){var t=o.monaco,n=o.isInitialized,i=o.resolve;return{monaco:t,isInitialized:n,resolve:i}});if(!e.isInitialized){if(Ot({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Pt(Vt);if(window.monaco&&window.monaco.editor)return ye(window.monaco),e.resolve(window.monaco),Pt(Vt);Pe(on,sn)(cn)}return Pt(Vt)}function on(e){return document.body.appendChild(e)}function rn(e){var o=document.createElement("script");return e&&(o.src=e),o}function sn(e){var o=J(function(n){var i=n.config,a=n.reject;return{config:i,reject:a}}),t=rn("".concat(o.config.paths.vs,"/loader.js"));return t.onload=function(){return e()},t.onerror=o.reject,t}function cn(){var e=J(function(t){var n=t.config,i=t.resolve,a=t.reject;return{config:n,resolve:i,reject:a}}),o=window.require;o.config(e.config),o(["vs/editor/editor.main"],function(t){var n=t.m;ye(n),e.resolve(n)},function(t){e.reject(t)})}function ye(e){J().monaco||Ot({monaco:e})}function ln(){return J(function(e){var o=e.monaco;return o})}var Vt=new Promise(function(e,o){return Ot({resolve:e,reject:o})}),yt={config:nn,init:an,__getMonacoInstance:ln};var un=["editorContainer"];function _n(e,o){e&1&&(r(0,"div",24),b(1,"mat-spinner",25),r(2,"p"),p(3,"Loading Editor..."),s()())}function Cn(e,o){e&1&&(r(0,"span",26)(1,"mat-icon"),p(2,"circle"),s(),p(3," Unsaved "),s())}function xn(e,o){e&1&&(r(0,"span",27)(1,"mat-icon"),p(2,"check_circle"),s(),p(3," All changes saved "),s())}function bn(e,o){e&1&&(r(0,"span",28)(1,"mat-icon"),p(2,"edit"),s(),p(3," Unsaved changes \u2022 Ctrl+S to save "),s())}var Lt=null,X=null;function vn(){return F(this,null,function*(){return Lt||X||(X=F(this,null,function*(){try{yt.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs"},"vs/nls":{availableLanguages:{"*":"en"}}});let o=(yield yt.init())||window.monaco;if(!o)throw new Error("Monaco failed to load");return Lt=o,o}catch(e){throw console.error("\u274C [monaco-singleton] Failed to load Monaco:",e),X=null,e}}),X)})}var we=(()=>{class e{constructor(){this.initialHtml="",this.htmlChanged=new St,this.editorClosed=new St,this.snackBar=H(Ct),this.cdr=H(st),this.editor=null,this.monaco=null,this.originalHtml="",this.autoSaveInterval=null,this.resizeObserver=null,this.isLoading=!0,this.hasUnsavedChanges=!1,this.currentLineCount=0,this.isDarkTheme=!0,this.isInitializing=!1,this.isEditorReady=!1}set editorContainer(t){t&&!this._editorContainer&&(this._editorContainer=t,setTimeout(()=>this.initializeEditor(),0))}get editorContainer(){return this._editorContainer}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(t){if(t.initialHtml&&!t.initialHtml.firstChange&&this.isEditorReady){let n=t.initialHtml.currentValue;this.editor&&n!==this.editor.getValue()&&(this.editor.setValue(n),this.originalHtml=n,this.hasUnsavedChanges=!1,this.cdr.markForCheck())}}ngOnDestroy(){this.cleanup()}initializeEditor(){return F(this,null,function*(){if(!(this.editor||this.isEditorReady||this.isInitializing)){this.isInitializing=!0,this.isLoading=!0;try{if(!this._editorContainer?.nativeElement){console.error("\u274C [html-editor] Editor container not found"),this.isLoading=!1,this.showError("Editor container not ready"),this.cdr.markForCheck();return}if(this.monaco=yield vn(),!this.monaco||!this.monaco.editor)throw console.error("\u274C [html-editor] Monaco or monaco.editor is null/undefined!"),new Error("Monaco editor failed to initialize properly");let t=this.checkForAutoSave(),n=t||this.initialHtml;this.editor=this.monaco.editor.create(this._editorContainer.nativeElement,{value:n,language:"html",theme:this.isDarkTheme?"vs-dark":"vs",automaticLayout:!0,minimap:{enabled:window.innerWidth>768},fontSize:14,lineNumbers:"on",wordWrap:"on",formatOnPaste:!0,formatOnType:!1,scrollBeyondLastLine:!1,smoothScrolling:!0,cursorBlinking:"smooth",renderWhitespace:"selection",folding:!0,bracketPairColorization:{enabled:!0},suggest:{snippetsPreventQuickSuggestions:!1},quickSuggestions:{other:!0,strings:!0}}),this.originalHtml=n,this.updateLineCount(),this.setupEventListeners(),this.setupKeyboardShortcuts(),this.setupAutoSave(),this.setupResizeObserver(),setTimeout(()=>{this.editor&&this.editor.getAction("editor.action.formatDocument")?.run(),this.isInitializing=!1,this.isEditorReady=!0},500),this.isLoading=!1,this.cdr.markForCheck(),t&&this.showInfo("Restored auto-saved changes")}catch(t){console.error("\u274C [html-editor] Failed to initialize Monaco Editor:",t),console.error("\u274C [html-editor] Error details:",{message:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:void 0,monaco:!!this.monaco,hasEditor:!!this.monaco?.editor,container:!!this._editorContainer?.nativeElement,windowMonaco:!!window.monaco}),this.isLoading=!1,this.isInitializing=!1,this.isEditorReady=!1,this.editor=null,this.monaco=null,this.showError("Failed to load editor. Please try again or refresh the page."),this.cdr.markForCheck()}}})}setupEventListeners(){this.editor&&(this.editor.onDidChangeModelContent(()=>{let t=this.editor?.getValue()||"";this.hasUnsavedChanges=t!==this.originalHtml,this.updateLineCount(),this.cdr.markForCheck()}),this.editor.onDidChangeCursorPosition(()=>{this.cdr.markForCheck()}))}setupKeyboardShortcuts(){!this.editor||!this.monaco||(this.editor.addCommand(this.monaco.KeyMod.CtrlCmd|this.monaco.KeyCode.KeyS,()=>{this.onSave()}),this.editor.addCommand(this.monaco.KeyMod.CtrlCmd|this.monaco.KeyMod.Shift|this.monaco.KeyCode.KeyF,()=>{this.formatDocument()}),this.editor.addCommand(this.monaco.KeyCode.Escape,()=>{this.onClose()}))}setupAutoSave(){this.autoSaveInterval=setInterval(()=>{if(this.hasUnsavedChanges&&this.editor){let t=this.editor.getValue();this.autoSave(t)}},3e4)}setupResizeObserver(){this._editorContainer?.nativeElement&&(this.resizeObserver=new ResizeObserver(()=>{this.editor?.layout()}),this.resizeObserver.observe(this._editorContainer.nativeElement))}updateLineCount(){if(!this.editor)return;let t=this.editor.getModel();this.currentLineCount=t?t.getLineCount():0}autoSave(t){try{localStorage.setItem("html_editor_autosave",t),localStorage.setItem("html_editor_autosave_time",Date.now().toString())}catch{}}checkForAutoSave(){try{let t=localStorage.getItem("html_editor_autosave"),n=localStorage.getItem("html_editor_autosave_time");if(!t||!n)return null;let i=Date.now()-parseInt(n,10),a=60*60*1e3;return i>a?(this.clearAutoSave(),null):t}catch{return null}}clearAutoSave(){try{localStorage.removeItem("html_editor_autosave"),localStorage.removeItem("html_editor_autosave_time")}catch{}}formatDocument(){this.editor&&(this.editor.getAction("editor.action.formatDocument")?.run(),this.isInitializing||this.showInfo("Document formatted"))}toggleTheme(){!this.monaco||!this.editor||(this.isDarkTheme=!this.isDarkTheme,this.monaco.editor.setTheme(this.isDarkTheme?"vs-dark":"vs"),this.cdr.markForCheck())}onSave(){if(!this.editor||!this.hasUnsavedChanges)return;let t=this.editor.getValue();if(!this.isValidHtml(t)){this.showError("Invalid HTML detected. Please fix errors before saving.");return}this.containsDangerousCode(t)&&!confirm("This HTML contains potentially dangerous code (scripts). Continue?")||(this.htmlChanged.emit(t),this.originalHtml=t,this.hasUnsavedChanges=!1,this.clearAutoSave(),this.cdr.markForCheck(),this.showSuccess("Changes saved successfully!"))}onRevert(){!this.editor||!this.hasUnsavedChanges||(this.editor.setValue(this.originalHtml),this.hasUnsavedChanges=!1,this.clearAutoSave(),this.cdr.markForCheck(),this.showInfo("Changes reverted"))}onClose(){this.hasUnsavedChanges?confirm("You have unsaved changes. Close editor anyway?")&&(this.clearAutoSave(),this.editorClosed.emit()):(this.clearAutoSave(),this.editorClosed.emit())}isValidHtml(t){try{return new DOMParser().parseFromString(t,"text/html").querySelectorAll("parsererror").length===0}catch{return!1}}containsDangerousCode(t){return/<script|javascript:|onerror=|onload=/i.test(t)}cleanup(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.editor&&(this.editor.dispose(),this.editor=null),this.monaco=null,this.isEditorReady=!1,this.isInitializing=!1,this.isLoading=!0}getCursorInfo(){if(!this.editor)return"";let t=this.editor.getPosition();return t?`Ln ${t.lineNumber}, Col ${t.column}`:""}showSuccess(t){this.snackBar.open(t,"Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}showError(t){this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}showInfo(t){this.snackBar.open(t,"Close",{duration:2e3,panelClass:["info-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=nt({type:e,selectors:[["app-html-editor"]],viewQuery:function(n,i){if(n&1&&it(un,5),n&2){let a;at(a=ot())&&(i.editorContainer=a.first)}},inputs:{initialHtml:"initialHtml"},outputs:{htmlChanged:"htmlChanged",editorClosed:"editorClosed"},standalone:!0,features:[$t,rt],decls:49,vars:12,consts:[["editorContainer",""],[1,"editor-wrapper"],["class","editor-loading",4,"ngIf"],[1,"editor-container"],[1,"editor-header"],[1,"editor-title"],[1,"title-icon"],[1,"title-content"],[1,"subtitle"],["class","warning-badge",4,"ngIf"],[1,"editor-actions"],["mat-icon-button","",1,"theme-toggle",3,"click","matTooltip"],["mat-icon-button","","matTooltip","Format Document (Ctrl+Shift+F)",1,"format-btn",3,"click"],["mat-button","",1,"revert-btn",3,"click","disabled"],["mat-raised-button","","color","primary",1,"save-btn",3,"click","disabled"],["mat-icon-button","","matTooltip","Close Editor (Esc)",1,"close-btn",3,"click"],[1,"editor-body"],[1,"editor-footer"],[1,"footer-left"],[1,"footer-item"],[1,"footer-item","cursor-info"],[1,"footer-right"],["class","footer-hint",4,"ngIf"],["class","footer-hint unsaved",4,"ngIf"],[1,"editor-loading"],["diameter","48"],[1,"warning-badge"],[1,"footer-hint"],[1,"footer-hint","unsaved"]],template:function(n,i){if(n&1){let a=L();r(0,"div",1),x(1,_n,4,0,"div",2),r(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"mat-icon"),p(7,"code"),s()(),r(8,"div",7)(9,"h4"),p(10,"HTML Editor"),s(),r(11,"span",8),p(12,"Make quick changes to your template"),s()(),x(13,Cn,4,0,"span",9),s(),r(14,"div",10)(15,"button",11),O("click",function(){return y(a),w(i.toggleTheme())}),r(16,"mat-icon"),p(17),s()(),r(18,"button",12),O("click",function(){return y(a),w(i.formatDocument())}),r(19,"mat-icon"),p(20,"auto_fix_high"),s()(),r(21,"button",13),O("click",function(){return y(a),w(i.onRevert())}),r(22,"mat-icon"),p(23,"undo"),s(),p(24," Revert "),s(),r(25,"button",14),O("click",function(){return y(a),w(i.onSave())}),r(26,"mat-icon"),p(27,"save"),s(),p(28," Save Changes "),s(),r(29,"button",15),O("click",function(){return y(a),w(i.onClose())}),r(30,"mat-icon"),p(31,"close"),s()()()(),b(32,"div",16,0),r(34,"div",17)(35,"div",18)(36,"span",19)(37,"mat-icon"),p(38,"description"),s(),p(39," HTML "),s(),r(40,"span",19)(41,"mat-icon"),p(42,"format_list_numbered"),s(),p(43),s(),r(44,"span",20),p(45),s()(),r(46,"div",21),x(47,xn,4,0,"span",22)(48,bn,4,0,"span",23),s()()()()}n&2&&(l(),m("ngIf",i.isLoading),l(),$("hidden",i.isLoading),l(11),m("ngIf",i.hasUnsavedChanges),l(2),m("matTooltip",i.isDarkTheme?"Switch to Light Theme":"Switch to Dark Theme"),l(2),R(i.isDarkTheme?"light_mode":"dark_mode"),l(4),m("disabled",!i.hasUnsavedChanges||i.isLoading),l(4),m("disabled",!i.hasUnsavedChanges||i.isLoading),l(18),B(" ",i.currentLineCount," lines "),l(2),B(" ",i.getCursorInfo()," "),l(2),m("ngIf",!i.hasUnsavedChanges),l(),m("ngIf",i.hasUnsavedChanges))},dependencies:[lt,ct,gt,pt,mt,ft,ht,bt,xt,_t,ut,oe],styles:['[_nghost-%COMP%]{--editor-primary: #6d28d9;--editor-success: #10b981;--editor-warning: #f59e0b;--editor-error: #ef4444;--editor-dark-bg: #1e1e1e;--editor-dark-border: #333;--editor-light-bg: #ffffff;--editor-light-border: #e0e0e0;display:flex;height:100%;width:100%;flex-direction:column}.editor-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;width:100%;position:relative;background:var(--editor-dark-bg);border-radius:16px;overflow:hidden;box-shadow:0 10px 40px #0003}.editor-loading[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1e1e1e,#2d2d2d);color:#fff;z-index:100;gap:1.5rem}.editor-loading[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]     circle{stroke:var(--editor-primary)}.editor-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0;animation:_ngcontent-%COMP%_pulse 2s infinite}.editor-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100%;width:100%;opacity:1;transition:opacity .3s ease}.editor-container.hidden[_ngcontent-%COMP%]{opacity:0;pointer-events:none}.editor-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.5rem;background:linear-gradient(135deg,#2d2d2d,#1e1e1e);border-bottom:1px solid var(--editor-dark-border);position:relative;z-index:10;flex-shrink:0}.editor-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--editor-primary),transparent);opacity:.5}.editor-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;color:#fff;flex:1;min-width:0}.editor-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:linear-gradient(135deg,var(--editor-primary) 0%,#8b5cf6 100%);border-radius:10px;flex-shrink:0}.editor-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.editor-title[_ngcontent-%COMP%]   .title-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;min-width:0}.editor-title[_ngcontent-%COMP%]   .title-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:700;line-height:1.2}.editor-title[_ngcontent-%COMP%]   .title-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:#fff9;line-height:1}.editor-title[_ngcontent-%COMP%]   .warning-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.375rem .875rem;background:#fbbf2426;border:1px solid rgba(251,191,36,.3);color:#fbbf24;border-radius:20px;font-size:.75rem;font-weight:700;animation:_ngcontent-%COMP%_pulse-badge 2s infinite;flex-shrink:0}.editor-title[_ngcontent-%COMP%]   .warning-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;animation:_ngcontent-%COMP%_blink 1.5s infinite}.editor-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-shrink:0}.editor-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .2s ease}.editor-actions[_ngcontent-%COMP%]   button.theme-toggle[_ngcontent-%COMP%], .editor-actions[_ngcontent-%COMP%]   button.format-btn[_ngcontent-%COMP%]{color:#ffffffb3}.editor-actions[_ngcontent-%COMP%]   button.theme-toggle[_ngcontent-%COMP%]:hover, .editor-actions[_ngcontent-%COMP%]   button.format-btn[_ngcontent-%COMP%]:hover{color:#fff;background:#ffffff1a}.editor-actions[_ngcontent-%COMP%]   button.revert-btn[_ngcontent-%COMP%]{color:#ffffffe6}.editor-actions[_ngcontent-%COMP%]   button.revert-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.25rem}.editor-actions[_ngcontent-%COMP%]   button.revert-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff1a}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--editor-success) 0%,#059669 100%);color:#fff;font-weight:600;padding:0 1.25rem;box-shadow:0 4px 12px #10b9814d}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #10b98166;transform:translateY(-1px)}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.editor-actions[_ngcontent-%COMP%]   button.close-btn[_ngcontent-%COMP%]{color:#ffffffb3}.editor-actions[_ngcontent-%COMP%]   button.close-btn[_ngcontent-%COMP%]:hover{color:#ef4444;background:#ef44441a}.editor-body[_ngcontent-%COMP%]{flex:1;min-height:400px;height:100%;position:relative;background:var(--editor-dark-bg);overflow:hidden}.editor-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;background:#252526;border-top:1px solid var(--editor-dark-border);color:#ffffffb3;font-size:.75rem;flex-shrink:0;position:relative;z-index:10}.editor-footer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(109,40,217,.3),transparent)}.footer-left[_ngcontent-%COMP%], .footer-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.footer-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.375rem;padding:.25rem .5rem;background:#ffffff0d;border-radius:4px;transition:background .2s ease}.footer-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:var(--editor-primary)}.footer-item.cursor-info[_ngcontent-%COMP%]{font-family:Courier New,monospace;min-width:100px}.footer-item[_ngcontent-%COMP%]:hover{background:#ffffff14}.footer-hint[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.25rem .75rem;background:#10b9811a;border:1px solid rgba(16,185,129,.2);color:#10b981;border-radius:12px;font-weight:500}.footer-hint[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.footer-hint.unsaved[_ngcontent-%COMP%]{background:#fbbf241a;border-color:#fbbf2433;color:#fbbf24}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_pulse-badge{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes _ngcontent-%COMP%_blink{0%,49%{opacity:1}50%,to{opacity:.3}}@media (max-width: 1024px){.editor-header[_ngcontent-%COMP%]{padding:.875rem 1rem}.editor-title[_ngcontent-%COMP%]   .title-content[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{display:none}.editor-actions[_ngcontent-%COMP%]{gap:.375rem}.editor-actions[_ngcontent-%COMP%]   button.revert-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0}.editor-actions[_ngcontent-%COMP%]   button.revert-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]{padding:0 1rem;font-size:.875rem}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.375rem}}@media (max-width: 768px){.editor-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem;padding:.75rem 1rem}.editor-title[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-start}.editor-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{width:36px;height:36px}.editor-title[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.editor-title[_ngcontent-%COMP%]   .warning-badge[_ngcontent-%COMP%]{margin-left:auto}.editor-actions[_ngcontent-%COMP%]{justify-content:space-between;width:100%}.editor-actions[_ngcontent-%COMP%]   button.save-btn[_ngcontent-%COMP%]{flex:1}.footer-left[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.footer-item[_ngcontent-%COMP%]{padding:.125rem .375rem;font-size:.6875rem}.footer-item.cursor-info[_ngcontent-%COMP%]{min-width:auto}.footer-hint[_ngcontent-%COMP%]{font-size:.6875rem;padding:.125rem .5rem}}@media (max-width: 480px){.editor-header[_ngcontent-%COMP%]{padding:.625rem .75rem}.editor-title[_ngcontent-%COMP%]   .title-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.875rem}.editor-title[_ngcontent-%COMP%]   .warning-badge[_ngcontent-%COMP%]{font-size:.6875rem;padding:.25rem .625rem}.editor-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.5rem;padding:.5rem .75rem}.footer-left[_ngcontent-%COMP%], .footer-right[_ngcontent-%COMP%]{justify-content:center}}  .success-snackbar{background:#10b981!important;color:#fff!important}  .error-snackbar{background:#ef4444!important;color:#fff!important}  .info-snackbar{background:#3b82f6!important;color:#fff!important}'],changeDetection:0})}}return e})();var Mn=["chatMessages"],Pn=()=>[];function On(e,o){if(e&1){let t=L();r(0,"button",44),O("click",function(){y(t);let i=C();return w(i.openEditor())}),r(1,"mat-icon"),p(2,"edit_note"),s()()}}function yn(e,o){e&1&&b(0,"mat-progress-spinner",67)}function wn(e,o){if(e&1){let t=L();r(0,"div",68)(1,"div",69)(2,"div",70)(3,"div",71),p(4,"Original"),s(),r(5,"div",72),p(6),s()(),r(7,"div",73),p(8,"\u2192"),s(),r(9,"div",70)(10,"div",71),p(11,"Replacement"),s(),b(12,"input",74,1),s()(),r(14,"div",75)(15,"button",76),O("click",function(){let i=y(t).$implicit,a=K(13),c=C(2).index,d=C(2);return w(d.onApplySingle(c,i,a.value))}),p(16," Apply "),s(),r(17,"button",77),O("click",function(){let i=y(t).index,a=C(2).index,c=C(2);return w(c.onSkipSingle(a,i))}),p(18," Skip "),s()()()}if(e&2){let t=o.$implicit,n=C(2).index,i=C(2);l(6),R(t.find),l(6),m("value",t.replace),l(3),m("disabled",i.applyingIndex===n),l(2),m("disabled",i.applyingIndex===n)}}function kn(e,o){if(e&1){let t=L();T(0),r(1,"div",59)(2,"div",60)(3,"h4"),p(4),s(),r(5,"div",61)(6,"button",62),O("click",function(){y(t);let i=C().index,a=C(2);return w(a.onClearEdits(i))}),p(7," Clear "),s(),r(8,"button",63),O("click",function(){y(t);let i=C().index,a=C(2);return w(a.onApplyEdits(i))}),x(9,yn,1,0,"mat-progress-spinner",64),r(10,"span"),p(11),s()()()(),r(12,"div",65),x(13,wn,19,4,"div",66),s()(),I()}if(e&2){let t=C(),n=t.$implicit,i=t.index,a=C(2);l(4),B("Suggested Changes (",(n.json==null||n.json.edits==null?null:n.json.edits.length)||0,")"),l(2),m("disabled",a.applyingIndex===i),l(2),m("disabled",a.applyingIndex===i),l(),m("ngIf",a.applyingIndex===i),l(2),R(a.applyingIndex===i?"Applying...":"Apply All"),l(2),m("ngForOf",n.json.edits)}}function Sn(e,o){if(e&1&&(r(0,"div",55)(1,"div",56)(2,"div",57),p(3),s(),b(4,"div",58),x(5,kn,14,6,"ng-container",17),s()()),e&2){let t=o.$implicit;l(),$("me",t.role==="user"),l(2),R(t.role==="user"?"YOU":"AI ASSISTANT"),l(),m("innerText",t.text),l(),m("ngIf",t.role==="assistant"&&(t.json==null||t.json.edits==null?null:t.json.edits.length))}}function En(e,o){e&1&&b(0,"mat-progress-spinner",78)}function Tn(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",79),s())}function In(e,o){if(e&1){let t=L();T(0),r(1,"div",45)(2,"div",12)(3,"h3"),p(4,"AI Assistant"),s(),r(5,"button",46),h(6,"async"),O("click",function(){y(t);let i=C();return w(i.onFinalize())}),r(7,"span"),p(8),h(9,"async"),s()()(),r(10,"div",47)(11,"div",48,0),x(13,Sn,6,5,"div",49),h(14,"async"),s(),r(15,"div",50)(16,"textarea",51),O("keydown",function(i){y(t);let a=C();return w(a.handleKeyDown(i))}),p(17,"              "),s(),r(18,"button",52),O("click",function(){y(t);let i=C();return w(i.onSend())}),x(19,En,1,0,"mat-progress-spinner",53)(20,Tn,2,0,"svg",54),s()()()(),I()}if(e&2){let t,n=C();l(),m("@fadeInOut",void 0),l(4),m("disabled",f(6,9,n.finalizing$)),l(3),R(f(9,11,n.finalizing$)?"Finalizing...":"Finalize"),l(5),m("ngForOf",(t=f(14,13,n.messages$))!==null&&t!==void 0?t:Nt(15,Pn))("ngForTrackBy",n.trackByMsg),l(3),m("formControl",n.input),l(2),m("disabled",n.sending||!n.input.value.trim()),l(),m("ngIf",n.sending),l(),m("ngIf",!n.sending)}}function zn(e,o){if(e&1){let t=L();T(0),r(1,"app-html-editor",80),h(2,"async"),O("htmlChanged",function(i){y(t);let a=C();return w(a.onEditorSave(i))})("editorClosed",function(){y(t);let i=C();return w(i.onEditorClose())}),s(),I()}if(e&2){let t=C();l(),m("initialHtml",f(2,1,t.html$)||"")}}function jn(e,o){e&1&&(r(0,"div",81)(1,"div",82)(2,"div",83),k(),r(3,"svg",84),b(4,"rect",85)(5,"circle",86)(6,"circle",87),r(7,"circle",88),b(8,"animate",89),s(),b(9,"rect",90),r(10,"circle",91),b(11,"animate",92)(12,"animate",93),s(),r(13,"defs")(14,"linearGradient",94),b(15,"stop",95)(16,"stop",96),s()()()(),V(),b(17,"mat-progress-spinner",97),r(18,"p",98),p(19,"Capturing screenshots..."),s(),r(20,"small",99),p(21,"This may take a moment"),s()()()),e&2&&m("@fadeInOut",void 0)}function Vn(e,o){if(e&1&&(T(0),k(),r(1,"svg",38),b(2,"path",105)(3,"path",106),s(),V(),r(4,"p"),p(5,"No screenshots yet"),s(),r(6,"small"),p(7),s(),I()),e&2){let t=C(3);l(7),B("",t.getValidLinkCount(),' link(s) detected - Click "Finalize" to capture')}}function Ln(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",107)(2,"line",108),s(),V(),r(3,"p"),p(4,"No links to capture"),s(),r(5,"small"),p(6,"This template contains no valid HTTP/HTTPS links"),s())}function Un(e,o){if(e&1&&(r(0,"div",103),x(1,Vn,8,1,"ng-container",104)(2,Ln,7,0,"ng-template",null,2,Et),s()),e&2){let t=K(3),n=C(2);l(),m("ngIf",n.hasValidLinks())("ngIfElse",t)}}function Rn(e,o){if(e&1&&(T(0),b(1,"img",119),I()),e&2){let t=C().$implicit;l(),m("src",t.dataUrl,Y)}}function $n(e,o){e&1&&(r(0,"div",122),b(1,"mat-progress-spinner",123),s())}function Bn(e,o){e&1&&(r(0,"div",124),k(),r(1,"svg",38),b(2,"path",125),s(),V(),r(3,"span"),p(4,"Failed"),s()())}function An(e,o){if(e&1&&x(0,$n,2,0,"div",120)(1,Bn,5,0,"div",121),e&2){let t=C().$implicit;m("ngIf",!t.error),l(),m("ngIf",t.error)}}function Fn(e,o){if(e&1&&(T(0),p(1),I()),e&2){let t=C(2).$implicit;l(),B(" \xB7 ",t.status,"")}}function Hn(e,o){if(e&1&&(r(0,"div",126)(1,"span",127),p(2),x(3,Fn,2,1,"ng-container",17),s()()),e&2){let t=C().$implicit;l(),$("ok",t.ok)("fail",!t.ok),l(),B(" ",t.ok?"OK":"Failed"," "),l(),m("ngIf",t.status)}}function Dn(e,o){if(e&1&&(r(0,"div",130)(1,"span",131),p(2,"Latest Tested Link:"),s(),r(3,"span",138),p(4),s()()),e&2){let t=C(2).$implicit,n=C(2);l(4),R(n.getLatestTestedUrl(t))}}function qn(e,o){e&1&&b(0,"mat-progress-spinner",67)}function Kn(e,o){e&1&&(r(0,"span"),p(1,"Test"),s())}function Nn(e,o){if(e&1){let t=L();r(0,"div",128)(1,"div",129)(2,"div",130)(3,"span",131),p(4,"Original Link:"),s(),r(5,"span",132),p(6),s()(),x(7,Dn,5,1,"div",133),s(),r(8,"input",134,4),Kt("ngModelChange",function(i){y(t);let a=C(3);return qt(a.editInputValue,i)||(a.editInputValue=i),w(i)}),O("keydown",function(i){y(t);let a=K(9),c=C().$implicit,d=C(2);return w(d.onEditInputKeyDown(i,c,a))}),s(),r(10,"button",135),O("click",function(){y(t);let i=K(9),a=C().$implicit,c=C(2);return w(c.onReplaceSnap(a,i))}),p(11," Replace "),s(),r(12,"button",136),O("click",function(){y(t);let i=K(9),a=C().$implicit,c=C(2);return w(c.onRetestUrl(a,i.value))}),x(13,qn,1,0,"mat-progress-spinner",64)(14,Kn,2,0,"span",17),s(),r(15,"button",137),O("click",function(){y(t);let i=C().$implicit,a=C(2);return w(a.onCancelEdit(i))}),p(16," Cancel "),s()()}if(e&2){let t=C().$implicit,n=C(2);l(6),R(n.getOriginalUrl(t)),l(),m("ngIf",n.hasBeenRetested(t)),l(),Dt("ngModel",n.editInputValue),l(2),m("disabled",!n.canReplace(t)),l(2),m("disabled",n.isSnapping(t)),l(),m("ngIf",n.isSnapping(t)),l(),m("ngIf",!n.isSnapping(t))}}function Gn(e,o){e&1&&b(0,"mat-progress-spinner",67)}function Yn(e,o){e&1&&(r(0,"span"),p(1,"Retest"),s())}function Wn(e,o){if(e&1){let t=L();r(0,"button",139),O("click",function(){y(t);let i=C().$implicit,a=C(2);return w(a.onRetestUrl(i))}),x(1,Gn,1,0,"mat-progress-spinner",64)(2,Yn,2,0,"span",17),s()}if(e&2){let t=C().$implicit,n=C(2);m("disabled",n.isSnapping(t)),l(),m("ngIf",n.isSnapping(t)),l(),m("ngIf",!n.isSnapping(t))}}function Qn(e,o){if(e&1){let t=L();r(0,"div",109)(1,"div",110),O("click",function(){let i=y(t).$implicit,a=C(2);return w(a.openImageModal(i))}),x(2,Rn,2,1,"ng-container",104)(3,An,2,2,"ng-template",null,3,Et),s(),r(5,"div",111)(6,"div",112)(7,"div",113)(8,"a",114),p(9),s(),r(10,"button",115),O("click",function(){let i=y(t).$implicit,a=C(2);return w(a.onEditSnap(i))}),r(11,"mat-icon"),p(12,"edit"),s()()(),x(13,Hn,4,6,"div",116),s(),x(14,Nn,17,7,"div",117)(15,Wn,3,3,"button",118),s()()}if(e&2){let t=o.$implicit,n=K(4),i=C(2);l(2),m("ngIf",t.dataUrl)("ngIfElse",n),l(6),m("href",i.getOriginalUrl(t),Y),l(),B(" ",i.getOriginalUrl(t)," "),l(4),m("ngIf",t.dataUrl||t.error),l(),m("ngIf",i.isSnapInEditMode(t)),l(),m("ngIf",!i.isSnapInEditMode(t))}}function Jn(e,o){if(e&1&&(r(0,"div",100),h(1,"async"),x(2,Un,4,2,"div",101),h(3,"async"),x(4,Qn,16,7,"div",102),s()),e&2){let t=o.ngIf,n=C();Ft("display",f(1,5,n.finalizing$)?"none":"block"),l(2),m("ngIf",!t.length&&!f(3,7,n.finalizing$)),l(2),m("ngForOf",t)("ngForTrackBy",n.trackBySnap)}}function Xn(e,o){if(e&1&&(r(0,"div",142),k(),r(1,"svg",38),b(2,"path",143),s(),p(3),s()),e&2){let t=C().ngIf;l(3),B(" ",t.length," valid link(s) loaded ")}}function Zn(e,o){if(e&1&&(r(0,"div",140),x(1,Xn,4,1,"div",141),s()),e&2){let t=o.ngIf;l(),m("ngIf",t.length)}}function ti(e,o){if(e&1&&(r(0,"div",148)(1,"h5"),p(2,"Validation Results"),s(),r(3,"span",149),p(4),s()()),e&2){let t=C().ngIf;l(4),B("",t.length," link(s)")}}function ei(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",143),s())}function ni(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",158),s())}function ii(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",125),s())}function ai(e,o){e&1&&(r(0,"div",159),p(1,"Missing from HTML"),s())}function oi(e,o){e&1&&(r(0,"div",159),p(1,"Extra link in HTML"),s())}function ri(e,o){if(e&1){let t=L();r(0,"div",152)(1,"div",153),x(2,ei,2,0,"svg",54)(3,ni,2,0,"svg",54)(4,ii,2,0,"svg",54),s(),r(5,"div",154)(6,"a",155),p(7),s(),x(8,ai,2,0,"div",156)(9,oi,2,0,"div",156),s(),r(10,"button",157),O("click",function(){let i=y(t).$implicit,a=C(3);return w(a.onSnapUrl(i.url))}),k(),r(11,"svg",38),b(12,"path",105),s()()()}if(e&2){let t=o.$implicit;$("valid",t.inHtml&&t.inFile)("invalid",!t.inHtml||!t.inFile),l(2),m("ngIf",t.inHtml&&t.inFile),l(),m("ngIf",!t.inHtml&&t.inFile),l(),m("ngIf",t.inHtml&&!t.inFile),l(2),m("href",t.url,Y),l(),R(t.url),l(),m("ngIf",t.inFile&&!t.inHtml),l(),m("ngIf",!t.inFile&&t.inHtml)}}function si(e,o){if(e&1&&(r(0,"div",150),x(1,ri,13,11,"div",151),s()),e&2){let t=C().ngIf;l(),m("ngForOf",t)}}function ci(e,o){e&1&&(r(0,"div",160),p(1," Upload a file to see validation results "),s())}function li(e,o){if(e&1&&(r(0,"div",144),x(1,ti,5,1,"div",145)(2,si,2,1,"div",146)(3,ci,2,0,"div",147),s()),e&2){let t=o.ngIf;l(),m("ngIf",t.length),l(),m("ngIf",t.length),l(),m("ngIf",!t.length)}}function di(e,o){if(e&1){let t=L();r(0,"div",161),O("click",function(){y(t);let i=C();return w(i.closeImageModal())}),b(1,"div",162),r(2,"div",163),O("click",function(i){return y(t),w(i.stopPropagation())}),r(3,"button",164),O("click",function(){y(t);let i=C();return w(i.closeImageModal())}),k(),r(4,"svg",38),b(5,"line",165)(6,"line",166),s()(),V(),b(7,"img",167),r(8,"div",168)(9,"a",169),p(10),s()()()()}if(e&2){let t=C();l(7),m("src",t.selectedImage.dataUrl,Y)("alt",t.selectedImage.url),l(2),m("href",t.selectedImage.url,Y),l(),R(t.selectedImage.url)}}function pi(e,o){e&1&&(r(0,"div",192)(1,"div",193)(2,"div",194),k(),r(3,"svg",195),b(4,"path",196)(5,"circle",197)(6,"path",198)(7,"path",199)(8,"path",200)(9,"path",201),s()(),V(),r(10,"div",202)(11,"span",203),p(12,"\u2728"),s(),r(13,"span",204),p(14,"\u2728"),s(),r(15,"span",205),p(16,"\u2728"),s(),r(17,"span",206),p(18,"\u2B50"),s(),r(19,"span",207),p(20,"\u{1F4AB}"),s()()(),r(21,"div",98)(22,"h4"),p(23,"Analyzing your template..."),s(),r(24,"p"),p(25,"Our AI is checking content quality and accuracy"),s()()())}function mi(e,o){e&1&&(r(0,"div",212)(1,"div",213),k(),r(2,"svg",38),b(3,"path",143),s()(),V(),r(4,"h4"),p(5,"Perfect! No content issues found"),s(),r(6,"p"),p(7,"Your template is ready to launch \u{1F389}"),s()())}function gi(e,o){if(e&1&&(r(0,"div",227)(1,"div",228),p(2),s(),r(3,"div",229)(4,"div",230)(5,"span",231),p(6),s(),k(),r(7,"svg",232),b(8,"path",191),s(),V(),r(9,"span",233),p(10),s()(),r(11,"div",234),p(12),s()()()),e&2){let t=o.$implicit,n=o.index;l(2),R(n+1),l(4),R(t.word),l(4),R(t.suggestion),l(2),R(t.context)}}function hi(e,o){if(e&1){let t=L();r(0,"div",214)(1,"div",215)(2,"div",216),k(),r(3,"svg",38),b(4,"path",125),s()(),V(),r(5,"div",217)(6,"h4"),p(7),s(),r(8,"p",218),p(9,"Please use the chatbot or editor to fix these issues"),s()()(),r(10,"div",219),x(11,gi,13,4,"div",220),s(),r(12,"div",221)(13,"button",222),O("click",function(){y(t);let i=C(3);return w(i.closeTemplateModal())}),k(),r(14,"svg",38),b(15,"path",223),s(),p(16," Use AI Chatbot "),s(),V(),r(17,"button",224),O("click",function(){y(t);let i=C(3);return w(i.navigateToVisualEditorWithGrammar())}),k(),r(18,"svg",38),b(19,"path",225)(20,"path",226),s(),p(21," Open Editor "),s()()()}if(e&2){let t=C().ngIf;l(7),Ht("Found ",t.count," content issue",t.count>1?"s":"",""),l(4),m("ngForOf",t.mistakes)}}function fi(e,o){if(e&1){let t=L();r(0,"div",208),x(1,mi,8,0,"div",209)(2,hi,22,3,"div",210),r(3,"button",211),O("click",function(){y(t);let i=C(2);return w(i.retryGrammarCheck())}),p(4," Re-check "),s()()}if(e&2){let t=o.ngIf;l(),m("ngIf",!t.hasErrors),l(),m("ngIf",t.hasErrors)}}function ui(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",143),s())}function _i(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",125),s())}function Ci(e,o){e&1&&(k(),r(0,"svg",38),b(1,"circle",235),s())}function xi(e,o){e&1&&(T(0),p(1,"Validating content..."),I())}function bi(e,o){e&1&&(T(0),p(1,"Content validated"),I())}function vi(e,o){if(e&1&&(T(0),p(1),h(2,"async"),I()),e&2){let t=C(2);l(),B(" Content issues (",f(2,1,t.grammarCheckResult$).count,") ")}}function Mi(e,o){e&1&&(T(0),p(1,"Validation pending"),I())}function Pi(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",143),s())}function Oi(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",125),s())}function yi(e,o){e&1&&(k(),r(0,"svg",38),b(1,"circle",235),s())}function wi(e,o){e&1&&(T(0),p(1,"Template ready"),I())}function ki(e,o){e&1&&(T(0),p(1,"Template needs fixes"),I())}function Si(e,o){e&1&&(T(0),p(1,"Checking template..."),I())}function Ei(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",143),s())}function Ti(e,o){e&1&&(k(),r(0,"svg",38),b(1,"circle",235),s())}function Ii(e,o){e&1&&(k(),r(0,"svg",38),b(1,"path",236),s())}function zi(e,o){e&1&&(T(0),p(1," No links to validate "),I())}function ji(e,o){if(e&1&&(T(0),p(1),h(2,"async"),I()),e&2){let t=C(2);l(),B(" Links captured (",f(2,1,t.snaps$).length,") ")}}function Vi(e,o){if(e&1&&(T(0),p(1),I()),e&2){let t=C(2);l(),B(" Links not validated (",t.getValidLinkCount()," detected) ")}}function Li(e,o){if(e&1){let t=L();r(0,"div",170),b(1,"div",171),r(2,"div",172)(3,"button",173),O("click",function(){y(t);let i=C();return w(i.closeTemplateModal())}),k(),r(4,"svg",38),b(5,"line",165)(6,"line",166),s()(),V(),r(7,"div",174)(8,"h2"),p(9,"Template Pre-Launch Review"),s(),r(10,"p"),p(11,"Comprehensive validation before sending to Mailchimp"),s()(),r(12,"div",175)(13,"div",176)(14,"div",177)(15,"div",178)(16,"div",179)(17,"div",180),k(),r(18,"svg",38),b(19,"path",143),s()(),V(),r(20,"div",181)(21,"h3"),p(22,"Content Review"),s(),r(23,"p"),p(24,"AI-powered validation"),s()()(),x(25,pi,26,0,"div",182),h(26,"async"),x(27,fi,5,2,"div",183),h(28,"async"),h(29,"async"),s()(),r(30,"div",184)(31,"div",185)(32,"div",179)(33,"div",180),k(),r(34,"svg",38),b(35,"path",186),s()(),V(),r(36,"div",181)(37,"h3"),p(38,"Ready to Submit?"),s(),r(39,"p"),p(40,"Send your template to Mailchimp"),s()()(),r(41,"div",187)(42,"div",188)(43,"div",189),h(44,"async"),h(45,"async"),h(46,"async"),h(47,"async"),h(48,"async"),h(49,"async"),h(50,"async"),h(51,"async"),x(52,ui,2,0,"svg",54),h(53,"async"),h(54,"async"),h(55,"async"),x(56,_i,2,0,"svg",54),h(57,"async"),h(58,"async"),h(59,"async"),x(60,Ci,2,0,"svg",54),h(61,"async"),h(62,"async"),r(63,"span"),x(64,xi,2,0,"ng-container",17),h(65,"async"),x(66,bi,2,0,"ng-container",17),h(67,"async"),h(68,"async"),h(69,"async"),x(70,vi,3,3,"ng-container",17),h(71,"async"),h(72,"async"),h(73,"async"),x(74,Mi,2,0,"ng-container",17),h(75,"async"),h(76,"async"),s()(),r(77,"div",189),h(78,"async"),h(79,"async"),h(80,"async"),h(81,"async"),h(82,"async"),h(83,"async"),h(84,"async"),h(85,"async"),x(86,Pi,2,0,"svg",54),h(87,"async"),h(88,"async"),h(89,"async"),x(90,Oi,2,0,"svg",54),h(91,"async"),h(92,"async"),h(93,"async"),x(94,yi,2,0,"svg",54),h(95,"async"),h(96,"async"),r(97,"span"),x(98,wi,2,0,"ng-container",17),h(99,"async"),h(100,"async"),h(101,"async"),x(102,ki,2,0,"ng-container",17),h(103,"async"),h(104,"async"),h(105,"async"),x(106,Si,2,0,"ng-container",17),h(107,"async"),h(108,"async"),s()(),r(109,"div",189),h(110,"async"),h(111,"async"),h(112,"async"),h(113,"async"),x(114,Ei,2,0,"svg",54),h(115,"async"),h(116,"async"),x(117,Ti,2,0,"svg",54),h(118,"async"),h(119,"async"),x(120,Ii,2,0,"svg",54),r(121,"span"),x(122,zi,2,0,"ng-container",17)(123,ji,3,3,"ng-container",17),h(124,"async"),h(125,"async"),x(126,Vi,2,1,"ng-container",17),h(127,"async"),h(128,"async"),s()()(),r(129,"button",190),O("click",function(){y(t);let i=C();return w(i.proceedToCampaignSubmit())}),k(),r(130,"svg",38),b(131,"path",191),s(),V(),r(132,"span"),p(133,"Proceed to Campaign Setup"),s()()()()()()()()()}if(e&2){let t=C();m("@fadeInOut",void 0),l(25),m("ngIf",f(26,40,t.grammarCheckLoading$)),l(2),m("ngIf",!f(28,42,t.grammarCheckLoading$)&&f(29,44,t.grammarCheckResult$)),l(16),$("completed",!f(44,46,t.grammarCheckLoading$)&&f(45,48,t.grammarCheckResult$)&&!f(46,50,t.grammarCheckResult$).hasErrors)("pending",f(47,52,t.grammarCheckLoading$)||!f(48,54,t.grammarCheckResult$))("error",!f(49,56,t.grammarCheckLoading$)&&f(50,58,t.grammarCheckResult$)&&f(51,60,t.grammarCheckResult$).hasErrors),l(9),m("ngIf",!f(53,62,t.grammarCheckLoading$)&&f(54,64,t.grammarCheckResult$)&&f(55,66,t.grammarCheckResult$).hasErrors===!1),l(4),m("ngIf",!f(57,68,t.grammarCheckLoading$)&&f(58,70,t.grammarCheckResult$)&&f(59,72,t.grammarCheckResult$).hasErrors===!0),l(4),m("ngIf",f(61,74,t.grammarCheckLoading$)||!f(62,76,t.grammarCheckResult$)),l(4),m("ngIf",f(65,78,t.grammarCheckLoading$)),l(2),m("ngIf",!f(67,80,t.grammarCheckLoading$)&&f(68,82,t.grammarCheckResult$)&&f(69,84,t.grammarCheckResult$).hasErrors===!1),l(4),m("ngIf",!f(71,86,t.grammarCheckLoading$)&&f(72,88,t.grammarCheckResult$)&&f(73,90,t.grammarCheckResult$).hasErrors===!0),l(4),m("ngIf",!f(75,92,t.grammarCheckLoading$)&&!f(76,94,t.grammarCheckResult$)),l(3),$("completed",!f(78,96,t.grammarCheckLoading$)&&f(79,98,t.grammarCheckResult$)&&!f(80,100,t.grammarCheckResult$).hasErrors)("pending",f(81,102,t.grammarCheckLoading$)||!f(82,104,t.grammarCheckResult$))("error",!f(83,106,t.grammarCheckLoading$)&&f(84,108,t.grammarCheckResult$)&&f(85,110,t.grammarCheckResult$).hasErrors),l(9),m("ngIf",!f(87,112,t.grammarCheckLoading$)&&f(88,114,t.grammarCheckResult$)&&!f(89,116,t.grammarCheckResult$).hasErrors),l(4),m("ngIf",!f(91,118,t.grammarCheckLoading$)&&f(92,120,t.grammarCheckResult$)&&f(93,122,t.grammarCheckResult$).hasErrors),l(4),m("ngIf",f(95,124,t.grammarCheckLoading$)||!f(96,126,t.grammarCheckResult$)),l(4),m("ngIf",!f(99,128,t.grammarCheckLoading$)&&f(100,130,t.grammarCheckResult$)&&!f(101,132,t.grammarCheckResult$).hasErrors),l(4),m("ngIf",!f(103,134,t.grammarCheckLoading$)&&f(104,136,t.grammarCheckResult$)&&f(105,138,t.grammarCheckResult$).hasErrors),l(4),m("ngIf",f(107,140,t.grammarCheckLoading$)||!f(108,142,t.grammarCheckResult$)),l(3),$("completed",t.hasValidLinks()&&f(110,144,t.snaps$)&&f(111,146,t.snaps$).length>0)("pending",t.hasValidLinks()&&(!f(112,148,t.snaps$)||f(113,150,t.snaps$).length===0))("not-applicable",!t.hasValidLinks()),l(5),m("ngIf",t.hasValidLinks()&&f(115,152,t.snaps$)&&f(116,154,t.snaps$).length>0),l(3),m("ngIf",t.hasValidLinks()&&(!f(118,156,t.snaps$)||f(119,158,t.snaps$).length===0)),l(3),m("ngIf",!t.hasValidLinks()),l(2),m("ngIf",!t.hasValidLinks()),l(),m("ngIf",t.hasValidLinks()&&f(124,160,t.snaps$)&&f(125,162,t.snaps$).length>0),l(3),m("ngIf",t.hasValidLinks()&&(!f(127,164,t.snaps$)||f(128,166,t.snaps$).length===0))}}var Ha=(()=>{class e{get isTemplateModalOpen(){return this.templateModalOpenSubject.value}get isFinalizing(){return this.finalizingSubject.value}get isEditorOpen(){return this.editorOpenSubject.value}get editorOpenSync(){return this.editorOpenSubject.value}getEditInputValue(){return this.editInputValue}get isGrammarChecking(){return this.grammarCheckLoadingSubject.value}ngOnInit(){window.scrollTo(0,0),kt([this.runId$,this.no$]).subscribe(([t,n])=>{this.editorStateKey=`editor_state_${t}_${n}`,this.draftMessageKey=`draft_message_${t}_${n}`,this.templateModalKey=`template_modal_${t}_${n}`}),this.input.valueChanges.subscribe(t=>{this.saveDraft(t)})}ngOnDestroy(){this.routerSub?.unsubscribe(),this.refreshSub?.unsubscribe(),this.navigationRefreshSub?.unsubscribe(),this.loadingTimeout&&clearTimeout(this.loadingTimeout)}constructor(){this.ar=H(Wt),this.router=H(Qt),this.qa=H(re),this.cdr=H(st),this.snackBar=H(Ct),this.templateId$=this.ar.paramMap.pipe(G(i=>i.get("id")),et(1)),this.runId$=this.ar.paramMap.pipe(G(i=>i.get("runId")),et(1)),this.no$=this.ar.paramMap.pipe(G(i=>Number(i.get("no"))),et(1)),this.htmlSubject=new A(""),this.html$=this.htmlSubject.asObservable(),this.originalSnapUrls=new Map,this.messagesSubject=new A([]),this.messages$=this.messagesSubject.asObservable(),this.subjectsSubject=new A(null),this.subjects$=this.subjectsSubject.asObservable(),this.subjectsLoading=!1,this.subjectsAborted=!1,this.SUBJECTS_TIMEOUT=6e4,this.currentSubject="",this.input=new te("",{nonNullable:!0}),this.loadingVariant=!0,this.sending=!1,this.applyingIndex=null,this.editInputValue="",this.templateModalKey="",this.snapsSubject=new A([]),this.snaps$=this.snapsSubject.asObservable(),this.snapping=new Map,this.finalizingSubject=new A(!1),this.finalizing$=this.finalizingSubject.asObservable(),this.grammarCheckLoadingSubject=new A(!1),this.grammarCheckLoading$=this.grammarCheckLoadingSubject.asObservable(),this.finalizeClickedInSession=!1,this.editingSnapUrl=null,this.returningFromCampaign=!1,this.validLinksSubject=new A([]),this.validLinks$=this.validLinksSubject.asObservable(),this.htmlLinks$=this.html$.pipe(G(i=>this.extractAllLinks(i))),this.scrollAnimation=null,this.selectedImage=null,this.editorStateKey="",this.draftMessageKey="",this.linkChecks$=kt([this.validLinks$,this.htmlLinks$]).pipe(G(([i,a])=>{if(!i||i.length===0)return[];let c=_=>_.trim().toLowerCase(),d=new Set(i.map(c)),g=new Set(a.map(c)),u=[];for(let _ of i)u.map(c).includes(c(_))||u.push(_);for(let _ of a)u.map(c).includes(c(_))||u.push(_);let v=u.map(_=>({url:_,inFile:d.has(c(_)),inHtml:g.has(c(_))}));return v.sort((_,P)=>{let M=_.inFile&&_.inHtml?1:0,S=P.inFile&&P.inHtml?1:0;return M-S}),v})),this.grammarCheckResultSubject=new A(null),this.grammarCheckResult$=this.grammarCheckResultSubject.asObservable(),this.trackBySnap=(i,a)=>a?.finalUrl||a?.url||String(a?.ts||"0"),this.trackByMsg=(i,a)=>a?.ts??i;let t=this.ar.snapshot.paramMap.get("runId"),n=this.ar.snapshot.paramMap.get("no");if(t&&n){this.templateModalKey=`template_modal_${t}_${n}`;let i=`return_to_modal_${t}_${n}`;this.returningFromCampaign=sessionStorage.getItem(i)==="true",this.returningFromCampaign&&sessionStorage.removeItem(i);let a=this.restoreTemplateModalState();this.templateModalOpenSubject=new A(a),(a||this.returningFromCampaign)&&(document.body.classList.add("validation-modal-open"),document.body.style.overflow="hidden"),this.editorStateKey=`editor_state_${t}_${n}`,this.draftMessageKey=`draft_message_${t}_${n}`;let c=this.restoreEditorState();if(this.editorOpenSubject=new A(c),a&&!this.returningFromCampaign){let g=this.qa.getGrammarCheckCached(t,Number(n));g?(this.grammarCheckResultSubject.next(g),this.grammarCheckLoadingSubject.next(!1)):setTimeout(()=>{this.autoRestartValidationAfterRefresh()},500)}if(this.returningFromCampaign){let g=this.qa.getGrammarCheckCached(t,Number(n));g&&(this.grammarCheckResultSubject.next(g),this.grammarCheckLoadingSubject.next(!1))}let d=this.restoreDraft();d&&this.input.setValue(d)}else this.templateModalOpenSubject=new A(!1),this.editorOpenSubject=new A(!1);this.templateModalOpen$=this.templateModalOpenSubject.asObservable(),this.editorOpen$=this.editorOpenSubject.asObservable(),this.loadingTimeout=window.setTimeout(()=>{this.loadingVariant&&(this.loadingVariant=!1,this.cdr.markForCheck())},1e4),this.runId$.subscribe(i=>F(this,null,function*(){let a=Number(this.ar.snapshot.paramMap.get("no")),c="visual_editor_return_use_variant";if(sessionStorage.getItem(c)==="true"){let v="visual_editor_edited_html",_=sessionStorage.getItem(v);if(_){this.htmlSubject.next(_);let M=this.qa.getChatCached(i,a)?.messages||this.messagesSubject.value,S={html:_,messages:M};this.qa.saveChat(i,a,S),this.qa.getChatCached(i,a)?.html===_||console.error("\u274C [RETURN FROM EDITOR] FAILED: Cache verification failed!"),M.length>0&&this.messagesSubject.next(M),this.snapsSubject.next(yield this.qa.getSnapsCached(i));let z=this.qa.getGrammarCheckCached(i,a);z?this.grammarCheckResultSubject.next(z):(this.grammarCheckResultSubject.next(null),this.qa.clearGrammarCheck(i,a)),this.validLinksSubject.next(this.qa.getValidLinks(i));let U=this.qa.getSubjectsCached(i);U?.length&&(this.subjectsSubject.next(U),this.subjectsLoading=!1),this.templateModalOpenSubject.next(!1),this.saveTemplateModalState(!1),document.body.style.overflow="auto",sessionStorage.removeItem(c),sessionStorage.removeItem(v),this.loadingVariant=!1,this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),this.cdr.detectChanges();return}}let g=`synthetic_run_${i}`,u=sessionStorage.getItem(g);if(u)try{let _=JSON.parse(u).items?.find(P=>P.no===a);if(_?.html){let P=this.qa.getChatCached(i,a),M=_.html;if(P?.html)M=P.html,this.messagesSubject.next(P.messages||[]);else{let z={role:"assistant",text:`Hi! I'm here to help refine your email template. Here's what I can do:

\u2022 Design Ideas \u2013 Ask for layout, color, or content suggestions

\u2022 SEO Tips \u2013 Get recommendations for better deliverability and engagement

\u2022 Targeted Replacements \u2013 Request specific text changes (e.g., "Replace 'technology' with 'innovation'")

\u2022 Please use editor if replacement didn't happen

What would you like to improve?`,json:null,ts:Date.now()},U={html:_.html,messages:[z]};this.messagesSubject.next(U.messages),this.qa.saveChat(i,a,U)}this.htmlSubject.next(M),this.snapsSubject.next(yield this.qa.getSnapsCached(i)),this.validLinksSubject.next(this.qa.getValidLinks(i));let S=this.qa.getSubjectsCached(i);S?.length&&(this.subjectsSubject.next(S),this.subjectsLoading=!1);let E=this.qa.getGrammarCheckCached(i,a);E&&this.grammarCheckResultSubject.next(E),this.loadingVariant=!1,this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),this.cdr.detectChanges(),this.positionChatAtBottom();return}}catch(v){console.error("\u274C Error loading synthetic run:",v)}try{let v=this.qa.getChatCached(i,a);if(v?.html){this.htmlSubject.next(v.html),this.messagesSubject.next(v.messages||[]),this.snapsSubject.next(yield this.qa.getSnapsCached(i)),this.validLinksSubject.next(this.qa.getValidLinks(i));let M=this.qa.getGrammarCheckCached(i,a);M&&this.grammarCheckResultSubject.next(M);let S=this.qa.getSubjectsCached(i);S?.length&&(this.subjectsSubject.next(S),this.subjectsLoading=!1),this.loadingVariant=!1,this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),this.cdr.markForCheck(),this.positionChatAtBottom();return}let P=(yield this.qa.getVariantsRunById(i))?.items?.find(M=>M.no===a)||null;if(P?.html){this.htmlSubject.next(P.html);let M={role:"assistant",text:`Hi! I'm here to help refine your email template. Here's what I can do:

\u2022 Design Ideas \u2013 Ask for layout, color, or content suggestions

\u2022 SEO Tips \u2013 Get recommendations for better deliverability and engagement

\u2022 Targeted Replacements \u2013 Request specific text changes (e.g., "Replace 'technology' with 'innovation'")

\u2022Please use editor is replacement won't happen

What would you like to improve?`,json:null,ts:Date.now()},S={html:P.html,messages:[M]};this.messagesSubject.next(S.messages),this.qa.saveChat(i,a,S),this.snapsSubject.next(yield this.qa.getSnapsCached(i)),this.validLinksSubject.next(this.qa.getValidLinks(i));let E=this.qa.getSubjectsCached(i);E?.length&&(this.subjectsSubject.next(E),this.subjectsLoading=!1);let z=this.qa.getGrammarCheckCached(i,a);z&&this.grammarCheckResultSubject.next(z),this.loadingVariant=!1,this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),this.cdr.markForCheck(),this.positionChatAtBottom();return}try{let E=((yield N(this.qa.getVariantsStatus(i))).items.find(q=>q.no===a)||null)?.html||"";this.htmlSubject.next(E);let z={role:"assistant",text:`Hi! I'm here to help refine your email template. Here's what I can do:

\u2022 Design Ideas \u2013 Ask for layout, color, or content suggestions

\u2022 SEO Tips \u2013 Get recommendations for better deliverability and engagement

\u2022 Targeted Replacements \u2013 Request specific text changes (e.g., "Replace 'technology' with 'innovation'")

\u2022 Please use editor is replacement didn't happen

What would you like to improve?`,json:null,ts:Date.now()},U={html:E,messages:[z]};this.messagesSubject.next(U.messages),this.qa.saveChat(i,a,U),this.snapsSubject.next(yield this.qa.getSnapsCached(i)),this.validLinksSubject.next(this.qa.getValidLinks(i))}catch(M){console.error("\u274C Failed to load from API:",M);let S={role:"assistant",text:"I couldn't restore this variant from the server. If you go back and reopen it from the Variants list, I'll pick it up.",json:null,ts:Date.now()};this.messagesSubject.next([S]),this.snapsSubject.next([]),this.validLinksSubject.next([])}}catch(v){console.error("\u274C Error during component initialization:",v);let _={role:"assistant",text:"An error occurred while loading this variant. Please try refreshing the page.",json:null,ts:Date.now()};this.messagesSubject.next([_]),this.snapsSubject.next([])}finally{this.loadingVariant=!1,this.loadingTimeout&&(clearTimeout(this.loadingTimeout),this.loadingTimeout=void 0),this.cdr.markForCheck(),this.positionChatAtBottom()}this.templateModalOpenSubject.value&&(document.body.style.overflow="hidden")}))}handleBeforeUnload(t){if(this.isFinalizing){let n="\u26A0\uFE0F Screenshot capture is in progress and will be lost if you leave.";t.preventDefault(),t.returnValue=n;return}}canDeactivate(){if(!this.isFinalizing)return!0;let t=confirm(`\u26A0\uFE0F Screenshot capture is in progress and will be lost if you leave.

Are you sure you want to leave? All progress will be lost.`);return t&&this.finalizingSubject.next(!1),t}openEditor(){this.editorOpenSubject.next(!0),this.saveEditorState(!0),this.cdr.detectChanges()}closeEditor(){this.editorOpenSubject.next(!1),this.saveEditorState(!1),this.cdr.detectChanges()}openTemplateModal(){if(this.isFinalizing)return;if(!this.canSubmitTemplate()){let a=this.getSubmitBlockMessage();alert(a);let c=document.getElementById("finalize");c&&c.scrollIntoView({behavior:"smooth",block:"start"});return}let t=this.ar.snapshot.paramMap.get("runId"),n=this.ar.snapshot.paramMap.get("no"),i=!0;if(t&&n){let a=this.qa.getGrammarCheckCached(t,Number(n));a?(this.grammarCheckResultSubject.next(a),this.grammarCheckLoadingSubject.next(!1),i=!1):(this.grammarCheckLoadingSubject.next(!1),this.grammarCheckResultSubject.next(null))}this.templateModalOpenSubject.next(!0),this.saveTemplateModalState(!0),document.body.style.overflow="hidden",document.body.classList.add("validation-modal-open"),i&&setTimeout(()=>{this.checkTemplateGrammar()},300),this.cdr.markForCheck()}closeTemplateModal(){this.grammarCheckLoadingSubject.next(!1),this.grammarCheckResultSubject.next(null),this.templateModalOpenSubject.next(!1),this.saveTemplateModalState(!1),document.body.style.overflow="auto",document.body.classList.remove("validation-modal-open"),this.cdr.markForCheck()}proceedToCampaignSubmit(){let t=this.ar.snapshot.paramMap.get("runId"),n=this.ar.snapshot.paramMap.get("no");t&&n&&sessionStorage.setItem(`return_to_modal_${t}_${n}`,"true"),this.templateModalOpenSubject.next(!1),this.saveTemplateModalState(!1),document.body.style.overflow="auto",document.body.classList.remove("validation-modal-open");let i=this.ar.snapshot.paramMap.get("id"),a=this.htmlSubject.value;i&&t&&n&&this.router.navigate(["/qa",i,"use",t,n,"campaign"],{state:{templateHtml:a,runId:t,variantNo:n}})}checkAndReopenModalAfterCampaign(){this.returningFromCampaign&&setTimeout(()=>{this.templateModalOpenSubject.next(!0),document.body.style.overflow="hidden",document.body.classList.add("validation-modal-open"),this.cdr.markForCheck()},200)}hasValidLinks(){let t=this.htmlSubject.value;return t?this.extractAllLinks(t).filter(a=>{let c=a.trim().toLowerCase();return c&&c!=="#"&&c!=="javascript:void(0)"&&!c.startsWith("mailto:")&&!c.startsWith("tel:")&&c.length>1}).length>0:!1}canSubmitTemplate(){let t=this.snapsSubject.value;return this.hasValidLinks()?t.length>0:!0}getSubmitBlockMessage(){if(!this.hasValidLinks())return"";let t=this.getValidLinkCount();return`Please finalize the template first.

${t} link${t>1?"s":""} detected but not yet captured.`}getValidLinkCount(){let t=this.htmlSubject.value;return t?this.extractAllLinks(t).filter(i=>{let a=i.trim().toLowerCase();return a&&a!=="#"&&a!=="javascript:void(0)"&&!a.startsWith("mailto:")&&!a.startsWith("tel:")&&a.length>1}).length:0}checkTemplateGrammar(){return F(this,null,function*(){let t=this.htmlSubject.value;if(!t||!t.trim()){this.grammarCheckResultSubject.next({hasErrors:!1,mistakes:[],count:0,message:"No content to check"});return}this.grammarCheckLoadingSubject.next(!0),this.cdr.markForCheck();try{let n=yield N(this.qa.checkTemplateGrammar(t)),i={hasErrors:n.hasErrors||!1,mistakes:n.mistakes||[],count:n.count||0,message:n.message||"Check complete"};this.grammarCheckResultSubject.next(i);let a=this.ar.snapshot.paramMap.get("runId"),c=Number(this.ar.snapshot.paramMap.get("no"));this.qa.saveGrammarCheck(a,c,i)}catch(n){console.error("\u274C Grammar check failed:",n),this.grammarCheckResultSubject.next({hasErrors:!1,mistakes:[],count:0,message:"Check failed. Please try again."})}finally{this.grammarCheckLoadingSubject.next(!1),this.cdr.markForCheck()}})}retryGrammarCheck(){this.checkTemplateGrammar()}autoRestartValidationAfterRefresh(){this.grammarCheckLoadingSubject.next(!1),this.grammarCheckResultSubject.next(null),this.templateModalOpenSubject.next(!0),document.body.style.overflow="hidden",setTimeout(()=>{this.checkTemplateGrammar()},300),this.cdr.markForCheck()}unloadNotification(t){(this.grammarCheckLoadingSubject.value||this.templateModalOpenSubject.value)&&(t.preventDefault(),t.returnValue="Validation in progress. Refreshing will lose results. Continue?")}saveTemplateModalState(t){try{this.templateModalKey&&sessionStorage.setItem(this.templateModalKey,t.toString())}catch{}}restoreTemplateModalState(){try{if(this.templateModalKey)return sessionStorage.getItem(this.templateModalKey)==="true"}catch{}return!1}onEditorClose(){this.closeEditor()}onEditorSave(t){let n=this.ar.snapshot.paramMap.get("runId"),i=Number(this.ar.snapshot.paramMap.get("no"));this.htmlSubject.next(t);let a={html:t,messages:this.messagesSubject.value};this.qa.saveChat(n,i,a),this.showSuccess("Template updated successfully!"),this.cdr.markForCheck()}saveEditorState(t){try{this.editorStateKey&&sessionStorage.setItem(this.editorStateKey,t.toString())}catch{}}restoreEditorState(){try{if(this.editorStateKey)return sessionStorage.getItem(this.editorStateKey)==="true"}catch{}return!1}saveDraft(t){try{this.draftMessageKey&&(t.trim()?sessionStorage.setItem(this.draftMessageKey,t):sessionStorage.removeItem(this.draftMessageKey))}catch{}}restoreDraft(){try{if(this.draftMessageKey)return sessionStorage.getItem(this.draftMessageKey)||""}catch{}return""}toggleEditor(){this.editorOpenSubject.value?this.closeEditor():this.openEditor()}openImageModal(t){t.dataUrl&&(this.selectedImage=t,document.body.style.overflow="hidden")}closeImageModal(){this.selectedImage=null,document.body.style.overflow="auto"}onEscapeKey(t){this.selectedImage&&this.closeImageModal()}ngAfterViewInit(){setTimeout(()=>{try{let t=this.chatMessagesRef?.nativeElement;t&&(t.addEventListener("wheel",()=>{this.scrollAnimation&&(cancelAnimationFrame(this.scrollAnimation),this.scrollAnimation=null)}),t.addEventListener("touchmove",()=>{this.scrollAnimation&&(cancelAnimationFrame(this.scrollAnimation),this.scrollAnimation=null)})),window.scrollTo(0,0),this.positionChatAtBottom(),this.checkAndReopenModalAfterCampaign()}catch(t){console.error("Error in ngAfterViewInit:",t)}},0)}positionChatAtBottom(){setTimeout(()=>{let t=this.chatMessagesRef?.nativeElement;t&&t.scrollHeight>0&&(t.style.scrollBehavior="auto",t.scrollTop=t.scrollHeight,setTimeout(()=>{t.style.scrollBehavior="smooth"},50))},50)}scrollToTop(){this.smoothScrollTo(0)}scrollToBottom(){let t=this.chatMessagesRef?.nativeElement||document.querySelector(".chat-messages");t&&this.smoothScrollTo(t.scrollHeight)}smoothScrollTo(t){let n=this.chatMessagesRef?.nativeElement||document.querySelector(".chat-messages");if(!n)return;this.scrollAnimation&&cancelAnimationFrame(this.scrollAnimation);let i=n.scrollTop,a=t-i,c=800,d=null,g=u=>{d===null&&(d=u);let v=u-d,_=Math.min(v/c,1),P=_<.5?2*_*_:1-Math.pow(-2*_+2,2)/2;n.scrollTop=i+a*P,_<1?this.scrollAnimation=requestAnimationFrame(g):this.scrollAnimation=null};this.scrollAnimation=requestAnimationFrame(g)}onSend(){return F(this,null,function*(){let t=(this.input.value||"").trim();if(!t||this.sending)return;this.input.setValue(""),this.saveDraft(""),this.sending=!0;let n=this.ar.snapshot.paramMap.get("runId"),i=Number(this.ar.snapshot.paramMap.get("no")),a=this.htmlSubject.value,c=(this.messagesSubject.value||[]).slice(-6).map(d=>({role:d.role,content:d.text}));try{let d={role:"user",text:t,ts:Date.now()},g=[...this.messagesSubject.value,d];this.messagesSubject.next(g),this.persistThread(n,i,a,g),setTimeout(()=>this.scrollToBottom(),50);let u=yield N(this.qa.sendChatMessage(n,i,a,c,t)),_={role:"assistant",text:u.assistantText||"Okay.",json:this.toAssistantJson(u.json),ts:Date.now()},P=[...this.messagesSubject.value,_];this.messagesSubject.next(P),this.persistThread(n,i,a,P),setTimeout(()=>this.scrollToBottom(),50)}catch(d){console.error("chat send error",d)}finally{this.sending=!1}})}onApplyEdits(t){return F(this,null,function*(){if(this.applyingIndex!==null)return;this.applyingIndex=t;let n=this.ar.snapshot.paramMap.get("runId"),i=Number(this.ar.snapshot.paramMap.get("no")),c=(this.messagesSubject.value[t]?.json?.edits||[]).slice();if(!c.length){this.applyingIndex=null;return}try{let d=this.htmlSubject.value,g=yield N(this.qa.applyChatEdits(n,d,c)),u=g?.html||d,v=Array.isArray(g?.changes)?g.changes.length:0;this.htmlSubject.next(u),this.updateMessageEdits(t,[]);let P={role:"assistant",text:v>0?`Applied ${v} change(s).`:"No matching text found.",json:null,ts:Date.now()},M=[...this.messagesSubject.value,P];this.messagesSubject.next(M),this.persistThread(n,i,u,M),setTimeout(()=>this.scrollToBottom(),50)}catch(d){console.error("apply edits error",d)}finally{this.applyingIndex=null}})}handleEnterKey(t){t.shiftKey||(t.preventDefault(),this.onSend())}captureUrl(t){let n=t.value.trim();n&&(this.onSnapUrl(n),t.value="")}onFinalize(){return F(this,null,function*(){let t=document.getElementById("finalize");t&&t.scrollIntoView({behavior:"smooth",block:"start"});let n=this.ar.snapshot.paramMap.get("runId");if(!(!n||this.finalizingSubject.value)){this.finalizingSubject.next(!0),this.cdr.markForCheck();try{let a=this.snapsSubject.value;this.snapsSubject.next([]),this.qa.saveSnaps(n,[]),this.cdr.markForCheck();let c=this.htmlSubject.value||"",d=this.extractAllLinks(c);if(d.length===0){this.finalizingSubject.next(!1),this.cdr.markForCheck();return}let g=2,u=0,v=0;for(let _=0;_<d.length;_+=g){let M=d.slice(_,_+g).map(E=>this.captureOneWithPromise(n,E));(yield Promise.allSettled(M)).forEach((E,z)=>{let U=_+z;E.status==="fulfilled"?u++:(v++,console.error(`  \u274C [${U+1}] Failed:`,d[U],E.reason))}),_+g<d.length&&(yield new Promise(E=>setTimeout(E,100)))}this.finalizingSubject.next(!1),this.cdr.markForCheck()}catch(a){console.error(`
\u274C FINALIZE ERROR:`),console.error("  - Error:",a),console.error("  - Error message:",a instanceof Error?a.message:"Unknown error"),console.error("  - Error stack:",a instanceof Error?a.stack:"No stack"),this.finalizingSubject.next(!1),this.cdr.markForCheck()}}})}onRetestUrl(t,n){let i=this.getValidSnapUrl(t),a=this.ar.snapshot.paramMap.get("runId");if(!a||!i)return;let c=n?.trim()||i;if(n!==void 0&&(this.editInputValue=n.trim(),n.trim())){let d=this.getSnapKey(t),g=this.originalSnapUrls.get(d)||i;this.originalSnapUrls.set(d,g)}if(n!==void 0&&!n.trim()){if(!confirm("Input field is empty. It will only test the original link"))return;c=i}this.captureAndReplace(a,c,t)}onEditInputKeyDown(t,n,i){if(t.key==="Enter"){t.preventDefault();let a=i.value.trim();this.onRetestUrl(n,a||void 0)}}isSnapping(t){let n=this.getSnapKey(t);return!!this.snapping.get(n)}getSnapKey(t){let n=this.getValidSnapUrl(t).toLowerCase(),i=t.ts||0;return`${n}_${i}`}onSnapUrl(t){let n=(t||"").trim();if(!n)return;let i=this.ar.snapshot.paramMap.get("runId");this.captureOne(i,n)}handleKeyDown(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.onSend())}navigateToVisualEditorWithGrammar(){let t=this.ar.snapshot.paramMap.get("id"),n=this.ar.snapshot.paramMap.get("runId"),i=this.ar.snapshot.paramMap.get("no");if(!t||!n||!i){alert("Missing required parameters");return}let a=this.htmlSubject.value;if(!a){alert("No template HTML found");return}let c=this.grammarCheckResultSubject.value;if(!c||!c.hasErrors){alert("No grammar errors to fix");return}let d=`visual_editor_${t}_golden_html`;sessionStorage.setItem(d,a);let g=`visual_editor_${t}_snapshot_html`;sessionStorage.setItem(g,a);let u=`visual_editor_${t}_editing_mode`;sessionStorage.setItem(u,"use-variant");let v=`visual_editor_${t}_use_variant_meta`;sessionStorage.setItem(v,JSON.stringify({runId:n,no:i}));let _=c.mistakes.map(M=>({find:M.word,replace:M.suggestion,before_context:"",after_context:"",reason:`Context: ${M.context}`,status:"not_found",diagnostics:{}})),P=`visual_editor_${t}_failed_edits`;sessionStorage.setItem(P,JSON.stringify(_)),document.body.classList.remove("validation-modal-open"),document.body.style.overflow="auto",this.router.navigate(["/visual-editor",t])}onValidLinksUpload(t){return F(this,null,function*(){let n=t.target,i=n?.files?.[0];if(!i)return;let a=this.ar.snapshot.paramMap.get("runId"),c=i.name.toLowerCase();if(c.endsWith(".xlsx")||c.endsWith(".xls"))try{let u=yield import("./chunk-UJI5V3YR.js").catch(()=>null);if(u){let v=yield i.arrayBuffer(),_=u.read(v,{type:"array"}),P=_.Sheets[_.SheetNames[0]],M=u.utils.sheet_to_json(P,{header:1});this.consumeValidLinksRows(M),this.qa.saveValidLinks(a,this.validLinksSubject.value),n.value="";return}}catch{}let d=yield i.text(),g=this.parseCsv(d);this.consumeValidLinksRows(g),this.qa.saveValidLinks(a,this.validLinksSubject.value),n.value=""})}consumeValidLinksRows(t){if(!t?.length){this.snackBar.open("No data found in the uploaded file","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["snackbar-error"]}),this.validLinksSubject.next([]);return}let i=(t[0]||[]).map(c=>String(c??"").trim().toLowerCase()).findIndex(c=>c==="valid_links");if(i<0){this.snackBar.open('Missing "valid_links" column. Please ensure your file has a column named "valid_links"',"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["snackbar-error"]}),this.validLinksSubject.next([]);return}let a=[];for(let c of t.slice(1)){let d=String(c?.[i]??"").trim();d&&/^https?:\/\//i.test(d)&&a.push(d)}this.validLinksSubject.next(this.dedupe(a))}parseCsv(t){let n=t.replace(/^\uFEFF/,""),i=[],a=0,c="",d=[],g=!1;for(;a<n.length;){let u=n[a];if(g){if(u==='"'){if(n[a+1]==='"'){c+='"',a+=2;continue}g=!1,a++;continue}c+=u,a++;continue}else{if(u==='"'){g=!0,a++;continue}if(u===","){d.push(c.trim()),c="",a++;continue}if(u==="\r"||u===`
`){d.push(c.trim()),c="",i.push(d),d=[],u==="\r"&&n[a+1]===`
`&&a++,a++;continue}c+=u,a++;continue}}return d.push(c.trim()),i.push(d),i}updateMessageEdits(t,n){let i=this.messagesSubject.value.slice(),a=tt({},i[t]),c=this.toAssistantJson(a.json||{});c.edits=n.slice(),a.json=c,i[t]=a,this.messagesSubject.next(i)}removeSingleEdit(t,n){let a=(this.messagesSubject.value[t]?.json?.edits||[]).slice(),c=a.findIndex(d=>d.find===n.find&&d.before_context===n.before_context&&d.after_context===n.after_context);c>=0&&(a.splice(c,1),this.updateMessageEdits(t,a))}persistThread(t,n,i,a){let c={html:i,messages:a};this.qa.saveChat(t,n,c)}toAssistantJson(t){let i=["suggest","edit","both","clarify"].includes(t?.intent)?t.intent:"suggest",a=Array.isArray(t?.ideas)?t.ideas.map(u=>String(u??"")):[],c=Array.isArray(t?.notes)?t.notes.map(u=>String(u??"")):[],d=Array.isArray(t?.targets)?t.targets.map(u=>String(u??"")):[],g=Array.isArray(t?.edits)?t.edits.map(u=>({find:String(u?.find??""),replace:String(u?.replace??""),before_context:String(u?.before_context??""),after_context:String(u?.after_context??""),reason:u?.reason!=null?String(u.reason):void 0})).filter(u=>u.find&&u.replace):[];return{intent:i,ideas:a,edits:g,targets:d,notes:c}}extractAllLinks(t){let n=this.extractHttpLinks(t),i=this.extractButtonUrls(t),a=[...n,...i];return this.dedupe(a).filter(d=>{let g=d.trim().toLowerCase();return g&&g!=="#"&&g!=="javascript:void(0)"&&!g.startsWith("mailto:")&&!g.startsWith("tel:")&&g.length>1})}extractHttpLinks(t){let n=[];try{let i=new DOMParser().parseFromString(t,"text/html"),a=Array.from(i.querySelectorAll("a[href]"));for(let c of a){let d=(c.getAttribute("href")||"").trim();d&&/^https?:\/\//i.test(d)&&n.push(d)}}catch{let i=/href\s*=\s*["'](https?:\/\/[^"']+)["']/gi,a;for(;a=i.exec(t);)n.push(a[1])}return n}extractButtonUrls(t){let n=[];try{let i=new DOMParser().parseFromString(t,"text/html"),a=Array.from(i.querySelectorAll("button, [onclick], [data-href], [data-url], [data-link]"));for(let d of a){let g=d.getAttribute("data-href")||"",u=d.getAttribute("data-url")||"",v=d.getAttribute("data-link")||"";g&&/^https?:\/\//i.test(g)&&n.push(g),u&&/^https?:\/\//i.test(u)&&n.push(u),v&&/^https?:\/\//i.test(v)&&n.push(v);let _=d.getAttribute("onclick")||"";if(_){let P=[/(?:window\.)?location(?:\.href)?\s*=\s*["'](https?:\/\/[^"']+)["']/gi,/window\.open\s*\(\s*["'](https?:\/\/[^"']+)["']/gi,/href\s*=\s*["'](https?:\/\/[^"']+)["']/gi];for(let M of P){let S;for(;(S=M.exec(_))!==null;)n.push(S[1])}}}let c=Array.from(i.querySelectorAll('a[href][class*="btn"], a[href][class*="button"]'));for(let d of c){let g=(d.getAttribute("href")||"").trim();g&&/^https?:\/\//i.test(g)&&n.push(g)}}catch{let a=[/data-href\s*=\s*["'](https?:\/\/[^"']+)["']/gi,/data-url\s*=\s*["'](https?:\/\/[^"']+)["']/gi,/data-link\s*=\s*["'](https?:\/\/[^"']+)["']/gi,/onclick\s*=\s*["'][^"']*(?:window\.)?location(?:\.href)?\s*=\s*["'](https?:\/\/[^"']+)["']/gi,/onclick\s*=\s*["'][^"']*window\.open\s*\(\s*["'](https?:\/\/[^"']+)["']/gi];for(let c of a){let d;for(;(d=c.exec(t))!==null;)n.push(d[1])}}return n}dedupe(t){let n=new Set,i=[];for(let a of t){let c=a.trim().toLowerCase();n.has(c)||(n.add(c),i.push(a))}return i}captureOne(t,n){let i=n.toLowerCase();this.snapping.get(i)||(this.snapping.set(i,!0),this.qa.snapUrl(t,n).subscribe({next:({snap:a,snaps:c})=>{this.snapsSubject.next(c),this.snapping.set(i,!1),this.cdr.markForCheck()},error:a=>{console.error("snapshot error",a);let d=[{url:n,ok:!1,error:a?.message||"Capture failed",ts:Date.now()},...this.snapsSubject.value];this.snapsSubject.next(d),this.qa.saveSnaps(t,d),this.snapping.set(i,!1),this.cdr.markForCheck()}}))}captureOneWithPromise(t,n){return new Promise(i=>{let a=n.toLowerCase();if(this.snapping.get(a)){i();return}this.snapping.set(a,!0),this.qa.snapUrl(t,n).subscribe({next:({snap:c,snaps:d})=>{this.snapsSubject.next(d),this.snapping.set(a,!1),this.cdr.markForCheck(),i()},error:c=>{console.error("snapshot error",c);let g=[{url:n,ok:!1,error:c?.message||"Capture failed",ts:Date.now()},...this.snapsSubject.value];this.snapsSubject.next(g),this.qa.saveSnaps(t,g),this.snapping.set(a,!1),this.cdr.markForCheck(),i()}})})}onApplySingle(t,n,i){return F(this,null,function*(){if(this.applyingIndex!==null)return;this.applyingIndex=t;let a=this.ar.snapshot.paramMap.get("runId"),c=Number(this.ar.snapshot.paramMap.get("no")),d=wt(tt({},n),{replace:(i??"").trim()||n.replace});try{let g=this.htmlSubject.value,u=yield N(this.qa.applyChatEdits(a,g,[d])),v=u?.html||g,_=Array.isArray(u?.changes)?u.changes.length:0;this.htmlSubject.next(v),_>0&&this.removeSingleEdit(t,n);let M={role:"assistant",text:_>0?`Applied: "${d.find}" \u2192 "${d.replace}".`:"No matching text found.",json:null,ts:Date.now()},S=[...this.messagesSubject.value,M];this.messagesSubject.next(S),this.persistThread(a,c,v,S)}catch(g){console.error("apply single edit error",g)}finally{this.applyingIndex=null}})}onSkipSingle(t,n){let a=(this.messagesSubject.value[t]?.json?.edits||[]).slice();if(!a.length)return;a.splice(n,1),this.updateMessageEdits(t,a);let c=this.ar.snapshot.paramMap.get("runId"),d=Number(this.ar.snapshot.paramMap.get("no"));this.persistThread(c,d,this.htmlSubject.value,this.messagesSubject.value)}onClearEdits(t){this.updateMessageEdits(t,[]);let n=this.ar.snapshot.paramMap.get("runId"),i=Number(this.ar.snapshot.paramMap.get("no"));this.persistThread(n,i,this.htmlSubject.value,this.messagesSubject.value)}showSuccess(t){this.snackBar.open(t,"Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"center",verticalPosition:"bottom"})}onEditSnap(t){let n=this.getSnapKey(t);this.editingSnapUrl===n?(this.editingSnapUrl=null,this.editInputValue=""):(this.editingSnapUrl=n,this.editInputValue=""),this.cdr.markForCheck()}onCancelEdit(t){this.editingSnapUrl=null,this.editInputValue="",this.cdr.markForCheck()}getValidSnapUrl(t){return!t.ok||t.finalUrl&&t.finalUrl.includes("chrome-error")?t.url:t.finalUrl||t.url}isSnapInEditMode(t){let n=this.getSnapKey(t);return this.editingSnapUrl===n}canReplace(t){let n=this.getSnapKey(t),i=!!this.editInputValue?.trim(),a=this.originalSnapUrls.has(n);return i&&a}onReplaceSnap(t,n){let i=n.value.trim();if(!i){confirm("Input field is empty. Do you want to close edit mode without replacing?")&&(this.editingSnapUrl=null,this.editInputValue="",n.value="",this.cdr.markForCheck());return}let a=this.getSnapKey(t),c=this.getValidSnapUrl(t),d=this.originalSnapUrls.get(a)||c;try{this.replaceUrlInHtml(d,i,t),this.showSuccess("\u2713 Replace successful! Link updated in HTML."),this.originalSnapUrls.delete(a)}catch{alert("Replace failed. Please use the editor for manual changes.");return}this.editingSnapUrl=null,this.editInputValue="",n.value="",this.cdr.markForCheck()}getOriginalUrl(t){let n=this.getSnapKey(t),i=this.getValidSnapUrl(t);return this.originalSnapUrls.get(n)||i}getLatestTestedUrl(t){let n=this.getSnapKey(t),i=this.getValidSnapUrl(t);return this.originalSnapUrls.has(n)?i:null}hasBeenRetested(t){let n=this.getSnapKey(t);return this.originalSnapUrls.has(n)}replaceUrlInHtml(t,n,i){let a=this.ar.snapshot.paramMap.get("runId"),c=Number(this.ar.snapshot.paramMap.get("no")),d=this.htmlSubject.value,g=t;if(!t.startsWith("http://")&&!t.startsWith("https://")){let j=d.includes("https://"+t),Z=d.includes("http://"+t);j?g="https://"+t:Z&&(g="http://"+t)}if(!d.includes(g)){let j=g.split("//")[1]||g,Z=d.match(new RegExp(j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"))}let v=n;if(!n.startsWith("http://")&&!n.startsWith("https://")&&(g.startsWith("https://")?v="https://"+n:g.startsWith("http://")&&(v="http://"+n)),!d.includes(g))throw console.error(`
\u274C CRITICAL ERROR: URL NOT FOUND IN HTML!`),console.error("  - Searched for:",g),console.error("  - HTML length:",d.length),alert("URL not found in HTML. The link might have already been changed."),new Error("URL not found in HTML");let _=this.snapsSubject.value,P=_.indexOf(i),M=0;for(let j=0;j<P;j++)(_[j].finalUrl||_[j].url).toLowerCase()===t.toLowerCase()&&M++;let S=(d.match(new RegExp(g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length,E=g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),z=new RegExp(E,"g"),U=0,q=d.replace(z,j=>U===M?(U++,v):(U++,j)),Ui=d!==q,Ri=q.includes(v);if(d===q)throw console.error(`
\u274C CRITICAL ERROR: NO REPLACEMENT WAS MADE!`),console.error("  - New URL:",v),console.error("  - Total occurrences found:",S),console.error("  - Target occurrence index:",M),alert("Replacement failed. No changes were made to the HTML."),new Error("No replacement was made");this.htmlSubject.next(q);let Ut=_.map(j=>j===i?wt(tt({},j),{url:v,finalUrl:v}):j);this.snapsSubject.next(Ut);let Rt={html:q,messages:this.messagesSubject.value};this.qa.saveChat(a,c,Rt),this.qa.saveChatThreadToCache(a,c,Rt).catch(j=>console.error("Failed to cache to IndexedDB:",j)),this.qa.saveSnaps(a,Ut),this.cdr.markForCheck()}captureAndReplace(t,n,i){let a=this.getSnapKey(i);if(this.snapping.get(a))return;this.snapping.set(a,!0);let c=[...this.snapsSubject.value],d=c.findIndex(u=>u===i);if(d===-1){this.snapping.set(a,!1);return}let g={url:n,ts:i.ts};c[d]=g,this.snapsSubject.next(c),this.cdr.markForCheck(),this.qa.snapUrl(t,n).subscribe({next:({snap:u,snaps:v})=>{let _=v.filter(E=>E.url.toLowerCase()===n.toLowerCase()||E.finalUrl?.toLowerCase()===n.toLowerCase()),P=_.length>0?_.reduce((E,z)=>z.ts>E.ts?z:E):null;if(!P){this.snapping.set(a,!1);return}let M=this.snapsSubject.value.filter(E=>E!==g);M.splice(d,0,P),this.snapsSubject.next(M),this.qa.saveSnaps(t,M),this.snapping.set(a,!1);let S=this.getSnapKey(P);if(this.originalSnapUrls.has(a)){let E=this.originalSnapUrls.get(a);this.originalSnapUrls.set(S,E),a!==S&&this.originalSnapUrls.delete(a)}this.editingSnapUrl===a&&(this.editingSnapUrl=S),this.cdr.markForCheck()},error:u=>{let v={url:n,ok:!1,error:u?.message||"Capture failed",ts:i.ts},_=[...this.snapsSubject.value],P=_.findIndex(M=>M===g);P!==-1&&(_[P]=v),this.snapsSubject.next(_),this.qa.saveSnaps(t,_),this.snapping.set(a,!1),this.editingSnapUrl=null,this.editInputValue="",this.cdr.markForCheck()}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=nt({type:e,selectors:[["app-use-variant-page"]],viewQuery:function(n,i){if(n&1&&it(Mn,5),n&2){let a;at(a=ot())&&(i.chatMessagesRef=a.first)}},hostBindings:function(n,i){n&1&&O("beforeunload",function(c){return i.unloadNotification(c)},!1,Bt)("keydown.escape",function(c){return i.onEscapeKey(c)},!1,At)},standalone:!0,features:[rt],decls:73,vars:47,consts:[["chatMessages",""],["repInput",""],["noLinksTemplate",""],["snapLoading",""],["editUrlInput",""],[1,"page-background"],[1,"gradient-orb","orb-1"],[1,"gradient-orb","orb-2"],[1,"gradient-orb","orb-3"],[1,"use-variant-wrapper"],[1,"use-grid"],[1,"use-left","glass-card"],[1,"section-header"],["mat-icon-button","","class","editor-toggle-btn","matTooltip","Use this editor for minor updates. For major changes, use Figma","matTooltipPosition","below",3,"click",4,"ngIf"],[1,"preview-wrapper"],[3,"html","loading"],[1,"use-right","glass-card"],[4,"ngIf"],["id","finalize",1,"finalize-section","glass-card"],[1,"finalize-header"],[1,"header-content"],[1,"finalize-grid"],[1,"screenshots-col"],[1,"col-header"],[1,"header-text-full"],[1,"header-text-short"],[1,"submit-template-wrapper"],["mat-raised-button","","matTooltipPosition","left",1,"submit-template-btn",3,"click","disabled","matTooltip"],[1,"btn-text-full"],[1,"btn-text-short"],[1,"snaps-list-wrapper"],["class","loading-overlay",4,"ngIf"],["class","snaps-list",3,"display",4,"ngIf"],[1,"validation-col"],[1,"upload-section"],[1,"upload-label"],["type","file","accept",".csv,.xlsx,.xls","hidden","",3,"change"],[1,"upload-box"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["class","upload-status",4,"ngIf"],["class","validation-results",4,"ngIf"],["class","image-modal",3,"click",4,"ngIf"],["class","template-modal",4,"ngIf"],["mat-icon-button","","matTooltip","Use this editor for minor updates. For major changes, use Figma","matTooltipPosition","below",1,"editor-toggle-btn",3,"click"],[1,"chat-section"],["mat-raised-button","",1,"finalize-btn",3,"click","disabled"],[1,"chat-container"],[1,"chat-messages"],["class","chat-msg",4,"ngFor","ngForOf","ngForTrackBy"],[1,"composer"],["placeholder","Ask for changes or ideas...","rows","2",1,"message-input",3,"keydown","formControl"],["mat-raised-button","",1,"send-btn",3,"click","disabled"],["diameter","18","mode","indeterminate",4,"ngIf"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",4,"ngIf"],[1,"chat-msg"],[1,"bubble"],[1,"who"],[1,"text",3,"innerText"],[1,"apply-panel"],[1,"apply-header"],[1,"actions-row"],["mat-button","",1,"clear-btn",3,"click","disabled"],["mat-raised-button","",1,"apply-all-btn",3,"click","disabled"],["diameter","16","mode","indeterminate",4,"ngIf"],[1,"apply-list"],["class","apply-item",4,"ngFor","ngForOf"],["diameter","16","mode","indeterminate"],[1,"apply-item"],[1,"edit-row"],[1,"edit-col"],[1,"label"],[1,"orig"],[1,"arrow-col"],["type","text",1,"replacement-input",3,"value"],[1,"edit-actions"],["mat-stroked-button","",1,"apply-single-btn",3,"click","disabled"],["mat-button","",1,"skip-btn",3,"click","disabled"],["diameter","18","mode","indeterminate"],["d","M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"],[3,"htmlChanged","editorClosed","initialHtml"],[1,"loading-overlay"],[1,"loading-content"],[1,"loading-icon"],["viewBox","0 0 64 64","fill","none","xmlns","http://www.w3.org/2000/svg"],["x","8","y","18","width","48","height","36","rx","6","stroke","url(#gradient-camera)","stroke-width","2.5","fill","rgba(139, 92, 246, 0.1)"],["cx","32","cy","36","r","12","stroke","url(#gradient-camera)","stroke-width","2.5","fill","rgba(236, 72, 153, 0.1)"],["cx","32","cy","36","r","7","fill","url(#gradient-camera)","opacity","0.8"],["cx","48","cy","24","r","2.5","fill","url(#gradient-camera)"],["attributeName","opacity","values","0.3;1;0.3","dur","2s","repeatCount","indefinite"],["x","24","y","12","width","16","height","4","rx","2","fill","url(#gradient-camera)"],["cx","32","cy","36","r","6","stroke","url(#gradient-camera)","stroke-width","1.5","fill","none","opacity","0"],["attributeName","r","values","6;18;6","dur","2s","repeatCount","indefinite"],["attributeName","opacity","values","0.8;0;0.8","dur","2s","repeatCount","indefinite"],["id","gradient-camera","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","#6d28d9","stop-opacity","1"],["offset","100%",2,"stop-color","#ec4899","stop-opacity","1"],["diameter","48","mode","indeterminate",1,"main-spinner"],[1,"loading-text"],[1,"loading-subtext"],[1,"snaps-list"],["class","empty-state",4,"ngIf"],["class","snap-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"empty-state"],[4,"ngIf","ngIfElse"],["d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],["d","M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"],["x1","3","y1","3","x2","21","y2","21","stroke-width","2"],[1,"snap-item"],[1,"snap-preview",2,"cursor","pointer",3,"click"],[1,"snap-info"],[1,"snap-url-container"],[1,"snap-url-row"],["target","_blank",1,"snap-url",3,"href"],["matTooltip","Edit URL",1,"edit-snap-btn",3,"click"],["class","snap-meta",4,"ngIf"],["class","snap-edit-input",4,"ngIf"],["class","retest-btn",3,"disabled","click",4,"ngIf"],["alt","Screenshot",3,"src"],["class","snap-loading",4,"ngIf"],["class","snap-error",4,"ngIf"],[1,"snap-loading"],["diameter","24","mode","indeterminate"],[1,"snap-error"],["d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"snap-meta"],[1,"status-badge"],[1,"snap-edit-input"],[1,"url-info-labels"],[1,"url-label-row"],[1,"url-label-title"],[1,"url-label-value"],["class","url-label-row",4,"ngIf"],["type","text","placeholder","Paste or type new URL here",3,"ngModelChange","keydown","ngModel"],["mat-stroked-button","",1,"replace-btn",3,"click","disabled"],[1,"retest-btn-inline",3,"click","disabled"],["mat-stroked-button","","color","warn",1,"cancel-btn",3,"click"],[1,"url-label-value","success"],[1,"retest-btn",3,"click","disabled"],[1,"upload-status"],["class","status-success",4,"ngIf"],[1,"status-success"],["d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"validation-results"],["class","results-header",4,"ngIf"],["class","validation-grid",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"results-header"],[1,"count"],[1,"validation-grid"],["class","validation-item",3,"valid","invalid",4,"ngFor","ngForOf"],[1,"validation-item"],[1,"validation-status"],[1,"validation-content"],["target","_blank",1,"validation-url",3,"href"],["class","validation-reason",4,"ngIf"],["mat-icon-button","","matTooltip","Capture",1,"capture-mini-btn",3,"click"],["d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"validation-reason"],[1,"no-results"],[1,"image-modal",3,"click"],[1,"modal-backdrop"],[1,"modal-content",3,"click"],[1,"modal-close",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[3,"src","alt"],[1,"modal-info"],["target","_blank",3,"href"],[1,"template-modal"],[1,"template-modal-backdrop"],[1,"template-modal-content"],[1,"template-modal-close",3,"click"],[1,"template-modal-header"],[1,"template-modal-body"],[1,"modal-grid"],[1,"modal-left-section"],[1,"section-card"],[1,"card-header"],[1,"header-icon"],[1,"header-text"],["class","check-loading",4,"ngIf"],["class","check-results",4,"ngIf"],[1,"modal-right-section"],[1,"section-card","campaign-trigger-card"],["d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"campaign-trigger-content"],[1,"trigger-info"],[1,"info-item"],["mat-raised-button","",1,"proceed-to-campaign-btn",3,"click"],["d","M13 7l5 5m0 0l-5 5m5-5H6"],[1,"check-loading"],[1,"rocket-animation"],[1,"rocket"],["viewBox","0 0 64 64","fill","currentColor"],["d","M32 4 L32 4 C32 4 40 12 40 24 L40 44 C40 48 36 52 32 52 C28 52 24 48 24 44 L24 24 C24 12 32 4 32 4 Z","fill","white"],["cx","32","cy","20","r","6","fill","#a855f7"],["d","M24 36 L18 48 L24 44 Z","fill","#d8b4fe"],["d","M40 36 L46 48 L40 44 Z","fill","#d8b4fe"],["d","M28 52 L28 58 L32 62 L36 58 L36 52","fill","#fbbf24","opacity","0.8"],["d","M30 52 L30 56 L32 60 L34 56 L34 52","fill","#f59e0b","opacity","0.9"],[1,"stars"],[1,"star","star-1"],[1,"star","star-2"],[1,"star","star-3"],[1,"star","star-4"],[1,"star","star-5"],[1,"check-results"],["class","result-success",4,"ngIf"],["class","result-errors",4,"ngIf"],["mat-button","",1,"retry-btn",3,"click"],[1,"result-success"],[1,"success-icon"],[1,"result-errors"],[1,"error-header"],[1,"error-icon"],[1,"error-text"],[1,"error-message"],[1,"mistakes-list"],["class","mistake-item",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-stroked-button","",1,"use-chatbot-btn",3,"click"],["d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"],["mat-stroked-button","",1,"use-editor-btn",3,"click"],["d","M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"],["d","M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"],[1,"mistake-item"],[1,"mistake-number"],[1,"mistake-content"],[1,"mistake-word"],[1,"wrong-word"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"arrow-icon"],[1,"correct-word"],[1,"mistake-context"],["cx","12","cy","12","r","10","opacity","0.3"],["d","M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"]],template:function(n,i){n&1&&(r(0,"div",5),b(1,"div",6)(2,"div",7)(3,"div",8),s(),r(4,"div",9),h(5,"async"),r(6,"div",10)(7,"section",11),h(8,"async"),r(9,"div",12)(10,"h3"),p(11,"Selected Variant"),s(),x(12,On,3,0,"button",13),h(13,"async"),s(),r(14,"div",14),b(15,"app-html-preview",15),h(16,"async"),s()(),r(17,"section",16),x(18,In,21,16,"ng-container",17)(19,zn,3,3,"ng-container",17),h(20,"async"),s()(),r(21,"section",18)(22,"div",19)(23,"div",20)(24,"h3"),p(25,"Finalize & Validate"),s(),r(26,"p"),p(27,"Capture screenshots and validate links against your source file"),s()()(),r(28,"div",21)(29,"div",22)(30,"div",23)(31,"h4")(32,"span",24),p(33,"Link Screenshots"),s(),r(34,"span",25),p(35,"Link"),s()(),r(36,"div",26)(37,"button",27),h(38,"async"),O("click",function(){return i.openTemplateModal()}),r(39,"span",28),p(40,"Submit Template"),s(),r(41,"span",29),p(42,"Submit"),s()()()(),r(43,"div",30),h(44,"async"),x(45,jn,22,1,"div",31),h(46,"async"),x(47,Jn,5,9,"div",32),h(48,"async"),s()(),r(49,"div",33)(50,"div",23)(51,"h4")(52,"span",24),p(53,"Link Matrix Check"),s(),r(54,"span",25),p(55,"Matrix"),s()()(),r(56,"div",34)(57,"label",35)(58,"input",36),O("change",function(c){return i.onValidLinksUpload(c)}),s(),r(59,"div",37),k(),r(60,"svg",38),b(61,"path",39),s(),V(),r(62,"span"),p(63,"Upload CSV/Excel"),s(),r(64,"small"),p(65,'Must have "valid_links" column'),s()()(),x(66,Zn,2,1,"div",40),h(67,"async"),s(),x(68,li,4,3,"div",41),h(69,"async"),s()()(),x(70,di,11,4,"div",42)(71,Li,134,168,"div",43),h(72,"async"),s()),n&2&&(l(4),$("editor-mode",f(5,23,i.editorOpen$)),l(3),$("minimized",f(8,25,i.editorOpen$)),l(5),m("ngIf",!f(13,27,i.editorOpen$)),l(3),m("html",f(16,29,i.html$)||"")("loading",i.loadingVariant),l(2),$("editor-expanded",i.editorOpenSync),l(),m("ngIf",!i.editorOpenSync),l(),m("ngIf",f(20,31,i.editorOpen$)),l(18),$("needs-finalize",!i.canSubmitTemplate()),m("disabled",f(38,33,i.finalizing$)||!i.canSubmitTemplate())("matTooltip",i.canSubmitTemplate()?"":"Finalize template first"),l(6),$("loading",f(44,35,i.finalizing$)),l(2),m("ngIf",f(46,37,i.finalizing$)),l(2),m("ngIf",f(48,39,i.snaps$)),l(19),m("ngIf",f(67,41,i.validLinks$)),l(2),m("ngIf",f(69,43,i.linkChecks$)),l(2),m("ngIf",i.selectedImage),l(),m("ngIf",f(72,45,i.templateModalOpen$)))},dependencies:[lt,Gt,ct,Yt,ae,Xt,Zt,ne,se,we,_t,ut,gt,pt,mt,ft,ht,le,ce,bt,xt,ie,ee],styles:['@charset "UTF-8";[_nghost-%COMP%]{--primary-purple: #6d28d9;--primary-purple-dark: #5b21b6;--accent-pink: #ec4899;--accent-blue: #3b82f6;--success-green: #10b981;--warning-orange: #f59e0b;--error-red: #ef4444;--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);--gradient-accent: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);--gradient-success: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);--gradient-golden: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);--glass-white: rgba(255, 255, 255, .9);--glass-border: rgba(255, 255, 255, .3);--glass-shadow: 0 8px 32px rgba(0, 0, 0, .08);--radius-sm: 8px;--radius-md: 12px;--radius-lg: 16px;--radius-xl: 20px;--transition-fast: .2s cubic-bezier(.4, 0, .2, 1);--transition-normal: .3s cubic-bezier(.4, 0, .2, 1);--transition-smooth: .4s cubic-bezier(.4, 0, .2, 1);display:block;min-height:100vh;position:relative;overflow:hidden}.page-background[_ngcontent-%COMP%]{position:fixed;inset:64px 0 0;z-index:0;background:linear-gradient(135deg,#f8fafc,#e2e8f0);pointer-events:none}.page-background[_ngcontent-%COMP%]   .gradient-orb[_ngcontent-%COMP%]{position:absolute;border-radius:50%;filter:blur(80px);opacity:.4;animation:_ngcontent-%COMP%_float-orb 20s ease-in-out infinite}.page-background[_ngcontent-%COMP%]   .gradient-orb.orb-1[_ngcontent-%COMP%]{width:350px;height:350px;background:radial-gradient(circle,rgba(139,92,246,.3) 0%,transparent 70%);top:10%;left:-100px;animation-delay:0s}.page-background[_ngcontent-%COMP%]   .gradient-orb.orb-2[_ngcontent-%COMP%]{width:400px;height:400px;background:radial-gradient(circle,rgba(236,72,153,.25) 0%,transparent 70%);top:50%;right:-120px;animation-delay:-7s}.page-background[_ngcontent-%COMP%]   .gradient-orb.orb-3[_ngcontent-%COMP%]{width:300px;height:300px;background:radial-gradient(circle,rgba(59,130,246,.3) 0%,transparent 70%);bottom:20%;left:20%;animation-delay:-14s}.use-variant-wrapper[_ngcontent-%COMP%]{position:relative;z-index:1;padding:.5rem 1rem;min-height:100vh}.use-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 480px;gap:2rem;margin-top:1rem;align-items:stretch;min-height:600px;contain:layout style}.glass-card[_ngcontent-%COMP%]{background:var(--glass-white);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid var(--glass-border);border-radius:var(--radius-xl);box-shadow:var(--glass-shadow);overflow:hidden;transition:transform var(--transition-smooth),box-shadow var(--transition-smooth);position:relative;display:flex;flex-direction:column;contain:layout style paint;will-change:transform}.glass-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 3s infinite;pointer-events:none;will-change:transform}.glass-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 48px #0000001f;transform:translateY(-2px)}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1.25rem 1.5rem;gap:1rem;flex-wrap:nowrap;background:linear-gradient(135deg,#6d28d90d,#ec48990d);border-bottom:1px solid rgba(0,0,0,.05);position:relative;overflow:hidden;min-height:80px;flex-shrink:0}.section-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:1.5rem;right:1.5rem;height:3px;background:var(--gradient-primary);border-radius:3px;transform:scaleX(0);transform-origin:left;animation:_ngcontent-%COMP%_expand-line .6s ease forwards;animation-delay:.2s}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:1;min-width:0;margin:0;font-size:1.1rem;font-weight:700;background:linear-gradient(135deg,#1f2937 0%,var(--primary-purple) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.02em;display:flex;align-items:center;gap:.75rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:20px;background:var(--gradient-primary);border-radius:2px;animation:_ngcontent-%COMP%_pulse-bar 2s infinite;flex-shrink:0}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{padding:1rem;min-height:auto;gap:.75rem}.section-header[_ngcontent-%COMP%]:after{left:1rem;right:1rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;gap:.5rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{width:3px;height:16px}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]{font-size:.75rem!important;padding:.5rem .75rem!important;height:32px!important}}@media (max-width: 480px){.section-header[_ngcontent-%COMP%]{padding:.75rem;gap:.5rem}.section-header[_ngcontent-%COMP%]:after{left:.75rem;right:.75rem}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9rem}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]{font-size:.7rem!important;padding:.4rem .6rem!important;height:28px!important}}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]{background:var(--gradient-golden)!important;color:#fff!important;border:none!important;border-radius:var(--radius-md)!important;font-weight:600!important;font-size:.8rem!important;padding:.6rem 1rem!important;box-shadow:0 4px 12px #f59e0b40!important;display:flex!important;align-items:center!important;gap:.5rem!important;transition:all var(--transition-normal)!important;position:relative!important;overflow:hidden!important;white-space:nowrap!important;flex-shrink:0!important;min-width:auto!important;height:38px!important;line-height:1!important}.section-header[_ngcontent-%COMP%]   .finalize-btn.mat-raised-button[_ngcontent-%COMP%], .section-header[_ngcontent-%COMP%]   .finalize-btn.mat-button-base[_ngcontent-%COMP%]{min-width:auto!important;padding:.6rem 1rem!important;line-height:1!important}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex!important;align-items:center!important;justify-content:center!important;gap:.5rem!important;font-size:.8rem!important;font-weight:600!important;line-height:1!important;padding:0!important;min-height:auto!important}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left var(--transition-normal)}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px!important;height:16px!important;flex-shrink:0!important;transition:transform var(--transition-normal)}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #f59e0b59!important}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]:hover:not(:disabled)   svg[_ngcontent-%COMP%]{transform:rotate(10deg) scale(1.05)}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px)}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{display:flex!important;align-items:center!important;justify-content:flex-start!important;text-align:left!important}.use-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:auto;max-height:calc(100vh - 180px);min-height:550px}.use-left[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]{flex:1;padding:2rem;min-height:500px;max-height:none;position:relative;display:flex;flex-direction:column}.use-left[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:1rem;border:2px dashed rgba(109,40,217,.1);border-radius:var(--radius-lg);pointer-events:none;opacity:0;animation:_ngcontent-%COMP%_fade-in-border .8s ease forwards;animation-delay:.5s}.use-left[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]   app-html-preview[_ngcontent-%COMP%]{display:block;flex:1;border-radius:var(--radius-lg);overflow:hidden;animation:_ngcontent-%COMP%_slide-up .6s ease forwards}.use-right[_ngcontent-%COMP%]{display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slide-in-right .8s ease forwards;max-height:calc(100vh - 180px);min-height:550px;height:100%}.use-right[_ngcontent-%COMP%]   .chat-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;flex:1}.use-right[_ngcontent-%COMP%]   .chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:0;overflow:hidden}.use-right.editor-expanded[_ngcontent-%COMP%]   app-html-editor[_ngcontent-%COMP%]{display:flex;flex:1;height:100%;min-height:0}.chat-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-height:0;overflow:hidden;background:linear-gradient(135deg,#ffffff05,#6d28d905);position:relative}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:2rem 1.5rem;display:flex;flex-direction:column;gap:1.25rem;scroll-behavior:smooth}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#00000005;border-radius:4px}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6d28d94d,#ec48994d);border-radius:4px;transition:background var(--transition-fast)}.chat-messages[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#6d28d980,#ec489980)}.editor-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.editor-wrapper[_ngcontent-%COMP%]   app-html-editor[_ngcontent-%COMP%]{flex:1;display:flex;width:100%;height:100%}.scroll-buttons[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:.5rem;z-index:10}.scroll-btn[_ngcontent-%COMP%]{width:40px!important;height:40px!important;background:var(--gradient-primary)!important;color:#fff!important;box-shadow:0 4px 12px #6d28d94d!important;transition:all var(--transition-normal)!important}.scroll-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2.5}.scroll-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 6px 20px #6d28d966!important}.scroll-btn.scroll-up[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important}.scroll-btn.scroll-down[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c)!important}.chat-msg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_message-appear .5s cubic-bezier(.34,1.56,.64,1) forwards;opacity:0;transform:translateY(20px) scale(.95)}.chat-msg[_ngcontent-%COMP%]:nth-child(2n){animation-delay:.1s}.bubble[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:var(--radius-lg);padding:1.25rem;box-shadow:0 4px 16px #0000000a;position:relative;transition:all var(--transition-normal);overflow:hidden}.bubble[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:var(--gradient-primary);opacity:0;transition:opacity var(--transition-normal)}.bubble[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #00000014;transform:translateY(-2px)}.bubble[_ngcontent-%COMP%]:hover:before{opacity:1}.bubble.me[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6d28d90d,#ec48990d);border-color:#6d28d926}.bubble.me[_ngcontent-%COMP%]:before{background:var(--gradient-accent)}.who[_ngcontent-%COMP%]{font-size:.6875rem;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:var(--primary-purple);margin-bottom:.75rem;display:flex;align-items:center;gap:.5rem}.who[_ngcontent-%COMP%]:before{content:"";width:8px;height:8px;background:var(--gradient-primary);border-radius:50%;animation:_ngcontent-%COMP%_pulse-dot 2s infinite}.text[_ngcontent-%COMP%]{font-size:.9375rem;line-height:1.7;color:#374151;white-space:pre-wrap}.apply-panel[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1.5rem;background:linear-gradient(135deg,#10b98105,#05966905);border:1px solid rgba(16,185,129,.1);border-radius:var(--radius-lg);position:relative}.apply-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:var(--gradient-success);border-radius:2px}.apply-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.25rem}.apply-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.7rem;font-weight:700;color:#1f2937;display:flex;align-items:center;gap:.5rem}.apply-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"\\26a1";font-size:1.25rem;animation:_ngcontent-%COMP%_bounce-icon 2s infinite}.actions-row[_ngcontent-%COMP%]{display:flex;gap:.75rem}.clear-btn[_ngcontent-%COMP%], .skip-btn[_ngcontent-%COMP%], .retest-btn[_ngcontent-%COMP%]{font-size:.8125rem!important;padding:.5rem 1rem!important;border-radius:var(--radius-md)!important;border:2px solid rgba(109,40,217,.2)!important;background:transparent!important;cursor:pointer!important;transition:all .2s ease!important}.clear-btn[_ngcontent-%COMP%]:active:not(:disabled), .skip-btn[_ngcontent-%COMP%]:active:not(:disabled), .retest-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.apply-all-btn[_ngcontent-%COMP%], .apply-single-btn[_ngcontent-%COMP%]{background:var(--gradient-success)!important;color:#fff!important;border:none!important;font-size:.8125rem!important;font-weight:600!important;padding:.5rem 1.25rem!important;border-radius:var(--radius-md)!important;display:flex!important;align-items:center!important;gap:.5rem!important;transition:all var(--transition-normal)!important;position:relative!important;overflow:hidden!important}.apply-all-btn[_ngcontent-%COMP%]:before, .apply-single-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left var(--transition-normal)}.apply-all-btn[_ngcontent-%COMP%]:hover:not(:disabled), .apply-single-btn[_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:0 6px 20px #10b98166!important;transform:translateY(-2px) scale(1.02)}.apply-all-btn[_ngcontent-%COMP%]:hover:not(:disabled):before, .apply-single-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.apply-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.apply-item[_ngcontent-%COMP%]{background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:var(--radius-lg);padding:1.25rem;transition:all var(--transition-normal);position:relative}.apply-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:var(--gradient-primary);border-radius:2px;opacity:0;transition:opacity var(--transition-normal)}.apply-item[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #00000014;transform:translate(8px)}.apply-item[_ngcontent-%COMP%]:hover:before{opacity:1}.edit-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto 1fr;gap:1rem;align-items:start;margin-bottom:1rem}.edit-col[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.6875rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;color:#6b7280;margin-bottom:.5rem;display:flex;align-items:center;gap:.375rem}.edit-col[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]:before{content:"";width:6px;height:6px;background:var(--gradient-primary);border-radius:50%}.edit-col[_ngcontent-%COMP%]   .orig[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b14,#fbbf2414);border:1px solid rgba(245,158,11,.2);padding:.75rem;border-radius:var(--radius-md);font-size:.8125rem;color:#78350f;word-break:break-word;line-height:1.5;font-family:SF Mono,Monaco,Cascadia Code,Roboto Mono,Consolas,Courier New,monospace;position:relative}.edit-col[_ngcontent-%COMP%]   .orig[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:var(--gradient-golden);border-radius:2px}.arrow-col[_ngcontent-%COMP%]{padding-top:2rem;color:#9ca3af;font-weight:700;font-size:1.125rem;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse-arrow 2s infinite}.replacement-input[_ngcontent-%COMP%]{width:100%;border:2px solid rgba(0,0,0,.08);border-radius:var(--radius-md);padding:.75rem;font-size:.8125rem;font-family:SF Mono,Monaco,Cascadia Code,Roboto Mono,Consolas,Courier New,monospace;transition:all var(--transition-normal);background:#fff}.replacement-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-purple);box-shadow:0 0 0 3px #6d28d91a;transform:scale(1.02)}.replacement-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.edit-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;margin-top:1rem}.composer[_ngcontent-%COMP%]{padding:1.5rem;border-top:1px solid rgba(0,0,0,.06);background:linear-gradient(135deg,#ffffffe6,#6d28d905);display:flex;gap:1rem;align-items:center;position:relative;flex-shrink:0}.composer[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:1.5rem;right:1.5rem;height:2px;background:var(--gradient-primary);border-radius:2px}@media (max-width: 768px){.composer[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;gap:.75rem}.composer[_ngcontent-%COMP%]:before{left:1rem;right:1rem}.composer[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{width:100%;min-height:80px}.composer[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.composer[_ngcontent-%COMP%]{padding:.75rem;gap:.5rem}.composer[_ngcontent-%COMP%]:before{left:.75rem;right:.75rem}}.message-input[_ngcontent-%COMP%]{flex:1;border:2px solid rgba(0,0,0,.08);border-radius:var(--radius-lg);padding:1rem 1.25rem;font-family:inherit;font-size:.9375rem;line-height:1.6;resize:none;transition:all var(--transition-normal);background:#fff;box-shadow:0 2px 8px #0000000a}.message-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-purple);box-shadow:0 0 0 3px #6d28d91a;transform:translateY(-2px)}.message-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.send-btn[_ngcontent-%COMP%]{background:var(--gradient-primary)!important;color:#fff!important;border:none!important;border-radius:var(--radius-lg)!important;font-weight:600!important;padding:1rem 1.5rem!important;box-shadow:0 4px 16px #6d28d94d!important;display:flex!important;align-items:center!important;gap:.625rem!important;white-space:nowrap!important;transition:all var(--transition-normal)!important;position:relative!important;overflow:hidden!important}.send-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left var(--transition-normal)}.send-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;transition:transform var(--transition-normal)}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px) scale(1.02);box-shadow:0 8px 25px #6d28d966!important}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.send-btn[_ngcontent-%COMP%]:hover:not(:disabled)   svg[_ngcontent-%COMP%]{transform:translate(2px) rotate(5deg)}.send-btn[_ngcontent-%COMP%]:disabled{opacity:.6;transform:none!important}.finalize-section[_ngcontent-%COMP%]{margin-top:1rem;scroll-margin-top:80px;animation:_ngcontent-%COMP%_fade-in-up .8s ease forwards;opacity:0;transform:translateY(30px);animation-delay:.3s;height:auto;max-height:none;contain:layout style;will-change:opacity,transform}.finalize-header[_ngcontent-%COMP%]{padding:.75rem 1.5rem .75rem 2.5rem;border-bottom:1px solid rgba(0,0,0,.06);background:linear-gradient(135deg,#f59e0b0d,#fbbf240d);position:relative;overflow:hidden;contain:layout style paint}.finalize-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(109,40,217,.3),transparent);transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 60s infinite;animation-delay:1s;will-change:transform}.finalize-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{position:relative;z-index:2;text-align:left}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.75rem;font-weight:700;background:linear-gradient(135deg,#1f2937 0%,var(--warning-orange) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:flex;align-items:center;gap:1rem;text-align:left}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{display:none;content:"\\2728";font-size:2rem;animation:_ngcontent-%COMP%_sparkle-rotate 3s infinite}.finalize-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:1rem;line-height:1.6;text-align:left}@media (max-width: 768px){.finalize-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{text-align:center}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{justify-content:center;text-align:center}.finalize-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}}.finalize-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.3fr .7fr;gap:3rem;padding:.5rem;align-items:stretch;grid-template-rows:1fr}.screenshots-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;background:#ffffff80;border-radius:var(--radius-xl);padding:1.5rem;box-shadow:0 10px 25px #00000014,0 4px 10px #0000000a;border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all var(--transition-normal);height:500px;min-height:500px;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth}.screenshots-col[_ngcontent-%COMP%]:hover{box-shadow:0 15px 35px #0000001f,0 6px 15px #0000000f;transform:translateY(-2px)}.screenshots-col[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.screenshots-col[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#00000005;border-radius:3px}.screenshots-col[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6d28d94d,#ec48994d);border-radius:3px}.screenshots-col[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#6d28d980,#ec489980)}.validation-col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;background:#ffffff80;border-radius:var(--radius-xl);padding:1.5rem;box-shadow:0 10px 25px #00000014,0 4px 10px #0000000a;border:1px solid rgba(255,255,255,.3);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:all var(--transition-normal);height:500px;min-height:500px;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth}.validation-col[_ngcontent-%COMP%]:hover{box-shadow:0 15px 35px #0000001f,0 6px 15px #0000000f;transform:translateY(-2px)}.validation-col[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.validation-col[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#00000005;border-radius:3px}.validation-col[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6d28d94d,#ec48994d);border-radius:3px}.validation-col[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#6d28d980,#ec489980)}.col-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:2px solid rgba(0,0,0,.06);position:relative;gap:1rem;flex-wrap:nowrap}.col-header[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:60px;height:2px;background:var(--gradient-primary);border-radius:2px;animation:_ngcontent-%COMP%_expand-line .8s ease forwards}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:700;background:linear-gradient(135deg,#1f2937 0%,var(--primary-purple) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:flex;align-items:center;gap:.75rem;flex-shrink:1;min-width:0}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:before{content:"";width:3px;height:20px;background:var(--gradient-primary);border-radius:2px;flex-shrink:0}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .header-text-full[_ngcontent-%COMP%]{display:inline}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .header-text-short[_ngcontent-%COMP%]{display:none}.quick-capture[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:stretch;flex-shrink:0}.quick-capture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:2px solid rgba(0,0,0,.08);border-radius:var(--radius-md);font-size:.8125rem;transition:all var(--transition-normal);background:#fff;min-width:180px}.quick-capture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-purple);box-shadow:0 0 0 3px #6d28d91a;transform:translateY(-1px)}.quick-capture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.capture-btn[_ngcontent-%COMP%]{background:var(--gradient-success)!important;color:#fff!important;border-radius:var(--radius-md)!important;width:36px!important;height:36px!important;display:flex!important;align-items:center!important;justify-content:center!important;transition:all var(--transition-normal)!important;position:relative!important;overflow:hidden!important;flex-shrink:0!important}.capture-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#ffffff4d;border-radius:50%;transition:all var(--transition-normal);transform:translate(-50%,-50%)}.capture-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;z-index:2;transition:transform var(--transition-normal)}.capture-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #10b98166!important;transform:translateY(-1px) scale(1.05)}.capture-btn[_ngcontent-%COMP%]:hover:before{width:100%;height:100%}.capture-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg)}.snaps-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.snap-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1.25rem;background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:var(--radius-lg);transition:all var(--transition-normal);position:relative;overflow:hidden;animation:_ngcontent-%COMP%_slide-in-up .6s ease forwards}.snap-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;background:var(--gradient-primary);opacity:0;transition:opacity var(--transition-normal)}.snap-item[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #00000014;transform:translateY(-2px)}.snap-item[_ngcontent-%COMP%]:hover:before{opacity:1}.snap-preview[_ngcontent-%COMP%]{width:100%;height:160px;border-radius:var(--radius-md);overflow:hidden;background:linear-gradient(135deg,#f9fafb,#f3f4f6);border:1px solid rgba(0,0,0,.06);display:flex;align-items:center;justify-content:center;position:relative;align-self:center;max-width:400px}.snap-preview[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:2px;border:1px dashed rgba(109,40,217,.2);border-radius:var(--radius-sm);opacity:0;transition:opacity var(--transition-normal)}.snap-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;object-position:center;transition:transform var(--transition-normal);background:#f8f9fa}.snap-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.snap-item[_ngcontent-%COMP%]:hover   .snap-preview[_ngcontent-%COMP%]:before{opacity:1}.snap-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.snap-loading[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-spinner 1.5s infinite}.snap-error[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.375rem;color:#dc2626;font-size:.75rem;font-weight:600}.snap-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;animation:_ngcontent-%COMP%_shake .5s ease-in-out}.snap-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;min-width:0}.snap-url-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;min-width:0}.snap-url-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;width:100%}.snap-url[_ngcontent-%COMP%]{color:var(--primary-purple);text-decoration:none;font-size:.8125rem;font-weight:600;word-break:break-word;line-height:1.4;transition:all var(--transition-fast);flex:1;min-width:0;overflow-wrap:break-word;hyphens:auto}.snap-url[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--primary-purple-dark)}.snap-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.status-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:16px;font-size:.6875rem;font-weight:700;display:flex;align-items:center;gap:.25rem;transition:all var(--transition-normal);flex-shrink:0}.status-badge.ok[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#0596691a);color:#065f46;border:1px solid rgba(16,185,129,.3)}.status-badge.ok[_ngcontent-%COMP%]:before{content:"\\2713";font-weight:900;color:var(--success-green)}.status-badge.fail[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#dc26261a);color:#991b1b;border:1px solid rgba(239,68,68,.3)}.status-badge.fail[_ngcontent-%COMP%]:before{content:"\\2717";font-weight:900;color:var(--error-red)}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 2rem;text-align:center;background:linear-gradient(135deg,#6d28d905,#ec489905);border:2px dashed rgba(109,40,217,.15);border-radius:var(--radius-xl);position:relative;overflow:hidden}.empty-state[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(109,40,217,.05),transparent);animation:_ngcontent-%COMP%_shimmer 4s infinite}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:#d1d5db;margin-bottom:1rem;animation:_ngcontent-%COMP%_float-icon 3s ease-in-out infinite}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;font-weight:700;font-size:1rem;color:#6b7280}.empty-state[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#9ca3af;font-size:.8125rem;line-height:1.5}.upload-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.upload-label[_ngcontent-%COMP%]{cursor:pointer}.upload-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:1.5rem 1rem;background:linear-gradient(135deg,#6d28d908,#ec489908);border:2px dashed rgba(109,40,217,.2);border-radius:var(--radius-lg);transition:all var(--transition-normal);text-align:center;position:relative;overflow:hidden}.upload-box[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(109,40,217,.05),transparent);transition:left var(--transition-normal)}.upload-box[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6d28d90d,#ec48990d);border-color:#6d28d966;transform:translateY(-1px)}.upload-box[_ngcontent-%COMP%]:hover:before{left:100%}.upload-box[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.05)}.upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:var(--primary-purple);margin-bottom:.75rem;transition:transform var(--transition-normal)}.upload-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;font-size:.875rem;color:#1f2937;margin-bottom:.25rem;display:block}.upload-box[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af;line-height:1.4}.upload-status[_ngcontent-%COMP%]   .status-success[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:linear-gradient(135deg,#10b98114,#05966914);border:1px solid rgba(16,185,129,.2);border-radius:var(--radius-md);color:#065f46;font-size:.8125rem;font-weight:600;animation:_ngcontent-%COMP%_fade-in-up .5s ease forwards}.upload-status[_ngcontent-%COMP%]   .status-success[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0;color:var(--success-green)}.validation-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.results-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.results-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;font-weight:700;color:#1f2937;display:flex;align-items:center;gap:.5rem}.results-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:before{content:"\\1f4ca";font-size:1rem}.results-header[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding:.25rem .5rem;background:var(--gradient-primary);color:#fff;font-size:.6875rem;font-weight:700;border-radius:12px;box-shadow:0 2px 8px #6d28d94d}.validation-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.validation-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:.75rem;align-items:center!important;padding:.875rem;background:#fff;border:1px solid rgba(0,0,0,.06);border-radius:var(--radius-lg);transition:all var(--transition-normal);position:relative;overflow:hidden}.validation-item[_ngcontent-%COMP%]   .capture-mini-btn[_ngcontent-%COMP%]{align-self:center!important;margin:0!important;display:flex!important;align-items:center!important;justify-content:center!important;width:36px!important;height:36px!important;min-width:36px!important;min-height:36px!important}.validation-item[_ngcontent-%COMP%]   .validation-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-self:center!important}.validation-item[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]{align-self:center!important}.validation-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:4px;height:100%;transition:all var(--transition-normal)}.validation-item[_ngcontent-%COMP%]:hover{box-shadow:0 6px 20px #00000014;transform:translate(4px)}.validation-item.valid[_ngcontent-%COMP%]:before{background:var(--gradient-success)}.validation-item.valid[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#10b98105,#05966905)}.validation-item.invalid[_ngcontent-%COMP%]:before{background:var(--gradient-accent)}.validation-item.invalid[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ef444405,#dc262605)}.validation-status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:28px;height:28px;border-radius:50%;flex-shrink:0;transition:all var(--transition-normal);margin-top:2px}.validation-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;transition:transform var(--transition-normal)}.validation-item.valid[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b9811a,#0596691a)}.validation-item.valid[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--success-green)}.validation-item.valid[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.validation-item.invalid[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef44441a,#dc26261a)}.validation-item.invalid[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:var(--error-red)}.validation-item.invalid[_ngcontent-%COMP%]   .validation-status[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.validation-content[_ngcontent-%COMP%]{min-width:0;overflow:hidden}.validation-url[_ngcontent-%COMP%]{color:var(--primary-purple);text-decoration:none;font-size:.75rem;font-weight:600;word-break:break-word;display:block;line-height:1.4;transition:color var(--transition-fast);overflow-wrap:break-word;hyphens:auto;max-width:100%}.validation-url[_ngcontent-%COMP%]:hover{text-decoration:underline;color:var(--primary-purple-dark)}.validation-reason[_ngcontent-%COMP%]{font-size:.6875rem;color:#6b7280;margin-top:.25rem;font-style:italic;word-break:break-word}.capture-mini-btn[_ngcontent-%COMP%]{width:32px!important;height:32px!important;flex-shrink:0;border-radius:50%!important;transition:all var(--transition-normal)!important;margin-top:2px}.capture-mini-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:var(--primary-purple);transition:transform var(--transition-normal)}.capture-mini-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#6d28d91a,#ec48991a)!important;transform:scale(1.05)}.capture-mini-btn[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.05)}.no-results[_ngcontent-%COMP%]{padding:2rem 1.5rem;text-align:center;color:#9ca3af;font-size:.8125rem;background:linear-gradient(135deg,#00000003,#6d28d905);border:2px dashed rgba(0,0,0,.08);border-radius:var(--radius-lg);position:relative}.no-results[_ngcontent-%COMP%]:before{content:"\\1f4cb";font-size:1.5rem;display:block;margin-bottom:.75rem;animation:_ngcontent-%COMP%_float-icon 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float-orb{0%,to{transform:translate(0) rotate(0)}33%{transform:translate(-30px,-20px) rotate(120deg)}66%{transform:translate(20px,30px) rotate(240deg)}}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%)}to{transform:translate(100%)}}@keyframes _ngcontent-%COMP%_expand-line{0%{transform:scaleX(0)}to{transform:scaleX(1)}}@keyframes _ngcontent-%COMP%_pulse-bar{0%,to{opacity:1;transform:scaleY(1)}50%{opacity:.7;transform:scaleY(.8)}}@keyframes _ngcontent-%COMP%_fade-in-border{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slide-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slide-in-right{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_message-appear{0%{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_bounce-icon{0%,to{transform:translateY(0)}50%{transform:translateY(-3px)}}@keyframes _ngcontent-%COMP%_pulse-dot{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.2)}}@keyframes _ngcontent-%COMP%_pulse-arrow{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.8}}@keyframes _ngcontent-%COMP%_fade-in-up{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_sparkle-rotate{0%,to{transform:rotate(0) scale(1)}50%{transform:rotate(180deg) scale(1.1)}}@keyframes _ngcontent-%COMP%_float-icon{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}@keyframes _ngcontent-%COMP%_slide-in-up{0%{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse-spinner{0%,to{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(.95)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-3px)}75%{transform:translate(3px)}}@media (max-width: 1600px){.use-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 450px;gap:1.5rem}.finalize-grid[_ngcontent-%COMP%]{grid-template-columns:1.2fr .8fr;gap:2.5rem}}@media (max-width: 1400px){.use-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 420px}.finalize-grid[_ngcontent-%COMP%]{grid-template-columns:1fr .8fr;gap:2rem}.quick-capture[_ngcontent-%COMP%]{min-width:200px}.quick-capture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:150px}}@media (max-width: 1200px){.use-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.25rem}.chat-messages[_ngcontent-%COMP%]{max-height:500px}.use-variant-wrapper[_ngcontent-%COMP%]{padding:1rem}.finalize-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:2rem}.col-header[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start;gap:1rem}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{align-self:flex-start}.col-header[_ngcontent-%COMP%]   .quick-capture[_ngcontent-%COMP%]{align-self:stretch;min-width:auto}.col-header[_ngcontent-%COMP%]   .quick-capture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:auto}.snap-preview[_ngcontent-%COMP%]{max-width:none;height:200px}}@media (max-width: 768px){.screenshots-col[_ngcontent-%COMP%], .validation-col[_ngcontent-%COMP%]{max-height:400px;padding:1rem;box-shadow:0 6px 15px #0000000f,0 2px 6px #00000008}.use-variant-wrapper[_ngcontent-%COMP%]{padding:.75rem}.section-header[_ngcontent-%COMP%]{padding:1rem;gap:.75rem;min-height:auto}.section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.section-header[_ngcontent-%COMP%]   .finalize-btn[_ngcontent-%COMP%]{width:auto;max-width:none}.preview-wrapper[_ngcontent-%COMP%], .chat-messages[_ngcontent-%COMP%]{padding:1rem}.composer[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;gap:.75rem}.composer[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{min-height:80px}.finalize-header[_ngcontent-%COMP%]{padding:1.5rem}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{font-size:1.5rem}.finalize-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem}.finalize-grid[_ngcontent-%COMP%]{padding:1.5rem;gap:1.5rem}.col-header[_ngcontent-%COMP%]{margin-bottom:1rem;padding-bottom:.75rem}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.snap-item[_ngcontent-%COMP%]{padding:1rem;gap:.75rem}.snap-preview[_ngcontent-%COMP%]{height:140px}.upload-box[_ngcontent-%COMP%]{padding:1.25rem .75rem}.upload-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;margin-bottom:.5rem}.upload-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8125rem}.upload-box[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.6875rem}.validation-item[_ngcontent-%COMP%]{grid-template-columns:auto 1fr;gap:.5rem;padding:.75rem}.validation-item[_ngcontent-%COMP%]   .capture-mini-btn[_ngcontent-%COMP%]{grid-column:1/-1;justify-self:center;margin-top:.75rem;width:36px!important;height:36px!important}.validation-item[_ngcontent-%COMP%]   .capture-mini-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.validation-status[_ngcontent-%COMP%]{width:24px;height:24px;margin-top:0}.validation-status[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.validation-url[_ngcontent-%COMP%]{font-size:.8125rem;line-height:1.5}.validation-reason[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-width: 480px){.screenshots-col[_ngcontent-%COMP%], .validation-col[_ngcontent-%COMP%]{max-height:350px;padding:.75rem;border-radius:var(--radius-lg)}.use-variant-wrapper[_ngcontent-%COMP%]{padding:.5rem}.finalize-header[_ngcontent-%COMP%]{padding:1rem}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;flex-direction:column;text-align:center;gap:.5rem}.finalize-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{font-size:1.25rem}.finalize-grid[_ngcontent-%COMP%]{padding:1rem}.quick-capture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.875rem;padding:.625rem}.capture-btn[_ngcontent-%COMP%]{width:40px!important;height:40px!important}.capture-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.snap-url[_ngcontent-%COMP%]{font-size:.8125rem;line-height:1.6}.status-badge[_ngcontent-%COMP%]{font-size:.625rem;padding:.25rem .5rem}.upload-box[_ngcontent-%COMP%]{padding:1rem .5rem}.edit-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem}.edit-row[_ngcontent-%COMP%]   .arrow-col[_ngcontent-%COMP%]{padding:.5rem 0;text-align:center}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media print{.page-background[_ngcontent-%COMP%], .gradient-orb[_ngcontent-%COMP%]{display:none!important}.glass-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #ddd;background:#fff}.section-header[_ngcontent-%COMP%]:after, .col-header[_ngcontent-%COMP%]:after{display:none}.snap-preview[_ngcontent-%COMP%]{height:120px}.upload-box[_ngcontent-%COMP%]{padding:1rem;border:1px solid #ddd}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:95vw;max-height:95vh}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:calc(95vh - 80px)}.modal-close[_ngcontent-%COMP%]{top:-40px;width:36px;height:36px}.modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}}.editor-toggle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff!important;width:40px!important;height:40px!important;border-radius:10px!important;transition:all .3s ease!important;position:relative!important;overflow:hidden!important;box-shadow:0 4px 12px #667eea59!important;border:2px solid rgba(255,255,255,.5)!important}.editor-toggle-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;position:relative;top:-38%;left:-20%;z-index:2}.editor-toggle-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 8px 24px #667eea80!important;border-color:#fffc!important}.snaps-list-wrapper[_ngcontent-%COMP%]{position:relative;min-height:200px;transition:all var(--transition-smooth)}.snaps-list-wrapper.loading[_ngcontent-%COMP%]{pointer-events:none}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,#fffffff2,#f8fafcfa);-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border-radius:var(--radius-lg);z-index:10;display:flex;align-items:center;justify-content:center;min-height:300px;pointer-events:all}.loading-overlay[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 50%,rgba(139,92,246,.08) 0%,transparent 50%),radial-gradient(circle at 80% 50%,rgba(236,72,153,.08) 0%,transparent 50%);animation:_ngcontent-%COMP%_pulse-gradient 3s ease-in-out infinite}.snaps-list-wrapper[_ngcontent-%COMP%]{position:relative;min-height:300px}.snaps-list-wrapper.loading[_ngcontent-%COMP%]{overflow:hidden;max-height:500px}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem;position:relative;z-index:2;animation:_ngcontent-%COMP%_fade-in-up .6s cubic-bezier(.4,0,.2,1)}.loading-content[_ngcontent-%COMP%]   .loading-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:-.25rem;animation:_ngcontent-%COMP%_float-icon 3s ease-in-out infinite;filter:drop-shadow(0 8px 16px rgba(109,40,217,.2))}.loading-content[_ngcontent-%COMP%]   .loading-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}@media (max-width: 768px){.loading-content[_ngcontent-%COMP%]   .loading-icon[_ngcontent-%COMP%]{width:64px;height:64px}}@media (max-width: 480px){.loading-content[_ngcontent-%COMP%]   .loading-icon[_ngcontent-%COMP%]{width:56px;height:56px}}.loading-content[_ngcontent-%COMP%]   .main-spinner[_ngcontent-%COMP%]{filter:drop-shadow(0 4px 12px rgba(109,40,217,.15))}.loading-content[_ngcontent-%COMP%]   .main-spinner[_ngcontent-%COMP%]     circle{stroke:url(#gradient-spinner)!important}.loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;background:linear-gradient(135deg,#6d28d9,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.01em;animation:_ngcontent-%COMP%_pulse-text 2s ease-in-out infinite}@media (max-width: 768px){.loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-size:.9375rem}}.loading-content[_ngcontent-%COMP%]   .loading-subtext[_ngcontent-%COMP%]{font-size:.875rem;color:#64748b;animation:_ngcontent-%COMP%_fade-in-out 2s ease-in-out infinite}@media (max-width: 480px){.loading-content[_ngcontent-%COMP%]   .loading-subtext[_ngcontent-%COMP%]{font-size:.8125rem}}@keyframes _ngcontent-%COMP%_float-icon{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(1.05)}}.finalize-btn[_ngcontent-%COMP%]{position:relative}.finalize-btn[_ngcontent-%COMP%]   .btn-spinner[_ngcontent-%COMP%]{margin-right:.5rem}.finalize-btn[_ngcontent-%COMP%]   .btn-spinner[_ngcontent-%COMP%]     circle{stroke:#fff!important}.finalize-btn[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed;transform:none!important}.finalize-btn[_ngcontent-%COMP%]:disabled:hover{transform:none!important;box-shadow:0 4px 12px #f59e0b40!important}@keyframes _ngcontent-%COMP%_fade-in-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse-gradient{0%,to{opacity:1}50%{opacity:.6}}@keyframes _ngcontent-%COMP%_pulse-text{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(.98)}}@keyframes _ngcontent-%COMP%_fade-in-out{0%,to{opacity:.6}50%{opacity:1}}.image-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.modal-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#000000e6;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}.modal-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;align-items:center;gap:1rem;z-index:10000;margin-top:60px}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:calc(90vh - 100px);object-fit:contain;border-radius:var(--radius-lg);box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_scaleIn .3s ease-out}.modal-close[_ngcontent-%COMP%]{position:absolute;top:-50px;right:0;background:#ffffffe6;border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-normal)}.modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#333}.modal-close[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}.modal-info[_ngcontent-%COMP%]{background:#fffffff2;padding:.75rem 1.5rem;border-radius:var(--radius-lg);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.modal-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-purple);text-decoration:none;font-size:.875rem;font-weight:600}.modal-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.clickable-image[_ngcontent-%COMP%]{cursor:pointer;transition:all var(--transition-normal)}.clickable-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);filter:brightness(1.1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{max-width:95vw;max-height:95vh}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:calc(95vh - 80px)}.modal-close[_ngcontent-%COMP%]{top:-40px;width:36px;height:36px}.modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.loading-content[_ngcontent-%COMP%]   .main-spinner[_ngcontent-%COMP%]{width:40px!important;height:40px!important}.loading-content[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{font-size:1rem}.loading-content[_ngcontent-%COMP%]   .loading-subtext[_ngcontent-%COMP%]{font-size:.8125rem}}.use-variant-wrapper.editor-mode[_ngcontent-%COMP%]   .use-grid[_ngcontent-%COMP%]{grid-template-columns:350px 1fr;transition:grid-template-columns .4s cubic-bezier(.4,0,.2,1)}@media (max-width: 1200px){.use-variant-wrapper.editor-mode[_ngcontent-%COMP%]   .use-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.use-left.minimized[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]{max-height:400px;overflow:hidden;position:relative}.use-left.minimized[_ngcontent-%COMP%]   .preview-wrapper[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;right:0;height:60px;background:linear-gradient(to bottom,transparent,rgba(255,255,255,.95));pointer-events:none}.editor-toggle-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2)!important;color:#fff!important;width:40px!important;height:40px!important;border-radius:10px!important;transition:all .3s ease!important;position:relative!important;overflow:hidden!important}.editor-toggle-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .3s ease}.editor-toggle-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;position:relative;z-index:2}.editor-toggle-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.05);box-shadow:0 6px 20px #667eea66!important}.editor-toggle-btn[_ngcontent-%COMP%]:hover:before{left:100%}.editor-toggle-btn[_ngcontent-%COMP%]:active{transform:translateY(0) scale(1)}.use-right.editor-expanded[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_expand-editor .4s cubic-bezier(.4,0,.2,1) forwards}.use-right.editor-expanded[_ngcontent-%COMP%]   app-html-editor[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease forwards;animation-delay:.2s;opacity:0}.chat-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;animation:_ngcontent-%COMP%_fade-in .3s ease forwards}@keyframes _ngcontent-%COMP%_expand-editor{0%{opacity:.8;transform:scale(.98)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0}to{opacity:1}}@media (max-width: 1200px){.use-variant-wrapper.editor-mode[_ngcontent-%COMP%]   .use-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.use-variant-wrapper.editor-mode[_ngcontent-%COMP%]   .use-left[_ngcontent-%COMP%]{display:block;order:-1}.use-variant-wrapper.editor-mode[_ngcontent-%COMP%]   .use-right[_ngcontent-%COMP%]{grid-column:1/-1;order:1}}@media (max-width: 768px){.editor-toggle-btn[_ngcontent-%COMP%]{width:36px!important;height:36px!important}.editor-toggle-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}}.edit-snap-btn[_ngcontent-%COMP%]{width:28px!important;height:28px!important;min-width:28px!important;flex-shrink:0;margin-left:auto;padding:0!important;border:none;outline:none;cursor:pointer;background:transparent;border-radius:6px;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.edit-snap-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:var(--primary-purple);transition:transform .2s ease}.edit-snap-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.edit-snap-btn[_ngcontent-%COMP%]:active   mat-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.edit-snap-btn[_ngcontent-%COMP%]:focus{outline:none}.snap-edit-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-top:.75rem;padding:.75rem;background:linear-gradient(135deg,#6d28d905,#ec489905);border:1px solid rgba(109,40,217,.15);border-radius:var(--radius-md);animation:_ngcontent-%COMP%_slide-in-up .3s ease forwards}.snap-edit-input[_ngcontent-%COMP%]   .url-info-labels[_ngcontent-%COMP%]{margin-bottom:12px;padding:12px;background:#f8fafc;border-radius:6px;border-left:3px solid #6d28d9}.snap-edit-input[_ngcontent-%COMP%]   .url-label-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-bottom:8px}.snap-edit-input[_ngcontent-%COMP%]   .url-label-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.snap-edit-input[_ngcontent-%COMP%]   .url-label-title[_ngcontent-%COMP%]{font-size:11px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.snap-edit-input[_ngcontent-%COMP%]   .url-label-value[_ngcontent-%COMP%]{font-size:13px;color:#1e293b;font-family:Courier New,monospace;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.snap-edit-input[_ngcontent-%COMP%]   .url-label-value.success[_ngcontent-%COMP%]{color:#059669;font-weight:500}@media (max-width: 768px){.snap-edit-input[_ngcontent-%COMP%]   .url-label-value[_ngcontent-%COMP%]{font-size:11px;word-break:break-all;white-space:normal}}.snap-edit-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.5rem .75rem;border:2px solid rgba(0,0,0,.08);border-radius:var(--radius-md);font-size:.8125rem;transition:all var(--transition-normal);background:#fff}.snap-edit-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-purple);box-shadow:0 0 0 3px #6d28d91a}.snap-edit-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.replace-btn[_ngcontent-%COMP%]{font-size:.75rem!important;padding:.5rem .75rem!important;border-radius:var(--radius-md)!important;flex-shrink:0;transition:all var(--transition-normal)!important;background:linear-gradient(135deg,#6d28d90d,#ec48990d)!important;border-color:#6d28d94d!important;color:var(--primary-purple)!important}.replace-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(135deg,#6d28d91a,#ec48991a)!important;border-color:var(--primary-purple)!important;transform:translateY(-1px)}.replace-btn.dummy[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.replace-btn.dummy[_ngcontent-%COMP%]:hover{transform:none!important}.retest-btn-inline[_ngcontent-%COMP%]{font-size:.75rem!important;padding:.5rem .75rem!important;border-radius:var(--radius-md)!important;border:2px solid rgba(59,130,246,.3)!important;flex-shrink:0;min-width:80px;height:32px!important;display:flex!important;align-items:center!important;justify-content:center!important;gap:.5rem!important;cursor:pointer!important;transition:all .2s ease!important;background:linear-gradient(135deg,#3b82f60d,#10b9810d)!important;color:var(--accent-blue)!important}.retest-btn-inline[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{width:16px!important;height:16px!important}.retest-btn-inline[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]     circle{stroke:var(--accent-blue)!important}.retest-btn-inline[_ngcontent-%COMP%]:active:not(:disabled){transform:scale(.98)}.retest-btn-inline[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.retest-btn[_ngcontent-%COMP%]{min-width:80px;height:32px!important;display:flex!important;align-items:center!important;justify-content:center!important;gap:.5rem!important}.retest-btn[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{width:16px!important;height:16px!important;position:relative;z-index:1}.retest-btn[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]     circle{stroke:currentColor!important}.retest-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}@keyframes _ngcontent-%COMP%_slide-in-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}  .mat-progress-spinner.btn-spinner circle, .retest-btn[_ngcontent-%COMP%]     .mat-progress-spinner circle, .retest-btn-inline[_ngcontent-%COMP%]     .mat-progress-spinner circle{animation-duration:1s!important}.submit-template-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.submit-template-btn[_ngcontent-%COMP%]{background:var(--gradient-golden)!important;color:#fff!important;border:none!important;border-radius:var(--radius-md)!important;font-weight:600!important;font-size:.875rem!important;padding:.75rem 1.5rem!important;box-shadow:0 4px 12px #f59e0b40!important;display:flex!important;align-items:center!important;gap:.625rem!important;transition:all var(--transition-normal)!important;position:relative!important;overflow:hidden!important;min-height:42px!important;white-space:nowrap!important}.submit-template-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left var(--transition-normal)}.submit-template-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0;transition:transform var(--transition-normal)}.submit-template-btn[_ngcontent-%COMP%]   .btn-text-full[_ngcontent-%COMP%]{display:inline}.submit-template-btn[_ngcontent-%COMP%]   .btn-text-short[_ngcontent-%COMP%]{display:none}.submit-template-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #f59e0b59!important}.submit-template-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.submit-template-btn[_ngcontent-%COMP%]:hover:not(:disabled)   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.submit-template-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.submit-template-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.submit-template-btn.needs-finalize[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.submit-template-btn.needs-finalize[_ngcontent-%COMP%]:hover{transform:none!important;box-shadow:0 2px 8px #f59e0b33!important}.submit-template-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.template-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99999;display:flex;align-items:center;justify-content:center}.template-modal-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);animation:_ngcontent-%COMP%_backdropFadeIn .3s ease-out}.template-modal-content[_ngcontent-%COMP%]{position:relative;width:90%;max-width:1200px;max-height:85vh;background:linear-gradient(135deg,#9333eaf2,#a855f7f2);border-radius:var(--radius-xl);box-shadow:0 25px 50px #0000004d,0 0 0 1px #ffffff1a inset;z-index:100000;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_modalSlideIn .3s cubic-bezier(.34,1.56,.64,1)}.template-modal-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#ffffff80,#fffc,#ffffff80)}.template-modal-close[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;width:40px;height:40px;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-normal);z-index:100001}.template-modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff;transition:transform var(--transition-normal)}.template-modal-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1) rotate(90deg)}.template-modal-close[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.template-modal-header[_ngcontent-%COMP%]{padding:2rem 2rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.2);text-align:center}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:2rem;font-weight:700;color:#fff;letter-spacing:-.02em}@media (max-width: 768px){.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#ffffffbf;font-weight:400;letter-spacing:.01em}@media (max-width: 768px){.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem}}@media (max-width: 480px){.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}.template-modal-body[_ngcontent-%COMP%]{flex:1;padding:2rem;overflow-y:auto;overflow-x:hidden}@keyframes _ngcontent-%COMP%_backdropFadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:scale(.95) translateY(-20px)}to{opacity:1;transform:scale(1) translateY(0)}}@media (max-width: 1400px){.template-modal-content[_ngcontent-%COMP%]{max-width:1100px}.modal-grid[_ngcontent-%COMP%]{gap:1.75rem}}@media (max-width: 1200px){.template-modal-content[_ngcontent-%COMP%]{max-width:95%;max-height:90vh}.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem;padding:1.5rem}.template-modal-header[_ngcontent-%COMP%]{padding:1.75rem 1.5rem 1.25rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem}}@media (max-width: 1024px){.template-modal-content[_ngcontent-%COMP%]{width:95%;max-height:90vh}.template-modal-header[_ngcontent-%COMP%]{padding:1.5rem 1.25rem 1rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.modal-grid[_ngcontent-%COMP%]{padding:1.25rem;gap:1.25rem}.section-card[_ngcontent-%COMP%]{padding:1.5rem;gap:1.5rem}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:44px;height:44px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem}}@media (max-width: 768px){.template-modal-content[_ngcontent-%COMP%]{width:96%;max-height:92vh;border-radius:var(--radius-lg)}.template-modal-close[_ngcontent-%COMP%]{top:1rem;right:1rem;width:36px;height:36px}.template-modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.template-modal-header[_ngcontent-%COMP%]{padding:1.25rem 1rem .875rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.375rem;margin-bottom:.5rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}.modal-grid[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.section-card[_ngcontent-%COMP%]{padding:1.25rem;gap:1.25rem}.card-header[_ngcontent-%COMP%]{gap:.75rem}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.0625rem}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem;margin-top:.125rem}.rocket-animation[_ngcontent-%COMP%]{width:90px;height:90px}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:1.125rem}.loading-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.0625rem}.loading-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}.result-success[_ngcontent-%COMP%], .check-loading[_ngcontent-%COMP%]{padding:2rem .875rem}}@media (max-width: 600px){.template-modal-content[_ngcontent-%COMP%]{width:98%;max-height:94vh;border-radius:var(--radius-md)}.template-modal-header[_ngcontent-%COMP%]{padding:1rem .875rem .75rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.375rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}.modal-grid[_ngcontent-%COMP%]{padding:.875rem;gap:.875rem}.section-card[_ngcontent-%COMP%]{padding:1rem;gap:1rem;border-radius:var(--radius-lg)}.card-header[_ngcontent-%COMP%]{flex-direction:row;gap:.625rem}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.rocket-animation[_ngcontent-%COMP%]{width:80px;height:80px}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%], .loading-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}.loading-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;margin-top:.375rem}.result-success[_ngcontent-%COMP%], .check-loading[_ngcontent-%COMP%]{padding:1.5rem .75rem;gap:1.125rem}.success-icon[_ngcontent-%COMP%]{width:56px!important;height:56px!important}.success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px!important;height:28px!important}}@media (max-width: 480px){.template-modal-content[_ngcontent-%COMP%]{width:100%;max-height:100vh;border-radius:0}.template-modal-close[_ngcontent-%COMP%]{top:.75rem;right:.75rem;width:32px;height:32px}.template-modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.template-modal-header[_ngcontent-%COMP%]{padding:.875rem .75rem .625rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:.25rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.modal-grid[_ngcontent-%COMP%]{padding:.75rem;gap:.75rem}.section-card[_ngcontent-%COMP%]{padding:.875rem;gap:.875rem}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:32px;height:32px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.9375rem}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6875rem}.rocket-animation[_ngcontent-%COMP%]{width:70px;height:70px}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:36px;height:36px}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:.875rem}.loading-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9375rem}.loading-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6875rem}.result-success[_ngcontent-%COMP%], .check-loading[_ngcontent-%COMP%]{padding:1.25rem .5rem;gap:1rem}.success-icon[_ngcontent-%COMP%]{width:48px!important;height:48px!important}.success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px!important;height:24px!important}}@media (max-height: 600px) and (orientation: landscape){.template-modal-content[_ngcontent-%COMP%]{max-height:96vh;width:90%}.template-modal-header[_ngcontent-%COMP%]{padding:.75rem 1rem .5rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem;margin-bottom:.25rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;padding:.875rem;gap:1rem;min-height:auto}.section-card[_ngcontent-%COMP%]{padding:1rem;gap:.875rem}.rocket-animation[_ngcontent-%COMP%]{width:60px;height:60px}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.result-success[_ngcontent-%COMP%], .check-loading[_ngcontent-%COMP%]{padding:1rem .75rem}.loading-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9375rem}.loading-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem}}@media (max-height: 400px) and (orientation: landscape){.template-modal-content[_ngcontent-%COMP%]{max-height:98vh}.template-modal-header[_ngcontent-%COMP%]{padding:.5rem .875rem .375rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.6875rem}.modal-grid[_ngcontent-%COMP%]{padding:.625rem;gap:.75rem}.section-card[_ngcontent-%COMP%]{padding:.75rem;gap:.625rem}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:28px;height:28px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:.875rem}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:none}.rocket-animation[_ngcontent-%COMP%]{width:50px;height:50px}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{display:none}.result-success[_ngcontent-%COMP%], .check-loading[_ngcontent-%COMP%]{padding:.75rem .5rem}.loading-text[_ngcontent-%COMP%], .result-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .result-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}}@media (max-width: 1300px){.submit-template-btn[_ngcontent-%COMP%]{font-size:.8125rem!important;padding:.625rem 1.25rem!important}}@media (max-width: 1100px){.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .header-text-full[_ngcontent-%COMP%]{display:none}.col-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   .header-text-short[_ngcontent-%COMP%]{display:inline}}.template-modal-body[_ngcontent-%COMP%]{flex:1;padding:0;overflow-y:auto;overflow-x:hidden}.template-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.template-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.template-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:4px}.template-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff6}.modal-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;padding:2rem;min-height:500px;align-items:start}@media (max-width: 1024px){.modal-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5rem;padding:1.5rem}}@media (max-width: 768px){.modal-grid[_ngcontent-%COMP%]{padding:1rem;gap:1rem}}.modal-left-section[_ngcontent-%COMP%], .modal-right-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.section-card[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:var(--radius-xl);padding:2rem;display:flex;flex-direction:column;gap:2rem;position:relative;overflow:hidden;flex:1;min-height:500px}.section-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#ffffff4d,#fff9,#ffffff4d)}@media (max-width: 1024px){.section-card[_ngcontent-%COMP%]{min-height:auto}}@media (max-width: 768px){.section-card[_ngcontent-%COMP%]{padding:1.5rem;gap:1.5rem}}.card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#fff3;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#fff}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:40px;height:40px}.card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#fff}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}}.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.875rem;color:#ffffffb3}@media (max-width: 768px){.card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}}.check-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;gap:2rem}@media (max-width: 768px){.check-loading[_ngcontent-%COMP%]{padding:2rem 1rem}}.rocket-animation[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.rocket-animation[_ngcontent-%COMP%]{width:100px;height:100px}}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]{position:relative;z-index:2;animation:_ngcontent-%COMP%_rocket-fly 2s ease-in-out infinite}.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#fff;filter:drop-shadow(0 4px 12px rgba(255,255,255,.3))}@media (max-width: 768px){.rocket-animation[_ngcontent-%COMP%]   .rocket[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]{position:absolute;inset:0}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{position:absolute;font-size:1.5rem;animation:_ngcontent-%COMP%_star-twinkle 1.5s ease-in-out infinite}@media (max-width: 768px){.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star[_ngcontent-%COMP%]{font-size:1.25rem}}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star.star-1[_ngcontent-%COMP%]{top:10%;left:20%;animation-delay:0s}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star.star-2[_ngcontent-%COMP%]{top:20%;right:15%;animation-delay:.3s}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star.star-3[_ngcontent-%COMP%]{bottom:25%;left:15%;animation-delay:.6s}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star.star-4[_ngcontent-%COMP%]{bottom:15%;right:20%;animation-delay:.9s}.rocket-animation[_ngcontent-%COMP%]   .stars[_ngcontent-%COMP%]   .star.star-5[_ngcontent-%COMP%]{top:50%;left:5%;animation-delay:1.2s}.loading-text[_ngcontent-%COMP%]{text-align:center}.loading-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#fff}@media (max-width: 768px){.loading-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem}}.loading-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.9375rem;color:#fffc}@media (max-width: 768px){.loading-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}@keyframes _ngcontent-%COMP%_rocket-fly{0%,to{transform:translateY(0) rotate(-10deg)}50%{transform:translateY(-20px) rotate(-5deg)}}@keyframes _ngcontent-%COMP%_star-twinkle{0%,to{opacity:.3;transform:scale(1)}50%{opacity:1;transform:scale(1.3)}}.result-success[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;gap:1.5rem;animation:_ngcontent-%COMP%_fade-in-up .6s ease forwards}@media (max-width: 768px){.result-success[_ngcontent-%COMP%]{padding:2rem 1rem}}.result-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#10b98133,#05966933);border-radius:50%;display:flex;align-items:center;justify-content:center;position:relative}@media (max-width: 768px){.result-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{width:64px;height:64px}}.result-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-8px;border:2px solid rgba(16,185,129,.3);border-radius:50%;animation:_ngcontent-%COMP%_success-pulse 2s ease-in-out infinite}.result-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#10b981}@media (max-width: 768px){.result-success[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}}.result-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:700;color:#fff;text-align:center}@media (max-width: 768px){.result-success[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem}}.result-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#fffc;text-align:center}@media (max-width: 768px){.result-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem}}@keyframes _ngcontent-%COMP%_success-pulse{0%,to{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.6}}.result-errors[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;animation:_ngcontent-%COMP%_fade-in-up .6s ease forwards}.error-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.25rem;background:#ef444426;border:1px solid rgba(239,68,68,.3);border-radius:var(--radius-lg)}@media (max-width: 768px){.error-header[_ngcontent-%COMP%]{padding:1rem;flex-direction:column;align-items:center;text-align:center}}.error-header[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#ef444433;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}@media (max-width: 768px){.error-header[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{width:40px;height:40px}}.error-header[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#ef4444}@media (max-width: 768px){.error-header[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}.error-header[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{flex:1}.error-header[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:700;color:#fff}@media (max-width: 768px){.error-header[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem}}.error-header[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:.9375rem;color:#fca5a5;font-weight:500}@media (max-width: 768px){.error-header[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.875rem}}.mistakes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-height:300px;overflow-y:auto;padding-right:.5rem}.mistakes-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.mistakes-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:3px}.mistakes-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:3px}.mistakes-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff6}@media (max-width: 768px){.mistakes-list[_ngcontent-%COMP%]{max-height:250px}}.mistake-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:#ffffff14;border:1px solid rgba(255,255,255,.15);border-radius:var(--radius-md);transition:all var(--transition-normal)}.mistake-item[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translate(4px)}@media (max-width: 768px){.mistake-item[_ngcontent-%COMP%]{padding:.875rem;gap:.75rem}}.mistake-item[_ngcontent-%COMP%]   .mistake-number[_ngcontent-%COMP%]{width:28px;height:28px;background:#ef444433;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:700;color:#fca5a5;flex-shrink:0}@media (max-width: 768px){.mistake-item[_ngcontent-%COMP%]   .mistake-number[_ngcontent-%COMP%]{width:24px;height:24px;font-size:.75rem}}.mistake-item[_ngcontent-%COMP%]   .mistake-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem;min-width:0}.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}@media (max-width: 480px){.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]{gap:.5rem}}.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]   .wrong-word[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#ef444433;border:1px solid rgba(239,68,68,.4);border-radius:6px;font-size:.9375rem;font-weight:600;color:#fca5a5;font-family:SF Mono,Monaco,Cascadia Code,Roboto Mono,Consolas,monospace}@media (max-width: 768px){.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]   .wrong-word[_ngcontent-%COMP%]{font-size:.875rem;padding:.25rem .625rem}}.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:20px;height:20px;color:#ffffff80;flex-shrink:0}@media (max-width: 768px){.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]   .arrow-icon[_ngcontent-%COMP%]{width:16px;height:16px}}.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]   .correct-word[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#10b98133;border:1px solid rgba(16,185,129,.4);border-radius:6px;font-size:.9375rem;font-weight:600;color:#6ee7b7;font-family:SF Mono,Monaco,Cascadia Code,Roboto Mono,Consolas,monospace}@media (max-width: 768px){.mistake-item[_ngcontent-%COMP%]   .mistake-word[_ngcontent-%COMP%]   .correct-word[_ngcontent-%COMP%]{font-size:.875rem;padding:.25rem .625rem}}.mistake-item[_ngcontent-%COMP%]   .mistake-context[_ngcontent-%COMP%]{font-size:.8125rem;color:#fff9;line-height:1.5;font-style:italic;word-break:break-word}@media (max-width: 768px){.mistake-item[_ngcontent-%COMP%]   .mistake-context[_ngcontent-%COMP%]{font-size:.75rem}}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1rem;padding-top:.5rem}@media (max-width: 768px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.75rem;padding:1rem 1.75rem;font-size:.9375rem;font-weight:600;border-radius:var(--radius-md);transition:all var(--transition-normal);min-height:48px}@media (max-width: 768px){.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.875rem 1.5rem;font-size:.875rem;min-height:44px}}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;flex-shrink:0}@media (max-width: 768px){.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}}.use-chatbot-btn[_ngcontent-%COMP%]{background:#3b82f626!important;border-color:#3b82f666!important;color:#93c5fd!important}.use-chatbot-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#3b82f640!important;border-color:#3b82f699!important;transform:translateY(-2px);box-shadow:0 4px 12px #3b82f64d}.use-chatbot-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.use-editor-btn[_ngcontent-%COMP%]{background:#a855f726!important;border-color:#a855f766!important;color:#d8b4fe!important}.use-editor-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#a855f740!important;border-color:#a855f799!important;transform:translateY(-2px);box-shadow:0 4px 12px #a855f74d}.use-editor-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.retry-btn[_ngcontent-%COMP%]{display:flex!important;align-items:center;justify-content:center;gap:.625rem;margin:1rem auto 0;padding:.75rem 1.5rem!important;font-size:.9375rem;font-weight:600;color:#fffc!important;border:1px solid rgba(255,255,255,.25)!important;border-radius:var(--radius-md);transition:all var(--transition-normal);min-height:44px;background:#ffffff0d!important}@media (max-width: 768px){.retry-btn[_ngcontent-%COMP%]{padding:.625rem 1.25rem!important;font-size:.875rem;min-height:40px}}.retry-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;flex-shrink:0}@media (max-width: 768px){.retry-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}.retry-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff26!important;border-color:#fff6!important;color:#fff!important;transform:translateY(-2px);box-shadow:0 4px 12px #ffffff26}.retry-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.placeholder-card[_ngcontent-%COMP%]{min-height:400px;display:flex;align-items:center;justify-content:center}@media (max-width: 1024px){.placeholder-card[_ngcontent-%COMP%]{min-height:250px}}.placeholder-card[_ngcontent-%COMP%]   .placeholder-content[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;align-items:center;gap:1rem;opacity:.5}.placeholder-card[_ngcontent-%COMP%]   .placeholder-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:#fff9}@media (max-width: 768px){.placeholder-card[_ngcontent-%COMP%]   .placeholder-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px}}.placeholder-card[_ngcontent-%COMP%]   .placeholder-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9375rem;color:#ffffffb3}@media (max-width: 768px){.placeholder-card[_ngcontent-%COMP%]   .placeholder-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}@media (max-width: 768px){.template-modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh;margin:1rem}.template-modal-header[_ngcontent-%COMP%]{padding:1.5rem 1rem}.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}@media (max-width: 480px){.template-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}.template-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8125rem}.modal-grid[_ngcontent-%COMP%]{padding:.75rem}.section-card[_ngcontent-%COMP%]{padding:1rem}}.check-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:.5rem 0}.campaign-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:99999;display:flex;align-items:center;justify-content:center}.campaign-modal-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);animation:_ngcontent-%COMP%_backdropFadeIn .3s ease-out}.campaign-modal-content[_ngcontent-%COMP%]{position:relative;width:90%;max-width:1200px;max-height:90vh;background:linear-gradient(135deg,#9333eaf2,#a855f7f2);border-radius:var(--radius-xl);box-shadow:0 25px 50px #0000004d,0 0 0 1px #ffffff1a inset;z-index:100000;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_modalSlideIn .3s cubic-bezier(.34,1.56,.64,1)}.campaign-modal-content[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,#ffffff80,#fffc,#ffffff80)}.campaign-modal-close[_ngcontent-%COMP%]{position:absolute;top:1.5rem;right:1.5rem;width:40px;height:40px;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all var(--transition-normal);z-index:100001}.campaign-modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:#fff;transition:transform var(--transition-normal)}.campaign-modal-close[_ngcontent-%COMP%]:hover{background:#ffffff4d;transform:scale(1.1) rotate(90deg)}.campaign-modal-close[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{transform:scale(1.1)}.campaign-modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem .25rem;border-bottom:1px solid rgba(255,255,255,.2);text-align:center}.campaign-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:2rem;font-weight:700;color:#fff;letter-spacing:-.02em}@media (max-width: 768px){.campaign-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.campaign-modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem}}.campaign-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#ffffffbf;font-weight:400;letter-spacing:.01em}@media (max-width: 768px){.campaign-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9375rem}}@media (max-width: 480px){.campaign-modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}.campaign-modal-body[_ngcontent-%COMP%]{flex:1;padding:0;overflow-y:auto;overflow-x:hidden}.campaign-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.campaign-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.campaign-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff4d;border-radius:4px}.campaign-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff6}@media (max-width: 768px){.campaign-modal-content[_ngcontent-%COMP%]{width:95%;max-height:90vh}.campaign-modal-header[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.25rem}.campaign-modal-close[_ngcontent-%COMP%]{top:1rem;right:1rem;width:36px;height:36px}.campaign-modal-close[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}}@media (max-width: 480px){.campaign-modal-header[_ngcontent-%COMP%]{padding:1.5rem 1rem 1rem}}.campaign-trigger-card[_ngcontent-%COMP%]{min-height:400px;display:flex;flex-direction:column;justify-content:space-between}@media (max-width: 1024px){.campaign-trigger-card[_ngcontent-%COMP%]{min-height:auto}}.campaign-trigger-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;flex:1;justify-content:space-between;padding:1rem 0;min-height:350px}@media (max-width: 1024px){.campaign-trigger-content[_ngcontent-%COMP%]{min-height:auto}}.trigger-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:#ffffff14;border:1px solid rgba(255,255,255,.15);border-radius:var(--radius-md);transition:all var(--transition-normal)}.info-item[_ngcontent-%COMP%]:hover{background:#ffffff1f;transform:translate(4px)}.info-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#6ee7b7;flex-shrink:0}.info-item.pending[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff6}.info-item.completed[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#6ee7b7}.info-item.error[_ngcontent-%COMP%]{background:#f59e0b1a;border-color:#f59e0b4d}.info-item.error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fbbf24}.info-item.error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fef3c7}.info-item.not-applicable[_ngcontent-%COMP%]{opacity:.6}.info-item.not-applicable[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#ffffff80}.info-item.not-applicable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic;color:#ffffffb3}.info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9375rem;color:#fff;font-weight:500}.proceed-to-campaign-btn[_ngcontent-%COMP%]{background:var(--gradient-golden)!important;color:#fff!important;border:none!important;border-radius:var(--radius-md)!important;font-weight:700!important;font-size:1rem!important;padding:1.25rem 2rem!important;box-shadow:0 4px 16px #f59e0b4d!important;display:flex!important;align-items:center!important;justify-content:center!important;gap:.75rem!important;transition:all var(--transition-normal)!important;position:relative!important;overflow:hidden!important;width:100%!important;min-height:56px!important}.proceed-to-campaign-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left var(--transition-normal)}.proceed-to-campaign-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;flex-shrink:0;transition:transform var(--transition-normal)}.proceed-to-campaign-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-3px);box-shadow:0 8px 24px #f59e0b66!important}.proceed-to-campaign-btn[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}.proceed-to-campaign-btn[_ngcontent-%COMP%]:hover:not(:disabled)   svg[_ngcontent-%COMP%]{transform:translate(4px)}.proceed-to-campaign-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(-1px)}@media (max-width: 768px){.proceed-to-campaign-btn[_ngcontent-%COMP%]{padding:1rem 1.5rem!important;font-size:.9375rem!important;min-height:48px!important}.proceed-to-campaign-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}}[_nghost-%COMP%]     body.validation-modal-open app-toolbar{display:none!important;visibility:hidden!important;opacity:0!important;height:0!important;max-height:0!important;overflow:hidden!important;pointer-events:none!important}'],data:{animation:[Jt("fadeInOut",[It(":enter",[dt({opacity:0}),Tt("150ms ease-in",dt({opacity:1}))]),It(":leave",[Tt("100ms ease-out",dt({opacity:0}))])])]},changeDetection:0})}}return e})();export{Ha as UseVariantPageComponent};
