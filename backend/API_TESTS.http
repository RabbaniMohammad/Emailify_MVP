### Multi-Channel Campaign API Testing
### Base URL
@baseUrl = http://localhost:3000/api
@token = YOUR_JWT_TOKEN_HERE

### ============================================
### 1. Check Channel Status (No Auth Required for Test)
### ============================================
GET {{baseUrl}}/test/channel-status HTTP/1.1

### ============================================
### 2. AI Content Adaptation (No Auth for Test)
### ============================================
POST {{baseUrl}}/test/adapt-content HTTP/1.1
Content-Type: application/json

{
  "emailHtml": "<html><body><h1>Flash Sale!</h1><p>Get 50% off all products today only. Limited stock available!</p><a href='https://example.com/sale'>Shop Now</a></body></html>",
  "emailSubject": "ðŸ”¥ Flash Sale - 50% OFF Everything!"
}

### ============================================
### 3. Cost Estimation (No Auth for Test)
### ============================================
POST {{baseUrl}}/test/estimate-cost HTTP/1.1
Content-Type: application/json

{
  "channels": ["sms", "whatsapp", "instagram"],
  "recipientCounts": {
    "sms": 100,
    "whatsapp": 100,
    "instagram": 50
  },
  "messageLength": {
    "sms": 160
  }
}

### ============================================
### 4. Send SMS (Test Endpoint)
### ============================================
POST {{baseUrl}}/test/send-sms HTTP/1.1
Content-Type: application/json

{
  "phoneNumber": "+15133065946",
  "message": "ðŸŽ‰ Test SMS from Emailify multi-channel system! This is working perfectly."
}

### ============================================
### 5. Send WhatsApp Template (Test Endpoint)
### ============================================
POST {{baseUrl}}/test/send-whatsapp HTTP/1.1
Content-Type: application/json

{
  "phoneNumber": "+15133065946",
  "templateName": "hello_world"
}

### ============================================
### AUTHENTICATED ENDPOINTS (Require Login)
### ============================================

### 6. Adapt Content (Authenticated)
POST {{baseUrl}}/multi-channel/adapt-content HTTP/1.1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "emailHtml": "<html><body><h1>Welcome to Our Newsletter!</h1><p>Thank you for subscribing. Here's what's new this week...</p></body></html>",
  "emailSubject": "Welcome to Our Newsletter"
}

### 7. Regenerate Content for Specific Channel
POST {{baseUrl}}/multi-channel/regenerate-content HTTP/1.1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "channel": "whatsapp",
  "analysis": {
    "keyMessage": "Flash Sale - 50% OFF",
    "mainPoints": ["Limited time offer", "All products included", "Free shipping"],
    "callToAction": "Shop Now"
  },
  "tone": "exciting"
}

### 8. Validate Channel Content
POST {{baseUrl}}/multi-channel/validate-content HTTP/1.1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "channel": "sms",
  "content": "Flash Sale! 50% OFF everything today only. Shop now: example.com/sale"
}

### 9. Create Multi-Channel Campaign
POST {{baseUrl}}/multi-channel/campaigns HTTP/1.1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Flash Sale Campaign - Nov 2025",
  "channels": ["sms", "whatsapp"],
  "emailHtml": "<html><body><h1>ðŸ”¥ Flash Sale!</h1><p>Get 50% off all products today only!</p><a href='https://example.com/sale'>Shop Now</a></body></html>",
  "emailSubject": "Flash Sale - 50% OFF Today!",
  "recipients": {
    "sms": [
      {
        "phone": "+15133065946",
        "name": "Test User"
      }
    ],
    "whatsapp": [
      {
        "phone": "+15133065946",
        "name": "Test User"
      }
    ]
  },
  "useAIAdaptation": true
}

### 10. Get All Campaigns
GET {{baseUrl}}/multi-channel/campaigns?limit=10&offset=0 HTTP/1.1
Authorization: Bearer {{token}}

### 11. Get Specific Campaign
GET {{baseUrl}}/multi-channel/campaigns/CAMPAIGN_ID_HERE HTTP/1.1
Authorization: Bearer {{token}}

### 12. Get Channel Status (Authenticated)
GET {{baseUrl}}/multi-channel/channel-status HTTP/1.1
Authorization: Bearer {{token}}

### 13. Estimate Cost (Authenticated)
POST {{baseUrl}}/multi-channel/estimate-cost HTTP/1.1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "channels": ["sms", "whatsapp"],
  "recipientCounts": {
    "sms": 1000,
    "whatsapp": 1000
  },
  "messageLength": {
    "sms": 160
  }
}

###############################################
### HOW TO USE THIS FILE:
###############################################
### 1. Install "REST Client" extension in VS Code
### 2. Replace YOUR_JWT_TOKEN_HERE with actual token (after login)
### 3. Click "Send Request" above any ### line
### 4. View response in right panel
###############################################

### To get JWT token, first login:
POST {{baseUrl}}/auth/login HTTP/1.1
Content-Type: application/json

{
  "email": "your-email@example.com",
  "password": "your-password"
}

### Then copy the "accessToken" from response and paste above
